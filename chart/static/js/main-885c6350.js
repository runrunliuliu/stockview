webpackJsonp([1],{"+d7d":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function PlotList(){this.cache=[]}return PlotList.prototype.search=function(e){return 0===this.cache.length?-1:e<this.cache[0].time||e>this.cache[this.cache.length-1].time?-1:this.bsearch(e,0,this.cache.length-1)},PlotList.prototype.get=function(e){return this.cache[e]||null},PlotList.prototype.first=function(){return this.cache[0]||null},PlotList.prototype.last=function(){return this.cache[this.cache.length-1]||null},PlotList.prototype.size=function(){return this.cache.length},PlotList.prototype.slice=function(e,t){return this.cache.slice(e,t)},PlotList.prototype.range=function(e,t){var r=this.search(e),o=this.search(t);if(-1===r){if(!this.first()||t<this.first().time)return[];r=0}if(-1===o){if(!this.last()||e>this.last().time)return[];o=this.cache.length-1}return this.cache.slice(r,o+1)},PlotList.prototype.merge=function(e){if(e.length){e=e.sort(function(e,t){return e.time-t.time});var t=this.cache,r=e[0],o=e[e.length-1],n=this.cache[0],a=this.cache[this.cache.length-1];if(n&&a)if(r.time>a.time)this.cache=t.concat(e);else if(o.time<n.time)this.cache=e.concat(t);else{var i=void 0;i=n.time<r.time?t.slice(0,this.search(r.time)).concat(e):e,a.time>o.time&&(i=i.concat(t.slice(this.search(o.time)+1))),this.cache=i}else this.cache=e}},PlotList.prototype.clear=function(){this.cache=[]},PlotList.prototype.bsearch=function(e,t,r,o){void 0===o&&(o=!0);var n=~~((t+r)/2),a=this.cache[n].time;return t===r?e===a?n:o?n:-1:a===e?n:a>e?this.bsearch(e,t,n):this.bsearch(e,n+1,r)},PlotList}();t.default=o},"+vTI":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("VzTM");var n=r("U7vG"),a=r("rdLu"),i=r("NBiX"),s=function(e){function SearchBox(t,r){var o=e.call(this,t,r)||this;return o.searchSymbols=a.debounce(function(e){return o.setState({loading:!0}),o.context.chartLayout.mainDatasource.searchSymbols(e).then(function(e){o.setState({loading:!1,results:e})})},300),o._chartLayout=r.chartLayout,o.state={focus:!1,loading:!1,results:null,selectedIndex:0},o}return o(SearchBox,e),SearchBox.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.props,e)||!a.isEqual(this.state,t)},SearchBox.prototype.render=function(){var e=this,t=this.state,r=t.focus,o=t.loading,a=t.results,i=t.selectedIndex;return n.createElement("div",{className:"chart-searchbox "+this.props.className+" "+(r?"extended":"")},n.createElement("input",{className:"chart-searchbox-input",defaultValue:"",type:"text",maxLength:100,placeholder:this.props.placeholder,ref:"input",onKeyDown:this.keyDownHandler.bind(this),onFocus:this.inputFocosHandler.bind(this),onBlur:this.inputBlurHandler.bind(this),onInput:this.inputHandler.bind(this)}),n.createElement("ul",{className:"chart-searchresults",onClick:this.selectSymbolHandler.bind(this),style:{display:r&&(o||a)?"block":"none"}},o?n.createElement("li",{className:"loading"}):null,o||!a||a.length?null:n.createElement("li",{className:"no-results"},"查询结果为空"),!o&&a?a.map(function(t,r){return n.createElement("li",{key:t.symbol,"data-index":r,onMouseEnter:e.mouseEnterHandler.bind(e),className:"symbol-item "+(i===r?"selected":"")},n.createElement("span",{className:"symbol-code"},t.symbol),n.createElement("span",{className:"symbol-name"},t.description),n.createElement("span",{className:"symbol-exchanger"},t.type,"-",t.exchange))}):null))},SearchBox.prototype.selectSymbolHandler=function(){var e=this,t=this.state.selectedIndex,r=this.state.results[t];this.props.onSelect(r.symbol),this.props.autofill&&setTimeout(function(){e.refs.input.value=r.symbol,e.refs.input.blur()},300)},SearchBox.prototype.inputFocosHandler=function(){var e=this.refs.input;e.selectionStart=0,e.selectionEnd=e.value.length,this.setState({focus:!0,results:null,selectedIndex:0})},SearchBox.prototype.inputBlurHandler=function(){var e=this;setTimeout(function(){e.setState({focus:!1,selectedIndex:0})},300)},SearchBox.prototype.inputHandler=function(){var e=this.refs.input,t=e.value,r=e.selectionStart;e.value=t.toUpperCase(),e.selectionStart=r,t.length?this.searchSymbols(t):this.setState({results:null,selectedIndex:0})},SearchBox.prototype.mouseEnterHandler=function(e){var t=+e.currentTarget.dataset.index;this.setState({selectedIndex:t})},SearchBox.prototype.keyDownHandler=function(e){var t=this.state.results?this.state.results.length:0,r=this.state.selectedIndex;switch(e.keyCode){case 38:this.setState({selectedIndex:r-1<0?t-1:r-1});break;case 40:this.setState({selectedIndex:(r+1)%t});break;case 13:this.selectSymbolHandler()}},SearchBox.defaultProps={className:"",placeholder:"",autofill:!1},SearchBox.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},SearchBox}(n.Component);t.default=s},"/5Qm":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n,a=r("rdLu"),i=r("Lv/5"),s=r("Cqed"),l=r("wRi7");!function(e){e[e.X=0]="X",e[e.TIME=1]="TIME",e[e.VALUE=2]="VALUE"}(n||(n={}));var c={color:"rgba( 60, 120, 240, 1)",fillColor:"rgba( 60, 120, 216, 1)",lineWidth:2},u=function(e){function MountainChartRenderer(t,r){return e.call(this,t,a.defaults(r,c))||this}return o(MountainChartRenderer,e),MountainChartRenderer.prototype.hitTest=function(){var e=this._plotModel,t=e.graph,r=t.chart,o=r.axisY,a=t.isPrice?o.range:t.getRangeY(),i=e.getCurBar(),c=e.getPrevBar(),u=e.getNextBar();if(!i)return!1;var h=r.crosshair.point,d=h.x,p=h.y,f=c?c[n.X]:0,m=c?o.getYByValue(c[n.VALUE],a):0,_=i[n.X],y=o.getYByValue(i[n.VALUE],a),g=u?u[n.X]:0,v=u?o.getYByValue(u[n.VALUE],a):0,b=Number.MAX_VALUE,E=Number.MAX_VALUE;return c&&(b=l.pointToSegDist(d,p,f,m,_,y)),u&&(E=l.pointToSegDist(d,p,_,y,g,v)),b<s.HIT_TEST_TOLERANCE||E<s.HIT_TEST_TOLERANCE},MountainChartRenderer.prototype.calcRangeY=function(){var e=this._plotModel.getVisibleBars();if(!e.length)return null;var t={max:-Number.MAX_VALUE,min:Number.MAX_VALUE};return e.reduce(function(e,t){var r=t;return r[n.VALUE]<e.min&&(e.min=r[n.VALUE]),r[n.VALUE]>e.max&&(e.max=r[n.VALUE]),e},t)},MountainChartRenderer.prototype.draw=function(e){var t=this._plotModel,r=t.getVisibleBars();if(r.length){var o=t.graph,a=o.chart,i=a.axisY,s=a.height,l=o.isPrice?i.range:o.getRangeY(),c=this.style.histogramBase,u="number"==typeof c?i.getYByValue(c,l):-1;e.strokeStyle=this.style.color,e.lineWidth=this.style.lineWidth,e.fillStyle=this.style.fillColor||this.style.color,e.beginPath();var h,d=r.length;d&&(h=r[0],e.moveTo(~~h[n.X],~~i.getYByValue(h[n.VALUE],l)));for(var p=0;p<d;p++)h=r[p],e.lineTo(~~h[n.X],~~i.getYByValue(h[n.VALUE],l));e.stroke(),"number"==typeof c?(e.lineTo(r[d-1][n.X],u),e.lineTo(r[0][n.X],u)):(e.lineTo(r[d-1][n.X],s),e.lineTo(r[0][n.X],s)),e.closePath(),e.fill()}},MountainChartRenderer.prototype.getSelectionYByBar=function(e){var t=this._plotModel,r=t.graph,o=r.chart,a=o.axisY,i=r.isPrice?a.range:r.getRangeY();return~~a.getYByValue(e[n.VALUE],i)},MountainChartRenderer}(i.BaseChartRenderer);t.MountainChartRenderer=u},"/QIH":function(e,t){},"/bDT":function(e,t,r){"use strict";function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),__export(r("EVIZ")),__export(r("tub9")),__export(r("Uu/m"))},"04Un":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("311T"),r("Vq7t");var n=r("U7vG"),a=r("rdLu"),i=r("NBiX"),s=r("+vTI"),l=r("IloD"),c=[[["sh000001","上证指数"],["sz399001","深证指数"]],[["sz399300","沪深300"],["sz399005","中小板指"]],[["sz399006","创业板指"]]],u=function(e){function Compare(t,r){var o=e.call(this,t,r)||this;return o._indexesCheckState={},o._chartLayout=r.chartLayout,o.state={showCompareDialog:!1},o.showDialogHandler=o.showDialogHandler.bind(o),o.dialogCloseHandler=o.dialogCloseHandler.bind(o),o.selectSymbolHandler=o.selectSymbolHandler.bind(o),o.checkChangeHandler=o.checkChangeHandler.bind(o),o.graphRemoveHandler=o.graphRemoveHandler.bind(o),o}return o(Compare,e),Compare.prototype.componentDidMount=function(){this._chartLayout.addListener("graph_remove",this.graphRemoveHandler)},Compare.prototype.componentWillUnmount=function(){this._chartLayout.removeListener("graph_remove",this.graphRemoveHandler)},Compare.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.props,e)||!a.isEqual(this.state,t)},Compare.prototype.render=function(){var e=this;return n.createElement("div",{className:"chart-compare chart-btn-group"},n.createElement("button",{className:"btn",onClick:this.showDialogHandler},"对比"),this.state.showCompareDialog?n.createElement(l.default,{title:"对比",width:320,className:"chart-compare-dialog",onClose:this.dialogCloseHandler},n.createElement(s.default,{className:"chart-compare-search",placeholder:"输入检索股票",onSelect:this.selectSymbolHandler}),c.map(function(t,r){return n.createElement("div",{key:r,className:"index-shortcut"},t.map(function(t){return n.createElement("div",{key:t[0]},n.createElement("input",{id:"index_"+t[0],type:"checkbox",value:t[0],defaultChecked:!!e._indexesCheckState[t[0]],onChange:e.checkChangeHandler}),n.createElement("label",{htmlFor:"index_"+t[0]},t[1]))}))})):null)},Compare.prototype.showDialogHandler=function(){this.setState({showCompareDialog:!0})},Compare.prototype.dialogCloseHandler=function(){this.setState({showCompareDialog:!1})},Compare.prototype.selectSymbolHandler=function(e){this._chartLayout.addComparison(e)},Compare.prototype.checkChangeHandler=function(e){var t=e.target.checked,r=e.target.value;t?this._indexesCheckState[r]=this.props.onAddComparison(r):(this.props.onRemoveComparison(this._indexesCheckState[r]),this._indexesCheckState[r]=null)},Compare.prototype.graphRemoveHandler=function(e){var t=this._indexesCheckState;Object.keys(t).forEach(function(r){e.isComparison&&e.id===t[r]&&(t[r]=null)})},Compare.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},Compare}(n.Component);t.default=u},"1JLH":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("rdLu"),a=r("PJh5"),i=r("wRi7"),s=r("oJNF"),l=r("Cqed"),c=[["起始时间","startTime","终止时间","endTime"],["起始价","startPrice","终止价","endPrice"],["最高","high","最低","low"],["涨跌幅","changeRate","振幅","amplitude"],["总手","volume","金额","amount"],["阳线","upCount","阴线","downCount"],["十字星","crossCount"]],u={startTime:"#000",endTime:"#000",startPrice:"#000",endPrice:null,high:"#d32f2f",low:"#00796b",changeRate:null,amplitude:"#54a9ff",volume:"#54a9ff",amount:"#54a9ff",upCount:"#d32f2f",downCount:"#00796b",crossCount:"#000"},h=function(e){function DateRangeRenderer(t){var r=e.call(this)||this;return r._datasource=t,r}return o(DateRangeRenderer,e),DateRangeRenderer.prototype.isNowVisible=function(){var e=this._chart.axisX,t=e.getVisibleTimeBars(),r=this._vertexes;return r[0].time<=t[t.length-1].time&&r[1].time>=t[0].time},Object.defineProperty(DateRangeRenderer.prototype,"selected",{set:function(e){e!==this._selected&&(this._selected=e,this._isValid=!1),e||this._chart.removeDrawingTool(this)},enumerable:!0,configurable:!0}),Object.defineProperty(DateRangeRenderer.prototype,"vertexes",{get:function(){var e=this._chart.axisY,t=e.range;return this._vertexes.map(function(e){return{time:e.time,value:(t.max+t.min)/2}})},enumerable:!0,configurable:!0}),Object.defineProperty(DateRangeRenderer.prototype,"statData",{get:function(){if(this._isValid&&this.isFinished())return this._statData;var e,t=this._datasource,r=this._chart.axisX,o=this._vertexes[0].time,s=this._vertexes.length>1?this._vertexes[1].time:r.findTimeBarByX(this.getCursor().x).time;o>s&&(e=o,o=s,s=e);var l=t.range(o,s);if(0===l.length)return this._statData=null;var c=t.resolution>="D"?"YYYY-MM-DD":"YYYY-MM-DD HH:mm",u=l[0].open,h=l[l.length-1].close,d=Math.max.apply(Math,n.pluck(l,"high")),p=Math.min.apply(Math,n.pluck(l,"low")),f=i.formatNumber(n.pluck(l,"volume").reduce(function(e,t){return e+t},0),2)+"手",m=i.formatNumber(n.pluck(l,"amount").reduce(function(e,t){return e+t},0),2),_=l.reduce(function(e,t){return t.close>=t.open?e+1:e},0),y=l.reduce(function(e,t){return t.close<t.open?e+1:e},0),g=l.reduce(function(e,t){return Math.abs((t.open-t.close)/(t.high-t.low))<.2?e+1:e},0);return this._statData={startTime:a(1e3*l[0].time).format(c),endTime:a(1e3*l[l.length-1].time).format(c),startPrice:u,endPrice:h,high:d,low:p,changeRate:(h>=u?"+":"")+(100*(h/u-1)).toFixed(2)+"%",amplitude:(100*(d/p-1)).toFixed(2)+"%",volume:f,amount:m,upCount:_,downCount:y,crossCount:g}},enumerable:!0,configurable:!0}),DateRangeRenderer.prototype.drawTool=function(e){var t=this._chart,r=t.axisX,o=this._vertexes,n=this.getCursor(),a=this.isFinished(),i=t.height,s=this._datasource.resolution;e.strokeStyle="#ababab",e.lineWidth=1,e.beginPath();var l,h,d,p,f;a?(l=o[0].time,h=o[1].time,l>h&&(d=l,l=h,h=d),p=~~r.getXByTime(l),f=~~r.getXByTime(h),e.moveTo(p,0),e.lineTo(p,i),e.moveTo(f,0),e.lineTo(f,i)):(p=~~r.getXByTime(o[0].time),f=n.x,p>f&&(d=p,p=f,f=d),e.moveTo(p,0),e.lineTo(p,i),e.moveTo(f,0),e.lineTo(f,i)),e.stroke(),e.beginPath(),e.strokeStyle="#a000a0",e.setLineDash([6,6]),e.moveTo(p,i/2),e.lineTo(f,i/2),e.moveTo(f-8,i/2-8),e.lineTo(f,i/2),e.moveTo(f-8,i/2+8),e.lineTo(f,i/2),e.stroke(),e.globalAlpha=.3,e.fillStyle="#6b91c5",e.rect(p,0,f-p,i),e.fill();var m=s>="D"?80:100,_=4*m,y=20*c.length+28,g=p+(f-p)/2-_/2,v=i-y,b=this.statData,E=b.startPrice;if(s>"1"&&b){e.globalAlpha=1,e.setLineDash([0,0]),e.lineWidth=1,e.strokeStyle="#6b91c5",e.fillStyle="#eee",e.beginPath(),e.rect(g,v,_,y),e.fill(),e.stroke(),e.textAlign="right",e.textBaseline="middle",e.font="10px Verdana, Arial, sans-serif";for(var x=0,w=c.length,T=void 0,S=void 0;x<w;x++){T=c[x],S=v+14+20*(x+.5);for(var L=0,M=T.length,C=void 0,P=void 0,O=void 0,k=void 0,H=void 0;L<M;L+=2)O=g+m*L+14,C=T[L],e.fillStyle="#000",e.textAlign="left",e.fillText(C,O,S),k=T[L+1],P=b[k],H=u[k],O=g+m*(L+2)-14,H?e.fillStyle=H:"number"==typeof P?e.fillStyle=P>=E?"#d32f2f":"#00796b":"string"==typeof P&&(e.fillStyle="-"!==P.charAt(0)?"#d32f2f":"#00796b"),e.textAlign="right",e.fillText("number"==typeof P?P.toFixed(2):P,O,S)}}},DateRangeRenderer.prototype.hitTestTool=function(){var e=this._chart,t=e.height,r=e.axisX,o=this._vertexes,n=this.getCursor(),a=n.x,i=n.y,s=~~r.getXByTime(o[0].time),c=~~r.getXByTime(o[1].time),u=s<=c?s:c,h=s<=c?c:s;return Math.abs(u-a)<l.HIT_TEST_TOLERANCE||Math.abs(h-a)<l.HIT_TEST_TOLERANCE||a>=u&&a<=h&&Math.abs(i-t/2)<l.HIT_TEST_TOLERANCE},DateRangeRenderer.prototype.isFinished=function(){return 2===this._vertexes.length},DateRangeRenderer}(s.BaseToolRenderer);t.DateRangeRenderer=h},"1k0e":function(e,t){},"1z0p":function(e,t){},"254b":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function GapRenderer(e){this._gapCache=null,this._firstBarTime=0,this._graph=e}return GapRenderer.prototype.findLastGap=function(){var e=this._graph,t=e.chart.axisX,r=e.datasource;if(r.loaded()<2)return null;var o=this._gapCache,n=t.getVisibleTimeBars();if(o&&o.lastBarTime===r.last().time)return o.time2>n[0].time&&o.time2<n[n.length-1].time?o:null;for(var a,i,s,l,c,u,h=this._firstBarTime?r.search(this._firstBarTime):r.loaded()-1,d=r.last().time,p=!1,f=r.max(h),m=r.min(h);h;){if(c=r.barAt(h),u=r.barAt(h-1),f=Math.max(f,c.high),m=Math.min(m,c.low),a=u.time,i=c.time,u.low>f){p=!0,s=u.low,l=f;break}if(u.high<m){p=!0,s=u.high,l=m;break}h--}return p?(this._gapCache=o=p?{time1:a,time2:i,from:s,to:l,lastBarTime:d}:null,o.time2>n[0].time&&o.time2<n[n.length-1].time?o:null):(this._firstBarTime=r.first().time,null)},GapRenderer.prototype.draw=function(e){var t=this._graph.chart,r=t.axisX,o=t.axisY,n=r.width,a=this.findLastGap();if(a){var i=~~r.getXByTime(a.time2),s=~~o.getYByValue(a.from),l=~~o.getYByValue(a.to),c=~~Math.abs(l-s);e.save(),e.fillStyle="#636363",e.font="12px Verdana, Arial, sans-serif",e.fillRect(i,l<s?l:s,n-i,c>0?c:1),e.fillStyle="black",e.fillText(Number(a.from).toFixed(2)+"-"+Number(a.to).toFixed(2),i,s<l?s-2:l-2),e.restore()}},GapRenderer.prototype.clearCache=function(){this._firstBarTime=0,this._gapCache=null},GapRenderer}();t.default=o},"2OPA":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("BzvE"),a=r("vReJ"),i=r("C1Kg"),s=function(e){function AxisYModel(t,r){var o=e.call(this)||this;return o._margin=10,o._isValid=!1,o._datasource=t,o._crosshair=r,o._graphic=new a.default(o),o._tickmark=new i.default(o),o}return o(AxisYModel,e),Object.defineProperty(AxisYModel.prototype,"margin",{get:function(){var e=this.height;return this._margin>e/2?e/2-1:this._margin},set:function(e){var t=this.height;this._margin=e>t/2?t/2-1:e,this._isValid=!1,this._chart.chartLayout.emit("barmargin_change")},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"chart",{get:function(){return this._chart},set:function(e){this._chart=e},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"datasource",{get:function(){return this._datasource},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"graphic",{get:function(){return this._graphic},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"tickmark",{get:function(){return this._tickmark},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"crosshair",{get:function(){return this._crosshair},enumerable:!0,configurable:!0}),AxisYModel.prototype.getYByValue=function(e,t){void 0===t&&(t=this.range);var r=this.margin,o=this.height-2*r,n=t.max-t.min,a=t.max-e;return 0===t.max&&0===t.min?o+r:t.max===t.min?r:a/n*o+r},AxisYModel.prototype.getValueByY=function(e,t){void 0===t&&(t=this.range);var r=this.margin,o=this.height,n=o-2*r;return(o-r-e)*(t.max-t.min)/n+t.min},Object.defineProperty(AxisYModel.prototype,"maxVal",{get:function(){return this.getValueByY(this.getYByValue(this.range.max)-this.margin)},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"minVal",{get:function(){return this.getValueByY(this.getYByValue(this.range.min)+this.margin)},enumerable:!0,configurable:!0}),AxisYModel.prototype.draw=function(e){void 0===e&&(e=!1);var t=this.ctx,r=this.width,o=this.height;e||this._tickmark.clearTickmarks(),t.save(),t.fillStyle="#fff",t.fillRect(0,0,r,o),this._graphic.draw(),t.restore(),this._isValid=!0},AxisYModel}(n);t.default=s},"311T":function(e,t){},3663:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("UYip"),r("Vq7t");var n=r("U7vG"),a=r("rdLu"),i=r("NBiX"),s=function(e){function ControlBar(t,r){var o=e.call(this,t,r)||this;return o._chartLayout=r.chartLayout,o.state={},o.openDialogHandler=o.openDialogHandler.bind(o),o.timeRangeClickHandler=o.timeRangeClickHandler.bind(o),o}return o(ControlBar,e),ControlBar.prototype.shouldComponentUpdate=function(e){return!a.isEqual(this.props,e)},ControlBar.prototype.render=function(){var e=this;return n.createElement("div",{className:"chart-footerbar",style:{width:this.props.width+"px"}},n.createElement("div",{className:"control-list"},i.preferredTimeRange.map(function(t){return n.createElement("a",{key:t,className:"mini-btn",href:"javascript:;","data-value":t,onClick:e.timeRangeClickHandler},t)}),n.createElement("a",{className:"mini-btn",href:"javascript:;",onClick:this.openDialogHandler},"定位时间")))},ControlBar.prototype.timeRangeClickHandler=function(e){var t=e.target.dataset.value;this._chartLayout.setTimeRange(t)},ControlBar.prototype.openDialogHandler=function(){this._chartLayout.toggleGoToDate(!0)},ControlBar.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},ControlBar}(n.Component);t.default=s},"41LM":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("x85n"),r("Vq7t");var n=r("U7vG"),a=r("rdLu"),i=r("NBiX"),s=r("IloD"),l=r("GYzC"),c=r("wRi7"),u=function(e){function MASettings(t,r){var o=e.call(this,t,r)||this;return o._originMAProps=null,o._maProps=null,o._chartLayout=r.chartLayout,o.state={showDialog:!1,colorPickerIndex:-1},o.showDialogHandler=o.showDialogHandler.bind(o),o.closeDialogHandler=o.closeDialogHandler.bind(o),o.checkStateChangeHandler=o.checkStateChangeHandler.bind(o),o.inputChangeHandler=o.inputChangeHandler.bind(o),o.cancelHandler=o.cancelHandler.bind(o),o}return o(MASettings,e),MASettings.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.props,e)||!a.isEqual(this.state,t)},MASettings.prototype.render=function(){var e=this,t=this._chartLayout,r=t.maProps||i.DEFAULT_MA_PROPS;return n.createElement("div",{className:"chart-btn-group"},n.createElement("button",{className:"btn",onClick:this.showDialogHandler},"均线"),this.state.showDialog?n.createElement(s.default,{title:"均线设置",className:"chart-ma-settings",onClose:this.closeDialogHandler},n.createElement("table",null,n.createElement("tbody",null,r.map(function(t,r){return n.createElement("tr",{key:r},n.createElement("td",{width:"60"},n.createElement("input",{id:"chart-settings-ma"+r,type:"checkbox",defaultChecked:t.isVisible,value:r,onChange:e.checkStateChangeHandler}),n.createElement("label",{htmlFor:"chart-settings-ma"+r},"均线",r+1)),n.createElement("td",{width:"130"},n.createElement("input",{type:"text","data-index":r,defaultValue:t.length+"",onChange:e.inputChangeHandler})),n.createElement("td",{width:"30"},n.createElement(l.default,{defaultColor:t.color,onChangeComplete:e.colorChangeHandler(r)})))}))),n.createElement("div",{className:"chart-ma-settings-btn-group clearfix"},n.createElement("button",{className:"btn btn-gray btn-smaller",onClick:this.cancelHandler},"取消"),n.createElement("button",{className:"btn btn-blue btn-smaller",onClick:this.closeDialogHandler},"确定"))):null)},MASettings.prototype.showDialogHandler=function(){var e=this._chartLayout;this._maProps=e.maProps||c.cloneObj(i.DEFAULT_MA_PROPS),this._originMAProps=c.cloneObj(this._maProps),this.setState({showDialog:!0})},MASettings.prototype.closeDialogHandler=function(){this._maProps=null,this._originMAProps=null,this.setState({showDialog:!1})},MASettings.prototype.checkStateChangeHandler=function(e){var t=this._chartLayout,r=e.target.checked,o=+e.target.value,n=t.maStudies[o],a=this._maProps;a[o].isVisible=r,t.maProps=a,t.modifyGraph(n,{isVisible:r})},MASettings.prototype.inputChangeHandler=function(e){var t=this._chartLayout,r=e.target.dataset.index,o=+e.target.value,n=t.maStudies[r],a=this._maProps;a[r].length=o,t.maProps=a,t.modifyGraph(n,{input:[o]})},MASettings.prototype.colorChangeHandler=function(e){var t=this;return function(r){var o=t._chartLayout,n=t._maProps,a=o.maStudies[e],i=a.styles;n[e].color=r,i[0].color=r,o.maProps=n,o.modifyGraph(a,{styles:i})}.bind(this)},MASettings.prototype.cancelHandler=function(){var e=this,t=this._chartLayout,r=t.maStudies,o=this._maProps,n=this._originMAProps;n.forEach(function(t,n){var i=r[n],s=i.styles;a.isEqual(t,o[n])||(s[0].color=t.color,e.props.onStudyModified(i,{input:[t.length],isVisible:t.isVisible,styles:s}))}),t.maProps=n,this.closeDialogHandler()},MASettings.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},MASettings}(n.Component);t.default=u},"4VlZ":function(e,t){},"58Xd":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function GridRenderer(e){this._chart=e}return GridRenderer.prototype.draw=function(e){var t,r,o=this._chart,n=o.axisX,a=o.axisY,i=~~o.width,s=~~o.height;e.save(),e.translate(.5,.5),e.lineWidth=1,e.strokeStyle="#e6e6e6",e.beginPath(),t=n.tickmark.getTickMarksByTimeBars(n.getVisibleTimeBars());for(var l=0,c=t.length;l<c;l++)r=t[l],e.moveTo(~~r.x,0),e.lineTo(~~r.x,s);t=a.tickmark.getTickMarksByTimeBars();for(var l=0,c=t.length;l<c;l++)r=t[l],e.moveTo(0,~~r.y),e.lineTo(i,~~r.y);e.stroke(),e.restore()},GridRenderer}();t.default=o},"5A/R":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("ZUoU");var n=r("U7vG"),a=r("rdLu"),i=r("bHfy"),s=r("EL4d"),l=r("8JFl"),c=r("wRi7"),u=function(e){function CapitalFlow(){var t=e.call(this)||this;return t.state={showToolTip:!1,label:"",color:"#fff",value:0,left:0,top:0},t.sectorMouseMoveHandler=t.sectorMouseMoveHandler.bind(t),t.sectorMouseLeaveHandler=t.sectorMouseLeaveHandler.bind(t),t}return o(CapitalFlow,e),CapitalFlow.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.props,e)||!a.isEqual(this.state,t)},CapitalFlow.prototype.componentDidMount=function(){this._capitalFlowScroll=new i(this.refs.container,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0})},CapitalFlow.prototype.componentDidUpdate=function(){this._capitalFlowScroll.refresh()},CapitalFlow.prototype.componentWillUnmount=function(){this._capitalFlowScroll.destroy(),this._capitalFlowScroll=null},CapitalFlow.prototype.render=function(){var e=this.props.capitalFlowInfo,t=e.donutChartData,r=e.barChartData;return n.createElement("div",{className:"chart-capital-flow",ref:"container",style:{maxHeight:this.props.maxHeight+"px"}},n.createElement("div",null,n.createElement(s.default,{data:t,width:248,height:128,onSectorMouseMove:this.sectorMouseMoveHandler,onSectorMouseLeave:this.sectorMouseLeaveHandler}),n.createElement(l.default,{data:r,width:248,height:128})),n.createElement("div",{className:"tool-tip",style:{display:this.state.showToolTip?"block":"none",left:this.state.left,top:this.state.top}},this.state.label,":",n.createElement("span",{style:{color:this.state.color}},this.state.value)))},CapitalFlow.prototype.sectorMouseMoveHandler=function(e){var t=c.clientOffset(this.refs.container);this.setState({showToolTip:!0,label:e.label,value:e.value,color:e.color,left:e.pageX-t.left,top:e.pageY-t.top})},CapitalFlow.prototype.sectorMouseLeaveHandler=function(){this.setState({showToolTip:!1})},CapitalFlow}(n.Component);t.default=u},"5cZ6":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n,a=r("rdLu"),i=r("Lv/5"),s=r("wRi7");!function(e){e[e.X=0]="X",e[e.TIME=1]="TIME",e[e.VOLUME=2]="VOLUME",e[e.IS_DOWN=3]="IS_DOWN"}(n||(n={}));var l={color:"#ff524f",colorDown:"#2bbe65",lineWidth:1,opacity:1},c=function(e){function ColumnChartRenderer(t,r){return e.call(this,t,a.defaults(r,l))||this}return o(ColumnChartRenderer,e),ColumnChartRenderer.prototype.hitTest=function(){var e=this._plotModel,t=e.graph,r=t.chart,o=r.axisX,a=r.axisY,i=t.isPrice?a.range:t.getRangeY(),l=e.getCurBar();if(!l)return!1;var c,u,h,d,p=r.crosshair.point,f=o.barWidth,m=r.height,_=this.style.histogramBase,y=this.style.scale||1,g=a.margin,v=p.x,b=p.y;return"number"==typeof _?(c=l[n.X]-f/2,u=a.getYByValue(l[n.VOLUME],i),h=c+f,d=a.getYByValue(_,i),s.isPointInRect(v,b,c,u,h,d)):"number"==typeof this.style.scale?(c=l[n.X]-f/2,u=~~(m-(m-a.getYByValue(l[n.VOLUME],i)-g)*y),h=c+f,d=m,s.isPointInRect(v,b,c,u,h,d)):(c=l[n.X]-f/2,u=~~a.getYByValue(l[n.VOLUME],i),h=c+f,d=m,s.isPointInRect(v,b,c,u,h,d))},ColumnChartRenderer.prototype.calcRangeY=function(){var e=this._plotModel.getVisibleBars();if(!e.length)return null;var t={max:-Number.MAX_VALUE,min:Number.MAX_VALUE};return e.reduce(function(e,t){var r=t;return r[n.VOLUME]>e.max&&(e.max=r[n.VOLUME]),r[n.VOLUME]<e.min&&(e.min=r[n.VOLUME]),e},t)},ColumnChartRenderer.prototype.draw=function(e){var t=this._plotModel,r=t.getVisibleBars();if(r.length){var o,a,i,s,l=t.graph,c=l.chart,u=c.axisY,h=c.height,d=~~c.axisX.barWidth,p=l.isPrice?u.range:l.getRangeY(),f=this.style,m=u.margin,_=f.scale||1,y=f.histogramBase,g=0,v=0;e.lineWidth=1,e.globalAlpha=f.opacity,e.strokeStyle="black",e.translate(.5,.5),e.beginPath();for(var b=0,E=r.length;b<E;b++)s=r[b],o=~~s[n.X]-~~(d/2),i=~~u.getYByValue(s[n.VOLUME],p),"number"==typeof y?(a=i,i=~~u.getYByValue(y,p),e.fillStyle=a-i>0?f.colorDown:f.color,g>0?(e.fillRect(g,a,d+o-g,i-a),e.moveTo(g,v),e.lineTo(g,a)):(e.fillRect(o,a,d,i-a),e.moveTo(o,i),e.lineTo(o,a)),e.lineTo(o+d,a),e.lineTo(o+d,i)):"number"==typeof f.scale?(e.fillStyle=s[n.IS_DOWN]?f.colorDown:f.color,a=~~(h-(h-i-m)*_),g>0?(e.fillRect(g,a,d+o-g,h-a),e.moveTo(g,v),e.lineTo(g,a)):(e.fillRect(o,a,d,h-a),e.moveTo(o,h),e.lineTo(o,a)),e.lineTo(o+d,a),e.lineTo(o+d,h)):(e.fillStyle=s[n.IS_DOWN]?f.colorDown:f.color,a=i,g>0?(e.fillRect(g,a,d+o-g,h-a),e.moveTo(g,v),e.lineTo(g,a)):(e.fillRect(o,a,d,h-a),e.moveTo(o,h),e.lineTo(o,a)),e.lineTo(o+d,a),e.lineTo(o+d,h)),g=o+d,v=a;e.stroke()}},ColumnChartRenderer.prototype.getSelectionYByBar=function(e){var t=this._plotModel,r=t.graph,o=r.chart,a=o.axisY,i=o.height,s=r.isPrice?a.range:r.getRangeY(),l=a.margin,c=this.style,u=c.scale||1;return"number"==typeof c.histogramBase?~~a.getYByValue(e[n.VOLUME],s):"number"==typeof c.scale?~~(i-(i-~~a.getYByValue(e[n.VOLUME],s)-l)*u):~~a.getYByValue(e[n.VOLUME],s)},ColumnChartRenderer}(i.BaseChartRenderer);t.ColumnChartRenderer=c},"6HmF":function(e,t){},"7B1/":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("W60S"),r("Vq7t");var n=r("U7vG"),a=r("rdLu"),i=r("YSPl"),s=r("+vTI"),l=r("04Un"),c=r("n1sv"),u=r("QKig"),h=r("rBAp"),d=r("41LM"),p=r("NBiX"),f=function(e){function Navbar(t,r){var o=e.call(this,t,r)||this;return o._chartLayout=r.chartLayout,o.updateView=o.updateView.bind(o),o.onShowAbout=o.onShowAbout.bind(o),o.onShowNewest=o.onShowNewest.bind(o),o}return o(Navbar,e),Navbar.prototype.shouldComponentUpdate=function(e){return!a.isEqual(this.props,e)},Navbar.prototype.componentDidMount=function(){var e=this._chartLayout;e.addListener("resolution_change",this.updateView),e.addListener("symbol_change",this.updateView)},Navbar.prototype.componentWillUnmount=function(){var e=this._chartLayout;e.removeListener("resolution_change",this.updateView),e.removeListener("symbol_change",this.updateView)},Navbar.prototype.render=function(){var e=this._chartLayout,t=e.mainDatasource.resolution;return n.createElement("div",{className:"chart-navbar",style:{width:this.props.width+"px"}},n.createElement(s.default,{className:"chart-navbar-search",autofill:!0,onSelect:this.props.onSymbolChange}),n.createElement(i.default,{onResolutionChange:this.props.onResolutionChange}),n.createElement(u.default,{onFullScreen:this.props.onFullScreen}),n.createElement(l.default,{onAddComparison:this.props.onAddComparison,onRemoveComparison:this.props.onRemoveComparison}),n.createElement(c.default,{onAddStudy:this.props.onAddStudy}),t>"1"?n.createElement(d.default,{onStudyModified:this.props.onStudyModified}):null,"stock"===e.mainDatasource.symbolInfo.type?n.createElement(h.default,{onRightChange:this.props.onRightChange}):null,n.createElement("button",{className:"about btn",onClick:this.onShowAbout},"关于"),n.createElement("button",{className:"newest btn",onClick:this.onShowNewest},"最新功能"))},Navbar.prototype.onShowAbout=function(){this._chartLayout.toggleAbout(!0)},Navbar.prototype.onShowNewest=function(){this._chartLayout.showAnalysisSidebarTab()},Navbar.prototype.updateView=function(){this.forceUpdate()},Navbar.contextTypes={chartLayout:n.PropTypes.instanceOf(p.default)},Navbar}(n.Component);t.default=f},"7Oqy":function(e,t){},"85aO":function(e,t){},"8JFl":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("DsaQ");var n=r("U7vG"),a=r("rdLu"),i=function(e){function CapitalBarChart(){return null!==e&&e.apply(this,arguments)||this}return o(CapitalBarChart,e),CapitalBarChart.prototype.shouldComponentUpdate=function(e){return!a.isEqual(this.props,e)},CapitalBarChart.prototype.render=function(){var e=this.props.data,t=this.props.width,r=this.props.height,o=t/5,a=.4*o,i=Math.max.apply(Math,e),s=Math.min.apply(Math,e),l=i-s,c=[o/2,o/2*3,o/2*5,o/2*7,o/2*9],u=i>0?(r-40)*i/l:20;return n.createElement("div",{className:"chart-capital-flow-bar-chart"},n.createElement("h3",null,"最近5日主力流入"),n.createElement("svg",{width:t,height:r},n.createElement("g",{transform:"translate(0, "+u.toFixed(2)+")"},n.createElement("line",{x1:0,y1:0,x2:t,y2:0,stroke:"#999"}),c.map(function(t,o){return n.createElement("rect",{key:o,x:t-a/2,y:e[o]>0?-r*e[o]/l:0,width:a,height:Math.abs(r*e[o]/l),fill:e[o]>0?"#ff524f":"#15af3d"})}),c.map(function(t,r){return n.createElement("text",{key:r,x:t+"px",y:(e[r]>0?16:-8)+"px",fill:e[r]>0?"#ff524f":"#15af3d",textAnchor:"middle"},~~(e[r]+.5))}))))},CapitalBarChart}(n.Component);t.default=i},"9FmA":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("BzvE"),a=function(e){function Datasource(t,r){void 0===r&&(r=0);var o=e.call(this)||this;return o._hasMoreHistory=!0,o._pulseInterval=60,o._resolution=t,o._timeDiff=r,o}return o(Datasource,e),Object.defineProperty(Datasource.prototype,"timeDiff",{get:function(){return this._timeDiff},set:function(e){this._timeDiff=e},enumerable:!0,configurable:!0}),Object.defineProperty(Datasource.prototype,"pulseInterval",{get:function(){return this._pulseInterval},enumerable:!0,configurable:!0}),Object.defineProperty(Datasource.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e},enumerable:!0,configurable:!0}),Datasource.prototype.clearCache=function(){this._hasMoreHistory=!0},Datasource.prototype.now=function(){return~~(Date.now()/1e3)-this._timeDiff},Object.defineProperty(Datasource.prototype,"hasMoreHistory",{get:function(){return this._hasMoreHistory},enumerable:!0,configurable:!0}),Datasource}(n);t.Datasource=a},ALsY:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("U7vG"),a=function(e){function AxisY(){var t=e.call(this)||this;return t._dragMarginStart=!1,t.downHandler=t.downHandler.bind(t),t.mouseMoveHandler=t.mouseMoveHandler.bind(t),t.mouseUpHandler=t.mouseUpHandler.bind(t),t}return o(AxisY,e),AxisY.prototype.componentDidMount=function(){var e=this.props.axis;e.ctx=this.refs.canvas.getContext("2d"),e.width=this.props.width,e.height=this.props.height,document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("touchmove",this.mouseMoveHandler),document.addEventListener("mouseup",this.mouseUpHandler),document.addEventListener("touchend",this.mouseUpHandler)},AxisY.prototype.componentWillUnmount=function(){document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("touchmove",this.mouseMoveHandler),document.removeEventListener("mouseup",this.mouseUpHandler),document.removeEventListener("touchend",this.mouseUpHandler)},AxisY.prototype.componentDidUpdate=function(){var e=this.props.axis,t=this.props.width,r=this.props.height,o=this.refs.canvas;e.width=t,e.height=r,o.width=t,o.height=r,o.getContext("2d")},AxisY.prototype.shouldComponentUpdate=function(e){var t=this.props;return t.width!==e.width||t.height!==e.height},AxisY.prototype.render=function(){var e=this.props.width,t=this.props.height;return n.createElement("div",{className:"chart-axisy",style:{height:t+"px",width:e+"px"}},n.createElement("canvas",{ref:"canvas",width:e,height:t,onMouseDown:this.downHandler,onTouchStart:this.downHandler}))},AxisY.prototype.downHandler=function(e){e.touches?(e.preventDefault(),1===e.touches.length&&(this._dragPosY=e.touches[0].pageY,this._dragMarginStart=!0)):(this._dragPosY=e.pageY,this._dragMarginStart=!0)},AxisY.prototype.mouseMoveHandler=function(e){if(this._dragMarginStart){var t=e.changedTouches?e.changedTouches[0].pageY:e.pageY,r=t-this._dragPosY,o=this.props.axis,n=o.margin,a=o.height,i=a-2*n,s=2*r/a;o.margin=(a-i*(1+s))/2,this._dragPosY=t}},AxisY.prototype.mouseUpHandler=function(){this._dragMarginStart=!1},AxisY}(n.Component);t.default=a},C1Kg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("rdLu"),n=r("wRi7"),a=function(){function YTickMark(e){this._axisY=e}return YTickMark.prototype.clearTickmarks=function(){this._tickmarks=null},YTickMark.prototype.getTickMarksByTimeBars=function(){if(this._tickmarks)return this._tickmarks;var e=[],t=this._axisY;if(!t.range)return e;var r=t.range.min,n=t.range.max;if(!o.isFinite(r)||!o.isFinite(n))return e;r===n&&(n+=.1);var a=t.chart.height,i=n-r,s=i*a/(a-2*t.margin),l=(s-i)/2;r-=l,n+=l;var c=this.normalizeTickSpan(s/(a/30));for(r-=r%c;r<=n;)e.push({value:r,y:t.getYByValue(r)}),r+=c;return this._tickmarks=e,e},YTickMark.prototype.normalizeTickSpan=function(e){var t=e+"",r=0,o=[];e=+t;for(var a=0,i=t.length,s=void 0;a<i;a++)if("."===(s=t[a]))o.push(s);else{if(0!==(s=+s)){if(s<5){if(s<3){o.push(s+1);break}o.push(5);break}a-1>=0?("."===o[a-1]?o[a-2]+=1:o[a-1]+=1,o.push(0)):(o.push(1),o.push(0),r=1);break}o.push(s)}for(var l=+o.join(""),c=1;e>=10;)c++,e/=10;return l<1/Math.pow(10,2)&&(l=1/Math.pow(10,2)),+n.padRight(l+"",c+r)},YTickMark}();t.default=a},CPKi:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("U7vG"),a=r("NBiX"),i=function(e){function Provider(t,r){var o=e.call(this,t,r)||this;return o.chartLayout=t.chartLayout,o}return o(Provider,e),Provider.prototype.getChildContext=function(){return{chartLayout:this.chartLayout}},Provider.prototype.render=function(){return n.Children.only(this.props.children)},Provider.childContextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},Provider}(n.Component);t.default=i},Ck02:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n,a=r("rdLu"),i=r("Lv/5");!function(e){e[e.X=0]="X",e[e.TIME=1]="TIME",e[e.UP=2]="UP",e[e.DOWN=3]="DOWN"}(n||(n={}));var s={color:"#000080",opacity:.3},l=function(e){function BandRenderer(t,r){return e.call(this,t,a.defaults(r,s))||this}return o(BandRenderer,e),BandRenderer.prototype.hitTest=function(){return!1},BandRenderer.prototype.draw=function(e){var t=this._plotModel,r=t.getVisibleBars();if(r.length){var o=t.graph,a=o.chart,i=a.axisY,s=o.isPrice?i.range:o.getRangeY();e.globalAlpha=this.style.opacity,e.fillStyle=this.style.color,e.beginPath();var l=r.length;if(l){var c=r[0];e.moveTo(c[n.X],i.getYByValue(c[n.UP],s))}for(var u=1;u<l;u++){var c=r[u];e.lineTo(c[n.X],i.getYByValue(c[n.UP],s))}for(var u=l-1;u>=0;u--){var c=r[u];e.lineTo(c[n.X],i.getYByValue(c[n.DOWN],s))}e.closePath(),e.fill()}},BandRenderer.prototype.calcRangeY=function(){var e=this._plotModel.getVisibleBars();if(!e.length)return null;var t={max:-Number.MAX_VALUE,min:Number.MAX_VALUE};return e.reduce(function(e,t){var r=t;return r[n.UP]<e.min&&(e.min=r[n.UP]),r[n.DOWN]>e.max&&(e.max=r[n.DOWN]),e},t)},BandRenderer.prototype.getSelectionYByBar=function(e){return null},BandRenderer}(i.BaseChartRenderer);t.BandRenderer=l},Cqed:function(e,t,r){"use strict";function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),__export(r("bYF0")),__export(r("uYdA"))},DsaQ:function(e,t){},EL4d:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("6HmF");var n=r("U7vG"),a=r("rdLu"),i=["散户流入","主力流入","主力流出","散户流出"],s=["#ff524f","#ff7d42","#68ce3c","#15af3d"],l=function(e){function CapitalDonutChart(){var t=e.call(this)||this;return t.mouseMoveHandler=t.mouseMoveHandler.bind(t),t.mouseLeaveHandler=t.mouseLeaveHandler.bind(t),t}return o(CapitalDonutChart,e),CapitalDonutChart.prototype.shouldComponentUpdate=function(e){return a.isEqual(this.props,e)},CapitalDonutChart.prototype.render=function(){var e=this,t=this.props.data,r=this.props,o=r.width,a=r.height,i=o/2,l=i-5,c=[];c.push("M"+-l+",0"),c.push("A"+l+","+l+",0,0,1,"+l+",0"),l=i-65,c.push("L"+l+",0"),c.push("A"+l+","+l+",0,0,0,"+-l+",0Z");var u=this.getSectors(t,i),h=this.getLabels(t,i),d=~~(t[1]-t[2]+.5);return n.createElement("div",{className:"chart-capital-flow-donut"},n.createElement("p",null,"单位：万元"),n.createElement("div",{className:"legend clearfix"},n.createElement("div",{className:"color-desc-1"},n.createElement("div",{className:"color-block"}),n.createElement("p",null,"散户流入")),n.createElement("div",{className:"color-desc-2"},n.createElement("div",{className:"color-block"}),n.createElement("p",null,"主力流入")),n.createElement("div",{className:"color-desc-4"},n.createElement("div",{className:"color-block"}),n.createElement("p",null,"散户流出")),n.createElement("div",{className:"color-desc-3"},n.createElement("div",{className:"color-block"}),n.createElement("p",null,"主力流出"))),n.createElement("svg",{width:o,height:a},n.createElement("g",{transform:"translate("+i+","+a+")"},n.createElement("path",{fill:"#f1f3f6",d:c.join("")}),u.map(function(t,r){var o=h[r];return n.createElement("g",{key:r,className:"sector",onMouseMove:e.mouseMoveHandler(r),onMouseLeave:e.mouseLeaveHandler},n.createElement("path",{fill:s[r],d:t}),parseInt(o.text)>5?n.createElement("text",{x:o.x,y:o.y,fontSize:12,textAnchor:"middle",fill:"#fff"},o.text):null)}),n.createElement("text",{x:0,y:-32,textAnchor:"middle",fontSize:14,fill:"#999999"},"主力资金"),n.createElement("text",{x:0,y:-6,textAnchor:"middle",fontSize:26,fill:d>0?"#ff524f":"#15af3d"},d>0?"+"+d:d))),n.createElement("div",{className:"clearfix"},n.createElement("p",{className:"capital-in"},"流入",n.createElement("i",{className:"capital-in-num"},t?~~(t[1]+.5):"N/A")),n.createElement("p",{className:"capital-out"},"流出",n.createElement("i",{className:"capital-out-num"},t?~~(t[2]+.5):"N/A"))))},CapitalDonutChart.prototype.getSectors=function(e,t){for(var r,o,n,a=e.reduce(function(e,t){return e+t},0),i=[],s=t-10,l=t-60,c=0,u=0,h=0;h<4;h++)n=[],u=c,c+=e[h]/a*Math.PI,r=(-Math.cos(u)*s).toFixed(2),o=(-Math.sin(u)*s).toFixed(2),n.push("M"+r+","+o),r=(-Math.cos(c)*s).toFixed(2),o=(-Math.sin(c)*s).toFixed(2),n.push("A"+s+","+s+",0,0,1,"+r+","+o),r=(-Math.cos(c)*l).toFixed(2),o=(-Math.sin(c)*l).toFixed(2),n.push("L"+r+","+o),r=(-Math.cos(u)*l).toFixed(2),o=(-Math.sin(u)*l).toFixed(2),n.push("A"+l+","+l+",0,0,0,"+r+","+o+"Z"),i.push(n.join(""));return i},CapitalDonutChart.prototype.getLabels=function(e,t){for(var r,o,n,a=e.reduce(function(e,t){return e+t},0),i=[],s=t-35,l=0,c=0,u=0;u<4;u++)r=~~(e[u]/a*100+.5)+"%",l=e[u]/a*Math.PI,o=(-Math.cos(c+l/2)*s).toFixed(2),n=(-Math.sin(c+l/2)*s+6).toFixed(2),i.push({text:r,x:o,y:n}),c+=l;return i},CapitalDonutChart.prototype.mouseMoveHandler=function(e){return function(t){this.props.onSectorMouseMove&&this.props.onSectorMouseMove({pageX:t.pageX,pageY:t.pageY,label:i[e],color:s[e],value:~~(this.props.data[e]+.5)})}.bind(this)},CapitalDonutChart.prototype.mouseLeaveHandler=function(){this.props.onSectorMouseLeave&&this.props.onSectorMouseLeave()},CapitalDonutChart}(n.Component);t.default=l},EVIZ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function BasePatternRenderer(e){this._chart=e}return BasePatternRenderer}();t.BasePatternRenderer=o},FHs6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("wRi7"),n=function(){function XTickMark(e){this._axis=e}return XTickMark.prototype.clearTickmarks=function(){this._tickmarks=null},XTickMark.prototype.getTickMarksByTimeBars=function(e){if(this._tickmarks)return this._tickmarks;var t=[];if(!e.length)return t;var r=this._axis.datasource.resolution,n=this._axis.barWidth,a="1";switch(r){case"1":a=n>=50?"1":5*n>=50?"5":10*n>=50?"10":15*n>=50?"15":30*n>=50?"30":60*n>=50?"60":24*n*60>=50?"D":30*n*24*60>=50?"M":"Y";break;case"5":a=n>=50?"5":6*n>=50?"30":12*n>=50?"60":24*n*12>=50?"D":30*n*24*12>=50?"M":"Y";break;case"15":a=n>=50?"15":2*n>=50?"30":4*n>=50?"60":24*n*60/15>=50?"D":30*n*24*60/15>=50?"M":"Y";break;case"30":a=n>=50?"30":2*n>=50?"60":24*n*2>=50?"D":30*n*24*2>=50?"M":"Y";break;case"60":a=n>=50?"60":24*n>=50?"D":30*n*24>=50?"M":"Y";break;case"D":a=n>=50?"D":30*n>=50?"M":"Y";break;case"W":a=n>=50?"D":4*n>=50?"M":"Y";break;case"M":a=n>=50?"M":"Y";break;default:throw"unsupported resolution"}for(var i=50,s=1,l=e.length;s<l;s++){var c=e[s],u=function(e){return[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours()]}(new Date(1e3*e[s-1].time)),h=u[0],d=u[1],p=u[2],f=u[3],m=function(e){return[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes()]}(new Date(1e3*e[s].time)),_=m[0],y=m[1],g=m[2],v=m[3],b=m[4];i+=n;var E=t[t.length-1];if(h!==_)i<50&&E.type<"Y"&&(t.pop(),i=50),(a<"Y"||i>=50)&&(t.push({bold:!0,time:_.toString(),type:"Y",x:c.x}),i=0);else if(d!==y)i<50&&E.type<"M"&&(t.pop(),i=50),(a<"M"||i>=50)&&(t.push({bold:!0,time:y+"月",type:"M",x:c.x}),i=0);else if(p!==g)i<50&&E.type<"D"&&(t.pop(),i=50),(a<"D"||i>=50)&&(t.push({bold:!0,time:g.toString(),type:"D",x:c.x}),i=0);else if(f!==v||30===b||b%15==0||b%10==0||b%5==0){var x=1;f!==v?x=60:30===b?x=30:b%15==0?x=15:b%10==0?x=10:b%5==0&&(x=5),i<50&&+E.type<x&&(t.pop(),i=50),i>=50&&(t.push({bold:!1,time:o.pad(v.toString(),2)+":"+o.pad(b.toString(),2),type:x.toString(),x:c.x}),i=0)}}return this._tickmarks=t,t},XTickMark}();t.default=n},Fi2k:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("un2I"),r("Vq7t");var n=r("U7vG"),a=r("rdLu"),i=r("NBiX"),s=r("wRi7"),l=function(e){function Legend(t){var r=e.call(this)||this;return r._studyInSetting=null,r.state={showSettingDialog:!1},r.cursorMoveHandler=r.cursorMoveHandler.bind(r),r.studySettingsDialogOpenHandler=r.studySettingsDialogOpenHandler.bind(r),r.studySettingDialogCloseHanlder=r.studySettingDialogCloseHanlder.bind(r),r.removeStudyHandler=r.removeStudyHandler.bind(r),r.removeCompareHandler=r.removeCompareHandler.bind(r),r.confirmBtnClickHanler=r.confirmBtnClickHanler.bind(r),r.privateSubmitForm=r.privateSubmitForm.bind(r),r.updateView=r.updateView.bind(r),r}return o(Legend,e),Legend.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.state,t)},Legend.prototype.componentDidMount=function(){var e=this.context.chartLayout;e.addListener("cursor_move",this.cursorMoveHandler),e.addListener("graph_hover",this.updateView),e.addListener("graph_select",this.updateView),e.addListener("resolution_change",this.updateView),e.addListener("symbol_change",this.updateView),e.addListener("graph_add",this.updateView),e.addListener("graph_remove",this.updateView),e.addListener("graph_modify",this.updateView)},Legend.prototype.componentWillUnmount=function(){var e=this.context.chartLayout;e.removeListener("cursor_move",this.cursorMoveHandler),e.removeListener("graph_hover",this.updateView),e.removeListener("graph_select",this.updateView),e.removeListener("resolution_change",this.updateView),e.removeListener("symbol_change",this.updateView),e.removeListener("graph_add",this.updateView),e.removeListener("graph_remove",this.updateView),e.removeListener("graph_modify",this.updateView)},Legend.prototype.render=function(){var e=this,t=this.props.chart,r=t.mainGraph,o=t.compares,a=t.studies,i=a.filter(function(e){return"MA"===e.studyType&&e.isVisible}),l=a.filter(function(e){return"MA"!==e.studyType&&e.isVisible});return n.createElement("div",{className:"chart-legend"},[r].map(function(e){if(!e)return null;var t=e.getCurBar(),r=e.getPrevBar(),o=e.datasource,a=t?o.barAt(o.search(t[0][1])):o.last(),i=t&&r?o.barAt(o.search(r[0][1])):o.barAt(o.loaded()-2),l=!!i&&!!a,c=o.resolution;return n.createElement("div",{key:e.id,className:"chart-legend-line",style:{fontWeight:e.hover||e.selected?600:"normal"}},n.createElement("div",{className:"chart-legend-item"},n.createElement("span",{className:"symbol-name"},o.symbolInfo?o.symbolInfo.description:"加载中"),n.createElement("span",{className:"symbol-code"},o.symbolInfo.symbol,".",o.symbolInfo.exchange)),"1"===c?n.createElement("div",{className:"chart-legend-item",style:{color:a?a.changerate>0?"#d32f2f":a.changerate<0?"#00796b":"inherit":"inherit"}},"现 ",a?a.close.toFixed(2):"N/A"):[n.createElement("div",{key:"open",className:"chart-legend-item",style:{color:l?a.open>i.close?"#d32f2f":a.open<i.close?"#00796b":"inherit":"inherit"}},"开 ",a?a.open.toFixed(2):"N/A"),n.createElement("div",{key:"high",className:"chart-legend-item",style:{color:l?a.high>i.close?"#d32f2f":a.high<i.close?"#00796b":"inherit":"inherit",display:c>"1"?"":"none"}},"高 ",a?a.high.toFixed(2):"N/A"),n.createElement("div",{key:"low",className:"chart-legend-item",style:{color:l?a.low>i.close?"#d32f2f":a.low<i.close?"#00796b":"inherit":"inherit",display:c>"1"?"":"none"}},"低 ",a?a.low.toFixed(2):"N/A"),n.createElement("div",{key:"close",className:"chart-legend-item",style:{color:l?a.close>i.close?"#d32f2f":a.close<i.close?"#00796b":"inherit":"inherit",display:c>"1"?"":"none"}},"收 ",a?a.close.toFixed(2):"N/A")],n.createElement("div",{className:"chart-legend-item",style:{color:a?a.changerate>0?"#d32f2f":a.changerate<0?"#00796b":"inherit":"inherit"}},"幅 ",a&&"number"==typeof a.changerate?(a.changerate>0?"+":"")+(100*a.changerate).toFixed(2)+"%":"N/A"),a&&"string"==typeof a.turnover?n.createElement("div",{className:"chart-legend-item"},"换 ",(100*+a.turnover).toFixed(2)+"%"):null,n.createElement("div",{className:"chart-legend-item"},"量 ",a?s.formatNumber(a.volume,2)+"手":"N/A"),n.createElement("div",{className:"chart-legend-item"},"额 ",a?s.formatNumber(a.amount,2):"N/A"))}),o.map(function(t){var o=t.datasource,a=t.styles[0].color,i=r.getCurBar(),s=i?o.barAt(o.search(i[0][1])):null;return n.createElement("div",{key:t.id,className:"chart-legend-line",style:{fontWeight:t.hover||t.selected?600:"normal"}},n.createElement("div",{className:"chart-legend-item"},o.symbolInfo?o.symbolInfo.description:"加载中"),n.createElement("div",{className:"chart-legend-item",style:{color:a}},s?s.close.toFixed(2):"N/A"),n.createElement("a",{className:"chart-legend-btn",href:"javascript:;","data-id":t.id,onClick:e.removeCompareHandler},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2.4 120.9 14 14",width:"14",height:"14"},n.createElement("path",{d:"M-2.4 120.9v14h14v-14zm3.34 2.123l3.66 3.66 3.66-3.66 1.217 1.22-3.66 3.658 3.66 3.66-1.22 1.22-3.658-3.66-3.66 3.66-1.22-1.22 3.66-3.66-3.66-3.66z"}))))}),i.length?n.createElement("div",{className:"chart-legend-line"},i.map(function(e){var t=e.getCurBar(),r=t?t[0]:null,o=e.styles;return n.createElement("div",{key:e.id,className:"chart-legend-item",style:{color:o[0].color,fontWeight:e.hover||e.selected?600:"normal"}},e.studyType,e.input?e.input[0]:null,": ",r?r[2].toFixed(2):"N/A")})):null,l.map(function(t){if(!t.noLegend){var r=t.getCurBar();return n.createElement("div",{key:t.id,className:"chart-legend-line",style:{fontWeight:t.hover||t.selected?600:"normal"}},n.createElement("div",{className:"chart-legend-item"},t.studyType,t.input?"("+t.input.join(",")+")":""),t.plots.map(function(e,o){return t.styles[o].noLegend?null:n.createElement("div",{key:o,className:"chart-legend-item",style:{color:t.styles[o].color}},r&&r[o]&&r[o][2]?r[o][2].toFixed(4):"N/A")}),t.isRemovable?n.createElement("a",{className:"chart-legend-btn",href:"javascript:;","data-id":t.id,onClick:e.removeStudyHandler},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2.4 120.9 14 14",width:"14",height:"14"},n.createElement("path",{d:"M-2.4 120.9v14h14v-14zm3.34 2.123l3.66 3.66 3.66-3.66 1.217 1.22-3.66 3.658 3.66 3.66-1.22 1.22-3.658-3.66-3.66 3.66-1.22-1.22 3.66-3.66-3.66-3.66z"}))):null)}}))},Legend.prototype.studySettingsDialogOpenHandler=function(e){this._studyInSetting=a.findWhere(this.props.chart.studies,{id:+e.currentTarget.dataset.id}),this.setState({showSettingDialog:!0})},Legend.prototype.studySettingDialogCloseHanlder=function(){this._studyInSetting=null,this.setState({showSettingDialog:!1})},Legend.prototype.confirmBtnClickHanler=function(){var e=this.refs.settingForm,t=this._studyInSetting.input.map(function(t,r){return"INPUT"===e[r].tagName.toUpperCase()?+e[r].value:Boolean(e[r].value)});this.context.chartLayout.modifyGraph(this._studyInSetting,{input:t}),this.studySettingDialogCloseHanlder()},Legend.prototype.removeStudyHandler=function(e){var t=+e.currentTarget.dataset.id;this.context.chartLayout.removeStudy(this.props.chart,t)},Legend.prototype.removeCompareHandler=function(e){var t=+e.currentTarget.dataset.id;this.context.chartLayout.removeComparison(t)},Legend.prototype.cursorMoveHandler=function(e){e&&this.forceUpdate()},Legend.prototype.updateView=function(){this.forceUpdate()},Legend.prototype.privateSubmitForm=function(e){e.preventDefault()},Legend.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},Legend}(n.Component);t.default=l},FutI:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("oJNF"),a=r("Cqed"),i=r("wRi7"),s=function(e){function TrendLineToolRenderer(){return null!==e&&e.apply(this,arguments)||this}return o(TrendLineToolRenderer,e),TrendLineToolRenderer.prototype.drawTool=function(e){var t,r,o=this._chart,n=o.axisX,a=o.axisY,i=this.getCursor(),s=this._vertexes[0],l=this._vertexes[1];e.strokeStyle="#000",e.lineWidth=1,e.beginPath(),this.isFinished()?(t=~~n.getXByTime(s.time),r=~~a.getYByValue(s.value),e.moveTo(t,r),t=~~n.getXByTime(l.time),r=~~a.getYByValue(l.value),e.lineTo(t,r)):(t=~~n.getXByTime(s.time),r=~~a.getYByValue(s.value),e.moveTo(t,r),e.lineTo(~~i.x,~~i.y)),e.stroke()},TrendLineToolRenderer.prototype.hitTestTool=function(){var e=this._chart,t=e.axisX,r=e.axisY,o=e.crosshair.point,n=this._vertexes[0],s=this._vertexes[1],l=o.x,c=o.y,u=t.getXByTime(n.time),h=r.getYByValue(n.value),d=t.getXByTime(s.time),p=r.getYByValue(s.value);return i.pointToSegDist(l,c,u,h,d,p)<a.HIT_TEST_TOLERANCE},TrendLineToolRenderer.prototype.isFinished=function(){return 2===this._vertexes.length},TrendLineToolRenderer}(n.BaseToolRenderer);t.TrendLineToolRenderer=s},G0ps:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("oJNF"),a=r("Cqed"),i=r("wRi7"),s=function(e){function HorzLineRenderer(){return null!==e&&e.apply(this,arguments)||this}return o(HorzLineRenderer,e),HorzLineRenderer.prototype.isNowVisible=function(){var e=this._chart.axisY,t=this._vertexes[0];return t.value>e.minVal&&t.value<e.maxVal},Object.defineProperty(HorzLineRenderer.prototype,"vertexes",{get:function(){var e=this._chart.axisX;return this._vertexes.map(function(t){return{time:e.findTimeBarByX(e.width/2).time,value:t.value}})},enumerable:!0,configurable:!0}),HorzLineRenderer.prototype.drawTool=function(e){var t=this._chart,r=t.axisY,o=this._vertexes[0],n=~~r.getYByValue(o.value);e.strokeStyle="#000",e.lineWidth=1,e.translate(0,.5),e.beginPath(),e.moveTo(0,n),e.lineTo(t.width,n),e.stroke()},HorzLineRenderer.prototype.hitTestTool=function(){var e=this._chart,t=e.axisY,r=this.getCursor(),o=this._vertexes[0],n=r.x,s=r.y,l=e.width,c=t.getYByValue(o.value);return i.pointToSegDist(n,s,0,c,l,c)<a.HIT_TEST_TOLERANCE},HorzLineRenderer.prototype.isFinished=function(){return 1===this._vertexes.length},HorzLineRenderer}(n.BaseToolRenderer);t.HorzLineRenderer=s},GKYn:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("HCHE");var n=r("U7vG"),a=r("rdLu"),i=r("bHfy"),s=r("NBiX"),l=function(e){function Analyze(t,r){var o=e.call(this,t,r)||this,n=r.chartLayout;return o._chartLayout=n,o.state={showMA:!!n.readFromLS("chart.forceMA"),showPressureSupport:!!n.readFromLS("chart.showPressureSupport"),showGap:!!n.readFromLS("chart.showGap"),showWaveForm:!!n.readFromLS("chart.showWaveForm"),showReverseRelay:!!n.readFromLS("chart.showReverseRelay"),showInflection:!!n.readFromLS("chart.showInflection")},o.toggleHandler=o.toggleHandler.bind(o),o}return o(Analyze,e),Analyze.prototype.componentDidMount=function(){this._scroller=new i(this.refs.scrollWrapper,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0})},Analyze.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.props,e)||!a.isEqual(this.state,t)},Analyze.prototype.render=function(){var e,t,r,o=this.props,a=o.stockInfo,i=o.analysisData,s=i?i.pressureInfo:null,l=i?i.gapInfo:null,c=this.state,u=c.showMA,h=c.showGap,d=c.showPressureSupport,p=c.showWaveForm,f=c.showReverseRelay,m=c.showInflection;return l&&a&&(r=+a.price,e=l.l1>l.l2?l.l2:l.l1,t=l.l1>l.l2?l.l1:l.l2,"up"in l||(l.up=r>e),l.up?r<=e?(i.gapInfo=null,l=null):r<t&&(t=r):r>=t?(i.gapInfo=null,l=null):r>e&&(e=r),l&&(l.l1=e,l.l2=t)),n.createElement("div",{className:"chart-analyze",ref:"scrollWrapper",style:{height:this.props.height+"px"}},n.createElement("div",null,n.createElement("h3",null,"分析功能"),n.createElement("div",{className:"feature-group ma clearfix"},n.createElement("div",{className:"description"},"分析时强制显示均线"),n.createElement("a",{href:"javascript:;",className:"toggle-btn "+(u?"on":""),"data-type":"ma",onClick:this.toggleHandler},n.createElement("div",{className:"toggle-tips"},"在左侧图中展示"))),n.createElement("div",{className:"feature-group inflection clearfix"},n.createElement("div",{className:"description"},"显示拐点"),n.createElement("a",{href:"javascript:;",className:"toggle-btn "+(m?"on":""),"data-type":"inflection",onClick:this.toggleHandler},n.createElement("div",{className:"toggle-tips"},"在左侧图中展示"))),n.createElement("h4",null,"支撑与压力"),n.createElement("div",{className:"feature-group support-pressure clearfix"},n.createElement("div",{className:"description"},n.createElement("div",{className:"pressure"},n.createElement("label",null,"压力："),n.createElement("span",null,s&&s.upper_price?(+s.upper_price).toFixed(2):"--")),n.createElement("hr",null),n.createElement("div",{className:"support"},n.createElement("label",null,"支撑："),n.createElement("span",null,s&&s.upper_price?(+s.lower_price).toFixed(2):"--"))),n.createElement("a",{href:"javascript:;",className:"toggle-btn "+(d?"on":""),"data-type":"pressure-support",onClick:this.toggleHandler},n.createElement("div",{className:"toggle-tips"},"在左侧图中展示"))),n.createElement("h4",null,"跳空与缺口"),n.createElement("div",{className:"feature-group gap clearfix"},n.createElement("div",{className:"description"},l&&a?n.createElement("p",null,n.createElement("label",null,l.dt),"  ",n.createElement("span",{className:l.up?"positive":"negative"},e,"-",t)):n.createElement("p",null,"--"),l&&a?n.createElement("p",{className:"position"},"当前价格位于缺口",l.up?"上方":"下方"):null),n.createElement("a",{href:"javascript:;",className:"toggle-btn "+(h?"on":""),"data-type":"gap",onClick:this.toggleHandler},n.createElement("div",{className:"toggle-tips"},"在左侧图中展示"))),n.createElement("h4",null,"形态技术分析"),n.createElement("div",{className:"feature-group form-analyze clearfix"},n.createElement("div",{className:"description"},n.createElement("p",{className:"form-title"},"波浪形态"),n.createElement("p",null,"根据艾略特波段理论自动构建的形态，方便确定当前的波浪")),n.createElement("a",{href:"javascript:;",className:"toggle-btn "+(p?"on":""),"data-type":"wave-form",onClick:this.toggleHandler},n.createElement("div",{className:"toggle-tips"},"在左侧图中展示"))),n.createElement("hr",null),n.createElement("div",{className:"feature-group form-analyze clearfix"},n.createElement("div",{className:"description"},n.createElement("p",{className:"form-title"},"反转、中继形态"),n.createElement("p",null,"自动构建常见的形态，如头肩顶，W底，上升三角形等")),n.createElement("a",{href:"javascript:;",className:"toggle-btn "+(f?"on":""),"data-type":"reverse-relay-form",onClick:this.toggleHandler},n.createElement("div",{className:"toggle-tips"},"在左侧图中展示")))))},Analyze.prototype.toggleHandler=function(e){var t=this._chartLayout,r=e.currentTarget.dataset.type,o=!1,n=null;switch(r){case"ma":o=!this.state.showMA,t.saveToLS("chart.forceMA",o),o?"D"===t.mainDatasource.resolution&&t.maProps.forEach(function(e,r){return t.modifyGraph(t.maStudies[r],{isVisible:e.isVisible})}):(this.state.showWaveForm||this.state.showReverseRelay)&&"D"===t.mainDatasource.resolution&&t.maStudies.forEach(function(e){return t.modifyGraph(e,{isVisible:!1})}),this.setState({showMA:o});break;case"inflection":o=!this.state.showInflection,t.saveToLS("chart.showInflection",o),n=t.mainChart.studies.filter(function(e){return"inflection"===e.studyType||"inflection2"===e.studyType}),n.length?(t.removeStudy(t.mainChart,n[0].id),t.removeStudy(t.mainChart,n[1].id)):(t.addStudy("inflection"),t.addStudy("inflection2")),this.setState({showInflection:o});break;case"pressure-support":o=!this.state.showPressureSupport,t.saveToLS("chart.showPressureSupport",o),n=t.mainChart.studies.filter(function(e){return"压力支撑"===e.studyType})[0],n?t.removeStudy(t.mainChart,n.id):t.addStudy("压力支撑"),this.setState({showPressureSupport:o});break;case"gap":o=!this.state.showGap,t.setGapVisibility(o),this.setState({showGap:o});break;case"wave-form":o=!this.state.showWaveForm,t.setWaveVisibility(o),this.setState({showWaveForm:o});break;case"reverse-relay-form":o=!this.state.showReverseRelay,t.setReverseRelayVisibility(o),this.setState({showReverseRelay:o})}},Analyze.contextTypes={chartLayout:n.PropTypes.instanceOf(s.default)},Analyze}(n.Component);t.default=l},GYzC:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("Ww5v");var n=r("U7vG"),a=r("orX9"),i=r("rdLu"),s=r("wRi7"),l=function(e){function ColorPicker(){var t=e.call(this)||this;return t.state={showColorPicker:!1},t.openColorPickerHandler=t.openColorPickerHandler.bind(t),t.colorChangeHandler=t.colorChangeHandler.bind(t),t.clickOutsideHandler=t.clickOutsideHandler.bind(t),t}return o(ColorPicker,e),ColorPicker.prototype.shouldComponentUpdate=function(e,t){return!i.isEqual(this.props,e)||!i.isEqual(this.state,t)},ColorPicker.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.clickOutsideHandler),document.addEventListener("touchstart",this.clickOutsideHandler)},ColorPicker.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.clickOutsideHandler),document.removeEventListener("touchstart",this.clickOutsideHandler)},ColorPicker.prototype.render=function(){var e=this.state.color||this.props.defaultColor;return n.createElement("div",null,n.createElement("div",{className:"chart-color-picker"},n.createElement("span",{className:"chart-color-picker-btn",style:{backgroundColor:e,border:"1px solid "+s.darkenRGB(e)},onClick:this.openColorPickerHandler}),this.state.showColorPicker?n.createElement("div",{ref:"container",className:"chart-color-picker-positioning"},n.createElement(a.SketchPicker,{width:"240px",disableAlpha:!0,color:e,presetColors:[],onChangeComplete:this.colorChangeHandler})):null))},ColorPicker.prototype.openColorPickerHandler=function(e){this.setState({showColorPicker:!0})},ColorPicker.prototype.colorChangeHandler=function(e){var t=e.rgb,r="rgb("+t.r+","+t.g+","+t.b+")";this.props.onChangeComplete(r),this.setState({color:r})},ColorPicker.prototype.clickOutsideHandler=function(e){var t=this.refs.container,r=e.target;t&&r!==t&&!t.contains(r)&&this.setState({showColorPicker:!1})},ColorPicker}(n.Component);t.default=l},GawB:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("rdLu"),a=r("UALi"),i=r("PxPp"),s=r("254b"),l={line:function(e){var t=e;return[0,t.time,t.close]},candle:function(e){var t=e;return[0,t.time,t.open,t.close,t.high,t.low]},mountain:function(e){var t=e;return[0,t.time,t.close]},column:function(e){var t=e;return[0,t.time,t.close,t.open>t.close]}},c=function(e){function StockModel(t,r,o,i,c,u,h){var d=e.call(this,t,r,i?99999:1,o,!!c,i,c,!0,h?[h]:null,l[u],function(e){return[e]})||this;return d._plots.push(new a.default(d,0,u,n.extend({},h||{}))),i&&(d._showGap=!!r.chartLayout.readFromLS("chart.showGap"),d._gapRenderer=new s.default(d)),d}return o(StockModel,e),Object.defineProperty(StockModel.prototype,"showGap",{get:function(){return this._showGap},set:function(e){this._showGap!==e&&(this._showGap=e,this._isValid=!1)},enumerable:!0,configurable:!0}),StockModel.prototype.setShape=function(e){this._adapter=l[e]},StockModel.prototype.draw=function(){var t=this._chart.ctx;e.prototype.draw.call(this,t),this._isMain&&this._showGap&&this._datasource.resolution>"1"&&this._gapRenderer.draw(t)},StockModel.prototype.clearCache=function(){e.prototype.clearCache.call(this),this._isMain&&this._gapRenderer.clearCache()},StockModel}(i.default);t.default=c},H9vw:function(e,t,r){"use strict";function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),__export(r("9FmA")),__export(r("RR/l")),__export(r("tc6X")),__export(r("tF+H")),__export(r("MjKS")),__export(r("NIhD")),__export(r("uRx8"))},HCHE:function(e,t){},HG4G:function(e,t){},HJCg:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("WE1R");var n=r("U7vG"),a=r("rdLu"),i=r("NBiX"),s=r("cxcC"),l=[[["chart-tools-crosshair","十字指针"],["chart-tools-pointer","箭头"]],[["chart-tools-trend-line","趋势线"],["chart-tools-trend-angle","角度趋势线"],["chart-tools-vert-line","垂直线"],["chart-tools-horz-line","水平线"]],[["chart-tools-date-range","日期范围"]],[["chart-tools-eraser","删除画线"]]],c=function(e){function ToolBox(t,r){var o=e.call(this,t,r)||this;return o._clickCanceled=!1,o._chartLayout=r.chartLayout,o.resetTool=o.resetTool.bind(o),o.downHandler=o.downHandler.bind(o),o.upHandler=o.upHandler.bind(o),o.moveHandler=o.moveHandler.bind(o),o.selectToolHandler=o.selectToolHandler.bind(o),o.hideMoreTools=o.hideMoreTools.bind(o),o.showMoreTools=o.showMoreTools.bind(o),o.state={selectedIndex:0,selectedIndex2:[0,0,0,0],showMoreTools:!1},o}return o(ToolBox,e),ToolBox.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.state,t)},ToolBox.prototype.componentDidMount=function(){this._chartLayout.addListener("drawingtool_begin",this.resetTool),document.addEventListener("mousedown",this.hideMoreTools),document.addEventListener("touchstart",this.hideMoreTools)},ToolBox.prototype.componentWillUnmount=function(){this._chartLayout.removeListener("drawingtool_begin",this.resetTool),document.removeEventListener("mousedown",this.hideMoreTools),document.removeEventListener("touchstart",this.hideMoreTools)},ToolBox.prototype.render=function(){var e=this;return n.createElement("div",{className:"chart-tools"},n.createElement("ul",{className:"chart-tools-group"},l.map(function(t,r){return n.createElement("li",{key:r,className:e.state.selectedIndex===r?"selected":""},n.createElement("span",{className:"chart-tools-btn"},n.createElement("span",{className:"chart-tools-btn-main "+t[e.state.selectedIndex2[r]][0],title:t[e.state.selectedIndex2[r]][1],"data-index":r,onMouseDown:e.downHandler,onTouchStart:e.downHandler,onMouseUp:e.upHandler,onTouchEnd:e.upHandler,onMouseMove:e.moveHandler,onTouchMove:e.moveHandler}),t.length>1?n.createElement("span",{className:"chart-tools-btn-more","data-index":r,onClick:e.showMoreTools}):null),e.state.showMoreTools&&e.state.showMoreIndex===r?n.createElement("div",{className:"chart-tools-more"},l[r].map(function(t,o){return n.createElement("a",{href:"javascript:;",key:t[0],"data-index1":r,"data-index2":o,onMouseDown:e.selectToolHandler,onTouchStart:e.selectToolHandler},n.createElement("span",{className:t[0]}),t[1])})):null)})))},ToolBox.prototype.downHandler=function(e){var t=this;e.touches&&e.preventDefault();var r=+e.target.dataset.index;this._clickCanceled=!1,l[r].length>1&&(this._longTapDetectTimeout=setTimeout(function(){return t.showMoreTools(r)},300))},ToolBox.prototype.moveHandler=function(){this._clickCanceled=!0,clearInterval(this._longTapDetectTimeout)},ToolBox.prototype.upHandler=function(e){var t=+e.target.dataset.index,r=this.state.selectedIndex2;this.state.showMoreTools||this._clickCanceled||(clearInterval(this._longTapDetectTimeout),this.selectTool(t,r[t],!!e.touches))},ToolBox.prototype.selectToolHandler=function(e){e.touches&&e.preventDefault(),this.selectTool(+e.currentTarget.dataset.index1,+e.currentTarget.dataset.index2,!!e.touches)},ToolBox.prototype.showMoreTools=function(e){this.setState({showMoreIndex:"object"==typeof e?+e.target.dataset.index:e,showMoreTools:!0})},ToolBox.prototype.hideMoreTools=function(e){this.state.showMoreTools&&(e.touches&&e.preventDefault(),this.setState({showMoreTools:!1}))},ToolBox.prototype.selectTool=function(e,t,r){var o=this._chartLayout,n=this.state.selectedIndex2;if(n[e]=t,o.willEraseDrawingTool=!1,0===e){switch(l[e][t][0]){case"chart-tools-crosshair":o.setDefaultCursor("crosshair");break;case"chart-tools-pointer":o.setDefaultCursor("default")}o.isEditMode=!1,this.resetTool()}else e===l.length-1?(o.willEraseDrawingTool=!0,this.setState({selectedIndex:e,showMoreTools:!1}),o.selectedDrawingTool=null,o.isEditMode=!1):(o.selectedDrawingTool=this.getDrawingToolByName(l[e][t][0]),r&&(o.isEditMode=!0),this.setState({selectedIndex:e,selectedIndex2:n,showMoreTools:!1}))},ToolBox.prototype.getDrawingToolByName=function(e){switch(e){case"chart-tools-trend-line":return new s.TrendLineToolRenderer;case"chart-tools-trend-angle":return new s.TrendAngleToolRenderer;case"chart-tools-vert-line":return new s.VertLineRenderer;case"chart-tools-horz-line":return new s.HorzLineRenderer;case"chart-tools-date-range":return new s.DateRangeRenderer(this._chartLayout.mainDatasource);default:throw"Can't find any drawing tool match name "+e}},ToolBox.prototype.resetTool=function(){var e=this._chartLayout;this.setState({selectedIndex:0}),e.willEraseDrawingTool=!1,e.selectedDrawingTool=null},ToolBox.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},ToolBox}(n.Component);t.default=c},HUhp:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("1k0e");var n=r("U7vG"),a=r("bHfy"),i=r("NBiX"),s=r("H9vw"),l=function(e){function MainBoard(t,r){var o=e.call(this,t,r)||this;return o.state={},o._chartLayout=r.chartLayout,o.selectHandler=o.selectHandler.bind(o),o.setSymbolHandler=o.setSymbolHandler.bind(o),o.loadRankList=o.loadRankList.bind(o),o.loadIndexList=o.loadIndexList.bind(o),o}return o(MainBoard,e),MainBoard.prototype.shouldComponentUpdate=function(e,t){var r=this.state;return r.indexes!==t.indexes||r.rising_rank!==t.rising_rank||r.declining_rank!==t.declining_rank},MainBoard.prototype.componentWillReceiveProps=function(e){e.width!==this.props.width&&(this._wrapperScroller.refresh(),this._indexesListScroller.refresh(),this._descListScroller.refresh(),this._ascListScroller.refresh())},MainBoard.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._wrapperScroller=new a(this.refs.wrapper,{scrollbars:!0,hScrollbar:!0,scrollX:!0,scrollY:!1,eventPassthrough:!0,fadeScrollbars:!0}),this._indexesListScroller=new a(this.refs.indexesList,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this._descListScroller=new a(this.refs.descList,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this._ascListScroller=new a(this.refs.ascList,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this.loadIndexList().then(function(){return e.state.indexes?e.loadRankList(e.state.indexes[0].index_id):null})},MainBoard.prototype.componentDidUpdate=function(){this._wrapperScroller.refresh(),this._indexesListScroller.refresh(),this._descListScroller.refresh(),this._ascListScroller.refresh()},MainBoard.prototype.componentWillUnmount=function(){this._isMounted=!1,this._wrapperScroller.destroy(),this._indexesListScroller.destroy(),this._descListScroller.destroy(),this._ascListScroller.destroy(),clearTimeout(this._pollIndexListTimer),clearTimeout(this._pollRankListTimer)},MainBoard.prototype.render=function(){var e=this,t=this.state.indexes,r=this.state.rising_rank,o=this.state.declining_rank;return n.createElement("div",{ref:"wrapper",className:"chart-main-board"},n.createElement("div",{className:"wrapper"},n.createElement("div",{className:"indexes-list"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"38%"},"指数名称"),n.createElement("th",{width:"31%"},"涨跌幅"),n.createElement("th",{width:"31%"},"涨跌点数")))),n.createElement("div",{className:"body",ref:"indexesList"},n.createElement("table",{className:"s-table top-header"},n.createElement("tbody",null,t&&t.map(function(t,r){return n.createElement("tr",{key:r,className:e.state.activeIndexId===t.index_id?"active":"","data-id":t.index_id,onClick:e.selectHandler},n.createElement("td",{width:"38%"},t.name),n.createElement("td",{width:"31%"},(100*t.p_change).toFixed(2),"%"),n.createElement("td",{width:"31%"},(+t.price_change).toFixed(2)))}))))),n.createElement("div",{className:"separator"}),n.createElement("div",{className:"desc-list"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"38%"},"股票名称"),n.createElement("th",{width:"31%"},"最新价"),n.createElement("th",{width:"31%"},"涨跌幅")))),n.createElement("div",{className:"body",ref:"descList"},n.createElement("table",{className:"s-table stripe even top-header"},n.createElement("tbody",null,r&&r.map(function(t,r){return n.createElement("tr",{key:r,"data-symbol":t[0],onClick:e.setSymbolHandler},n.createElement("td",{width:"38%"},t[1]),n.createElement("td",{width:"31%"},(+t[3]).toFixed(2)),n.createElement("td",{width:"31%"},(100*t[2]).toFixed(2),"%"))}))))),n.createElement("div",{className:"separator"}),n.createElement("div",{className:"asc-list"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"38%"},"股票名称"),n.createElement("th",{width:"31%"},"最新价"),n.createElement("th",{width:"31%"},"涨跌幅")))),n.createElement("div",{className:"body",ref:"ascList"},n.createElement("table",{className:"s-table stripe even top-header"},n.createElement("tbody",null,o&&o.map(function(t,r){return n.createElement("tr",{key:r,"data-symbol":t[0],onClick:e.setSymbolHandler},n.createElement("td",{width:"38%"},t[1]),n.createElement("td",{width:"31%"},(+t[3]).toFixed(2)),n.createElement("td",{width:"31%"},(100*t[2]).toFixed(2),"%"))})))))))},MainBoard.prototype.selectHandler=function(e){var t=e.currentTarget.dataset.id;this.loadRankList(t)},MainBoard.prototype.setSymbolHandler=function(e){this.context.chartLayout.setSymbol(e.currentTarget.dataset.symbol)},MainBoard.prototype.loadIndexList=function(){var e=this;return s.getIndexesInfo().then(function(t){if(e._isMounted){var r=1e3*t.data.intver;e.setState({indexes:t.data.list}),e._pollIndexListTimer=r?setTimeout(e.loadIndexList,r):-1}}).catch(function(t){return e._pollIndexListTimer=setTimeout(e.loadIndexList,1e4)})},MainBoard.prototype.loadRankList=function(e){var t=this;clearTimeout(this._pollRankListTimer),s.getStockListByIndexId(e).then(function(r){if(t._isMounted){var o=1e3*r.data.intver;t.setState({activeIndexId:e,rising_rank:r.data.up,declining_rank:r.data.down}),t._pollRankListTimer=o?setTimeout(function(){return t.loadRankList(e)},o):-1}}).catch(function(r){return t._pollRankListTimer=setTimeout(function(){return t.loadRankList(e)},1e4)})},MainBoard.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},MainBoard}(n.Component);t.default=l},Htct:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("rBG8"),r("bpF5");var n=r("U7vG"),a=r("bHfy"),i=function(e){function Financing(){return null!==e&&e.apply(this,arguments)||this}return o(Financing,e),Financing.prototype.componentDidMount=function(){this._financingScroll=new a(this.refs.financing,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0})},Financing.prototype.componentWillUnmount=function(){this._financingScroll.destroy()},Financing.prototype.componentDidUpdate=function(){this._financingScroll.refresh()},Financing.prototype.shouldComponentUpdate=function(e,t){return this.props.financingInfo!==e.financingInfo},Financing.prototype.render=function(){var e=this.props.financingInfo;return e?n.createElement("div",{className:"financing",ref:"financing",style:{height:this.props.height+"px"}},n.createElement("div",null,n.createElement("h3",null,"财务信息"),n.createElement("table",{className:"indexes-display s-table stripe even left-header"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{width:"133"},"每股收益"),n.createElement("td",{width:"134"},e.earning_per_Share,"元")),n.createElement("tr",null,n.createElement("th",null,"净利润"),n.createElement("td",null,e.net_income,"亿元")),n.createElement("tr",null,n.createElement("th",null,"净利润增长率"),n.createElement("td",null,e.net_income_growth_rate,"%")),n.createElement("tr",null,n.createElement("th",null,"营业总收入"),n.createElement("td",null,e.revenue,"亿元")),n.createElement("tr",null,n.createElement("th",null,"总收入增长率"),n.createElement("td",null,e.revenue_growth_rate,"%")),n.createElement("tr",null,n.createElement("th",null,"每股净资产"),n.createElement("td",null,e.book_value_per_share,"元")),n.createElement("tr",null,n.createElement("th",null,"净资产收益率"),n.createElement("td",null,e.return_on_Equity,"%")),n.createElement("tr",null,n.createElement("th",null,"净资产收益率摊薄"),n.createElement("td",null,e.return_on_equity_diluted,"%")),n.createElement("tr",null,n.createElement("th",null,"资产负债比率"),n.createElement("td",null,e.asset_liability_ratio,"%")),n.createElement("tr",null,n.createElement("th",null,"每股资本公积金"),n.createElement("td",null,e.capital_surplus_per_share,"元")),n.createElement("tr",null,n.createElement("th",null,"每股未分配利润"),n.createElement("td",null,e.retained_earning_per_share,"元")),n.createElement("tr",null,n.createElement("th",null,"每股经营现金流"),n.createElement("td",null,e.operating_cash_flow_per_share,"元")),n.createElement("tr",null,n.createElement("th",null,"经营现金流入"),n.createElement("td",null,e.operating_cashflow_in,"亿元")),n.createElement("tr",null,n.createElement("th",null,"经营现金流出"),n.createElement("td",null,e.operating_cashflow_out,"亿元")),n.createElement("tr",null,n.createElement("th",null,"经营现金流量净额"),n.createElement("td",null,e.net_operating_cashflow,"亿元")),n.createElement("tr",null,n.createElement("th",null,"流动比率"),n.createElement("td",null,e.currentRatio)),n.createElement("tr",null,n.createElement("th",null,"速动比率"),n.createElement("td",null,e.quickRatio)))))):n.createElement("div",{className:"financing",ref:"financing",style:{height:this.props.height+"px"}},n.createElement("div",{className:"no-financing-info"},"非个股无财务信息"))},Financing}(n.Component);t.default=i},Hu7R:function(e,t){},HuvF:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("WOwf");var n=r("U7vG"),a=function(e){function Briefing(){return null!==e&&e.apply(this,arguments)||this}return o(Briefing,e),Briefing.prototype.shouldComponentUpdate=function(e,t){return this.props.stockInfo!==e.stockInfo},Briefing.prototype.render=function(){var e=this.props.stockInfo,t=+e.price,r=+e.changePrice,o=+e.changeRate;return n.createElement("div",{className:"chart-sidebar-briefing"},0!==t?n.createElement("div",{className:r>0?"stock-data positive":r<0?"stock-data negtive":"stock-data"},n.createElement("span",{className:"price"},t.toFixed(2),0!==r?n.createElement("svg",{viewBox:"0 0 10 12"},n.createElement("g",null,n.createElement("path",{d:"M9.6,4.4c0.3,0.3,0.3,0.8,0,1.1C9.5,5.7,9.3,5.7,9.1,5.7S8.7,5.7,8.5,5.5L5.7,2.7v8.5c0,0.4-0.4,0.8-0.8,0.8c-0.4,0-0.8-0.4-0.8-0.8V2.7L1.4,5.5c-0.3,0.3-0.8,0.3-1.1,0s-0.3-0.8,0-1.1l4.1-4.1C4.5,0.1,4.7,0,4.9,0c0.2,0,0.4,0.1,0.6,0.2L9.6,4.4z"}))):null),"  ",r>0?"+"+r.toFixed(2):r.toFixed(2),"  (",o>0?"+"+o.toFixed(2)+"%":o.toFixed(2)+"%",")"):n.createElement("div",{className:"stock-data"},n.createElement("span",{className:"price"},"停牌")))},Briefing}(n.Component);t.default=a},I282:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("oJNF"),a=r("Cqed"),i=r("wRi7"),s=function(e){function TrendAngleToolRenderer(){return null!==e&&e.apply(this,arguments)||this}return o(TrendAngleToolRenderer,e),TrendAngleToolRenderer.prototype.drawTool=function(e){var t=this._chart,r=t.axisX,o=t.axisY,n=t.axisY.range,a=this.getCursor(),i=this._vertexes.map(function(e){return{x:~~r.getXByTime(e.time),y:~~o.getYByValue(e.value,n)}});this.isFinished()||i.push({x:a.x,y:a.y}),e.strokeStyle="#000",e.lineWidth=1,e.beginPath(),i.forEach(function(t,r){if(0===r)e.moveTo(t.x,t.y);else if(1===r){e.lineTo(t.x,t.y),e.stroke();var o=i[0],n=t.y>=o.y,a=Math.atan((t.y-o.y)/(t.x-o.x));a=0===a?t.x>=o.x?0:Math.PI:n?a>0?a:Math.PI+a:a<0?2*Math.PI+a:Math.PI+a;var s=~~(a/2/Math.PI*360);s=n?-s:360-s,e.setLineDash&&e.setLineDash([3,3]),e.moveTo(o.x,o.y),e.lineTo(o.x+60,o.y),e.stroke(),e.beginPath(),n?e.arc(o.x,o.y,60,0,a):e.arc(o.x,o.y,60,a,2*Math.PI),e.font="12px ans-serif",e.fillStyle="black",e.fillText(s+"°",o.x+65,o.y+6),e.stroke()}})},TrendAngleToolRenderer.prototype.hitTestTool=function(){var e=this._chart,t=e.axisX,r=e.axisY,o=e.crosshair.point,n=this._vertexes[0],s=this._vertexes[1],l=o.x,c=o.y,u=t.getXByTime(n.time),h=r.getYByValue(n.value),d=t.getXByTime(s.time),p=r.getYByValue(s.value);return i.pointToSegDist(l,c,u,h,d,p)<a.HIT_TEST_TOLERANCE},TrendAngleToolRenderer.prototype.isFinished=function(){return 2===this._vertexes.length},TrendAngleToolRenderer}(n.BaseToolRenderer);t.TrendAngleToolRenderer=s},IlEz:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n,a=r("Lv/5");!function(e){e[e.X=0]="X",e[e.TIME=1]="TIME",e[e.TYPE=2]="TYPE",e[e.VAL=3]="VAL",e[e.PROB=4]="PROB"}(n||(n={}));var i=function(e){function InflectionRenderer(t){return e.call(this,t,null)||this}return o(InflectionRenderer,e),InflectionRenderer.prototype.hitTest=function(){return!1},InflectionRenderer.prototype.draw=function(e){var t=this._plotModel,r=t.getVisibleBars(),o=t.graph.datasource.version;if(r.length){var a=t.graph,i=a.chart,s=i.axisY,l=r.length;e.textAlign="center";for(var c=0;c<l;c++){var u=r[c];switch(u[n.TYPE]){case 0:e.font="48px Verdana, Arial, sans-serif",e.fillStyle="#FF3333",e.fillText("↑",u[n.X],1===o?~~s.getYByValue(u[n.VAL])-16:i.height-8),e.font="12px Verdana, Arial, sans-serif",e.fillStyle="#000000",e.fillText(u[n.PROB],u[n.X],1===o?~~s.getYByValue(u[n.VAL])-60:i.height-48);break;case 1:e.font="48px Verdana, Arial, sans-serif",e.fillStyle="#99FF33",e.fillText("↓",u[n.X],1===o?40+~~s.getYByValue(u[n.VAL]):i.height-8),e.font="12px Verdana, Arial, sans-serif",e.fillStyle="#000000",e.fillText(u[n.PROB],u[n.X],1===o?72+~~s.getYByValue(u[n.VAL]):i.height-48)}}}},InflectionRenderer.prototype.calcRangeY=function(){return this._plotModel.getVisibleBars().length?{max:-Number.MAX_VALUE,min:Number.MAX_VALUE}:null},InflectionRenderer.prototype.getSelectionYByBar=function(e){return null},InflectionRenderer}(a.BaseChartRenderer);t.InflectionRenderer=i},IloD:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("b5Rr");var n=r("U7vG"),a=r("rdLu"),i=function(e){function Dialog(){var t=e.call(this)||this;return t._dragStart=!1,t._dragPosX=0,t._dragPosY=0,t.closeHandler=t.closeHandler.bind(t),t.clickOutsideHandler=t.clickOutsideHandler.bind(t),t.dragStartHandler=t.dragStartHandler.bind(t),t.dragMoveHandler=t.dragMoveHandler.bind(t),t.dragEndHandler=t.dragEndHandler.bind(t),t}return o(Dialog,e),Dialog.prototype.shouldComponentUpdate=function(e){return!a.isEqual(this.props,e)},Dialog.prototype.componentDidMount=function(){var e=this.refs.container,t=document.documentElement.clientHeight,r=document.documentElement.clientWidth,o=this.refs.container.style,n=this.props,a=n.width||e.clientWidth,i=n.height||e.clientHeight;o.width=n.width+"px",o.height=n.height+"px",o.top=.382*t-i/2+"px",o.left=.5*r-a/2+"px",document.addEventListener("mousedown",this.clickOutsideHandler),document.addEventListener("touchstart",this.clickOutsideHandler),document.addEventListener("mousemove",this.dragMoveHandler),document.addEventListener("touchmove",this.dragMoveHandler),document.addEventListener("mouseup",this.dragEndHandler),document.addEventListener("touchend",this.dragEndHandler)},Dialog.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.clickOutsideHandler),document.removeEventListener("touchstart",this.clickOutsideHandler),document.removeEventListener("mousemove",this.dragMoveHandler),document.removeEventListener("touchmove",this.dragMoveHandler),document.removeEventListener("mouseup",this.dragEndHandler),document.removeEventListener("touchend",this.dragEndHandler)},Dialog.prototype.render=function(){return n.createElement("div",{ref:"container",className:this.props.className+" chart-dialog"},n.createElement("h3",{onMouseDown:this.dragStartHandler,onTouchStart:this.dragStartHandler},this.props.title),n.createElement("a",{href:"javascript:;",className:"close",onClick:this.closeHandler}),n.createElement("div",{className:"chart-dialog-body"},this.props.children))},Dialog.prototype.closeHandler=function(){var e=this.props.onClose;"function"==typeof e&&e()},Dialog.prototype.clickOutsideHandler=function(e){var t=this.refs.container,r=e.target;r===t||t.contains(r)||this.closeHandler()},Dialog.prototype.dragStartHandler=function(e){e.touches&&e.preventDefault();var t=e.touches&&1===e.touches.length;this._dragStart=!0,this._dragPosX=t?e.touches[0].pageX:e.pageX,this._dragPosY=t?e.touches[0].pageY:e.pageY},Dialog.prototype.dragMoveHandler=function(e){if(this._dragStart){var t=this.refs.container.style,r=e.touches&&1===e.touches.length,o=r?e.touches[0].pageX:e.pageX,n=r?e.touches[0].pageY:e.pageY,a=o-this._dragPosX,i=n-this._dragPosY;t.left=parseFloat(t.left)+a+"px",t.top=parseFloat(t.top)+i+"px",this._dragPosX=o,this._dragPosY=n}},Dialog.prototype.dragEndHandler=function(){this._dragStart=!1},Dialog.defaultProps={className:""},Dialog}(n.Component);t.default=i},KTML:function(e,t,r){"use strict";function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),__export(r("Lv/5")),__export(r("Ck02")),__export(r("oVxw")),__export(r("5cZ6")),__export(r("oifU")),__export(r("qbbe")),__export(r("/5Qm")),__export(r("IlEz"))},KVhT:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("BzvE"),a=r("m297"),i=function(e){function CrosshairModel(t){var r=e.call(this)||this;return r._chartLayout=t,r._graphic=new a.default(r),r}return o(CrosshairModel,e),Object.defineProperty(CrosshairModel.prototype,"point",{get:function(){return this._point},set:function(e){this._point&&e&&e.x===this._point.x&&e.y===this._point.y||(this._point=e)},enumerable:!0,configurable:!0}),Object.defineProperty(CrosshairModel.prototype,"graphic",{get:function(){return this._graphic},enumerable:!0,configurable:!0}),Object.defineProperty(CrosshairModel.prototype,"chart",{get:function(){return this._chart},set:function(e){this._chart=e},enumerable:!0,configurable:!0}),CrosshairModel.prototype.draw=function(){this.graphic.draw()},CrosshairModel}(n);t.default=i},Lk2d:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("7Oqy");var n=r("U7vG"),a=r("rdLu"),i=r("svHs"),s=r("MVOY"),l=r("P2GU"),c=r("HUhp"),u=["自选股","最近访问","板块列表","大盘综合"],h=function(e){function FooterPanel(t,r){var o=e.call(this,t,r)||this;return o.selectTabHandler=o.selectTabHandler.bind(o),o.toggleHandler=o.toggleHandler.bind(o),o}return o(FooterPanel,e),FooterPanel.prototype.shouldComponentUpdate=function(e){return!a.isEqual(this.props,e)},FooterPanel.prototype.render=function(){var e=this,t=this.props.activeIndex,r=this.props.width;return n.createElement("div",{className:"chart-footer-panel",style:{width:r+"px"}},n.createElement("div",{className:"btn-group "+(this.props.folded?"folded":"")},u.map(function(r,o){return n.createElement("button",{key:o,className:e.props.folded||t!==o?"":"active","data-index":o,onClick:e.selectTabHandler},r)}),n.createElement("a",{href:"javascript:;",className:"toggle-btn",onClick:this.toggleHandler},n.createElement("svg",{viewBox:"0 0 10.35 16"},n.createElement("g",null,n.createElement("path",{d:"M0,14.42,1.57,16l3.6-3.6L8.78,16l1.58-1.58L5.18,9.25ZM10.35,1.58,8.78,0,5.18,3.6,1.58,0,0,1.58,5.18,6.75Z"}))))),this.props.folded?null:n.createElement("div",{className:"panel-board"},0===t?n.createElement(i.default,{width:r}):null,1===t?n.createElement(s.default,{width:r}):null,2===t?n.createElement(l.default,{width:r}):null,3===t?n.createElement(c.default,{width:r}):null))},FooterPanel.prototype.toggleHandler=function(){this.props.folded?this.props.onChange(!1,this.props.activeIndex):this.props.onChange(!0,this.props.activeIndex)},FooterPanel.prototype.selectTabHandler=function(e){var t=+e.target.dataset.index;if(!this.props.folded&&this.props.activeIndex===t)return void(this.props.onChange&&this.props.onChange(!0,t));this.props.onChange&&this.props.onChange(!1,t)},FooterPanel}(n.Component);t.default=h},"Lv/5":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o;!function(e){e[e.X=0]="X",e[e.TIME=1]="TIME",e[e.VALUE=2]="VALUE"}(o||(o={}));var n=function(){function BaseChartRenderer(e,t){this._plotModel=e,this._style=t}return Object.defineProperty(BaseChartRenderer.prototype,"style",{get:function(){return this._style},set:function(e){this._style=e},enumerable:!0,configurable:!0}),BaseChartRenderer.prototype.drawSelection=function(){var e=this._plotModel,t=e.graph,r=t.datasource,n=t.chart,a=n.ctx,i=n.axisX,s=~~(60/i.barWidth+.5),l=e.getVisibleBars();if(l.length)for(var c=(r.loaded()-r.search(l[0][o.TIME]))%s,u=c,h=l.length,d=void 0,p=void 0;u<h;u+=s){if(d=l[u],!(p=this.getSelectionYByBar(d)))return;a.beginPath(),a.arc(d[o.X],p,3,0,2*Math.PI),a.closePath(),a.fillStyle="#D6D6D6",a.strokeStyle="#6B6B6B",a.fill(),a.stroke()}},BaseChartRenderer}();t.BaseChartRenderer=n},MVOY:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("/QIH"),r("bpF5");var n=r("U7vG"),a=r("rdLu"),i=r("bHfy"),s=r("wRi7"),l=r("NBiX"),c=r("H9vw"),u=function(e){function RecentList(t,r){var o=e.call(this,t,r)||this;return o.state={sortKey:"zdf",order:"desc"},o._chartLayout=r.chartLayout,o.loadStocks=o.loadStocks.bind(o),o.sortHandler=o.sortHandler.bind(o),o.setSymbolHandler=o.setSymbolHandler.bind(o),o}return o(RecentList,e),RecentList.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.state,t)},RecentList.prototype.componentDidMount=function(){this._isMounted=!0,this._wrapperScroller=new i(this.refs.wrapper,{scrollbars:!0,hScrollbar:!0,scrollX:!0,scrollY:!1,eventPassthrough:!0,fadeScrollbars:!0}),this._scroller=new i(this.refs.body,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this._chartLayout.addListener("self_select_add",this.loadStocks),this._chartLayout.addListener("self_select_delete",this.loadStocks),this.loadStocks(this.state.sortKey,this.state.order)},RecentList.prototype.componentWillReceiveProps=function(e){e.width!==this.props.width&&(this._wrapperScroller.refresh(),this._scroller.refresh())},RecentList.prototype.componentDidUpdate=function(){this._scroller.refresh()},RecentList.prototype.componentWillUnmount=function(){this._isMounted=!1,this._wrapperScroller.destroy(),this._scroller.destroy(),this._chartLayout.removeListener("self_select_add",this.loadStocks),this._chartLayout.removeListener("self_select_delete",this.loadStocks),clearTimeout(this._pollStocksTimer)},RecentList.prototype.render=function(){var e=this,t=this.state.stocks;return n.createElement("div",{className:"chart-recent-list",ref:"wrapper"},n.createElement("div",{className:"wrapper"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"18%"},"股票"),n.createElement("th",{width:"14%","data-key":"price",onClick:this.sortHandler},"最新价","price"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"14%","data-key":"zdf",onClick:this.sortHandler},"涨跌幅","zdf"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"16%","data-key":"sz",onClick:this.sortHandler},"总市值","sz"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"20%","data-key":"lt_sz",onClick:this.sortHandler},"实际流通市值","lt_sz"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"18%","data-key":"hy",onClick:this.sortHandler},"所属行业","hy"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":"")))),n.createElement("div",{ref:"body",className:"body"},n.createElement("table",{className:"s-table stripe even top-header"},n.createElement("tbody",null,t&&t.map(function(t,r){return n.createElement("tr",{key:r,"data-symbol":t.code,onClick:e.setSymbolHandler},n.createElement("td",{width:"18%"},t.name),n.createElement("td",{width:"14%"},(+t.price).toFixed(2)),n.createElement("td",{width:"14%"},(100*t.zdf).toFixed(2),"%"),n.createElement("td",{width:"16%"},"--"!==t.sz?s.formatNumber(+t.sz,2):"--"),n.createElement("td",{width:"20%"},"--"!==t.lt_sz?s.formatNumber(+t.lt_sz,2):"--"),n.createElement("td",{width:"18%"},t.hy))}))))))},RecentList.prototype.loadStocks=function(e,t){var r=this,o=a.pluck(this._chartLayout.readFromLS("chart.recentlist")||[],"symbol");c.getStockListByCodes(o,e,t).then(function(o){if(r._isMounted){var n=1e3*o.data.intver;r.setState({sortKey:e,order:t,stocks:o.data.list}),r._pollStocksTimer=n?setTimeout(function(){return r.loadStocks},n):-1}}).catch(function(e){return r._pollStocksTimer=setTimeout(function(){return r.loadStocks},1e4)})},RecentList.prototype.sortHandler=function(e){var t=e.target.dataset.key,r="desc";t===this.state.sortKey&&(r="desc"===this.state.order?"asc":"desc"),this.loadStocks(t,r)},RecentList.prototype.setSymbolHandler=function(e){this.context.chartLayout.setSymbol(e.currentTarget.dataset.symbol)},RecentList.contextTypes={chartLayout:n.PropTypes.instanceOf(l.default)},RecentList}(n.Component);t.default=u},MjKS:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("NIhD"),n=["1","5","15","30","60","D","W","M"];t.studyConfig={inflection:{adapter:function(e){return[0,e.time,e.type,e.val,e.prob]},output:function(e,t,r){return[[0,e[1],e[2],e[3],e[4]]]},supportResolutions:["D"],priority:1,isPrice:!0,isRemovable:!0,noLegend:!0,datasourceType:"remote",plots:[{shape:"inflection"}]},inflection2:{adapter:function(e){return[0,e.time,e.type,e.val,e.prob]},output:function(e,t,r){return[[0,e[1],e[2],e[3],e[4]]]},supportResolutions:["D"],priority:1,isPrice:!0,isRemovable:!0,noLegend:!0,datasourceType:"remote",plots:[{shape:"inflection2"}]},"压力支撑":{adapter:function(e){return[0,e.time,e.pressure,e.support]},output:function(e,t,r){var o=e[1];return[[0,o,e[2]],[0,o,e[3]]]},supportResolutions:["1","5","15","30","60","D"],priority:998,isPrice:!0,isRemovable:!1,noLegend:!1,datasourceType:"remote",plots:[{shape:"line",style:{color:"#ff9c00",lineWidth:1}},{shape:"line",style:{color:"#2b89cc",lineWidth:1}}]},"均价":{adapter:function(e){return[0,e.time,e.amount,e.volume]},output:function(e,t,r){var n=o.$MA(t);return null!==n?[[0,e[1],n]]:null},supportResolutions:["1"],priority:999,isPrice:!0,isRemovable:!1,noLegend:!1,datasourceType:"local",plots:[{shape:"line",style:{color:"orange",lineWidth:1}}]},MA:{adapter:function(e){return[0,e.time,e.close]},input:[5],inputLabels:["长度"],supportResolutions:["5","15","30","60","D","W","M"],priority:999,isPrice:!0,isRemovable:!1,noLegend:!1,datasourceType:"local",output:function(e,t,r){var n=r[0],a=o.MA(t,n,o.C);return null!==a?[[0,e[1],a]]:null},plots:[{shape:"line",style:{color:"#000000",lineWidth:1}}]},VOLUME:{adapter:function(e){return[0,e.time,e.volume,e.close<e.open]},input:[],inputLabels:[],supportResolutions:n,priority:999,isPrice:!1,isRemovable:!1,noLegend:!0,datasourceType:"local",output:function(e){return[e]},plots:[{shape:"column",style:{color:"#ff524f",colorDown:"#2bbe65",scale:.25,opacity:.2}}]},BOLL:{adapter:function(e){return[0,e.time,e.close]},input:[20,2],inputLabels:[],supportResolutions:n,priority:1,isPrice:!0,isRemovable:!0,noLegend:!1,datasourceType:"local",output:function(e,t,r){if(t-r[0]<0)return null;var n=r[0],a=o.MA(t,n,o.C),i=o.STD(t,n,o.C),s=e[1],l=a+r[1]*i,c=a-r[1]*i;return[[0,s,a],[0,s,l],[0,s,c],[0,s,l,c]]},plots:[{shape:"line",style:{color:"#FF0000",lineWidth:1}},{shape:"line",style:{color:"#0000FF",lineWidth:1}},{shape:"line",style:{color:"#0000FF",lineWidth:1}},{shape:"band",style:{color:"#000080",noLegend:!0,opacity:.1}}]},MACD:{adapter:function(e){return[0,e.time,e.close]},input:[12,26,9],inputLabels:[],supportResolutions:n,priority:1,isPrice:!1,isRemovable:!0,noLegend:!1,datasourceType:"local",output:function(e,t,r){var n=r[0],a=r[1],i=r[2],s=e[1],l=o.EMA(t,n,o.C)-o.EMA(t,a,o.C),c=function(e){return o.EMA(e,n,o.C)-o.EMA(e,a,o.C)},u=o.EMA(t,i,c);return[[0,s,2*(l-u)],[0,s,l],[0,s,u]]},plots:[{shape:"histogram",style:{color:"rgb(255, 0, 110)",colorDown:"rgb(255, 0, 110)",histogramBase:0}},{shape:"line",style:{color:"rgb(0, 148, 255)"}},{shape:"line",style:{color:"rgb(255, 106, 0)"}}]},KDJ:{adapter:function(e){return[0,e.time,e.close,e.high,e.low]},input:[9,3,3],inputLabels:[],supportResolutions:n,priority:1,isPrice:!1,isRemovable:!0,noLegend:!1,datasourceType:"local",output:function(e,t,r){var n=r[0],a=r[1],i=r[2],s=function(e){return(o.C(e)-o.LLV(e,n,o.L))/(o.HHV(e,n,o.H)-o.LLV(e,n,o.L))*100},l=function(e){return o.SMA(e,a,1,s)},c=l(t),u=o.SMA(t,i,1,l),h=3*c-2*u,d=e[1];return[[0,d,c],[0,d,u],[0,d,h]]},plots:[{shape:"line",style:{color:"#0000FF"}},{shape:"line",style:{color:"#FFA600"}},{shape:"line",style:{color:"#FF00FF"}}]},RSI:{adapter:function(e){return[0,e.time,e.close]},input:[6,12,24],inputLabels:[],supportResolutions:n,priority:1,isPrice:!1,isRemovable:!0,noLegend:!1,datasourceType:"local",output:function(e,t,r){if(t-Math.max.apply(Math,r)<0)return null;var n=r[0],a=r[1],i=r[2],s=e[1],l=function(e){return Math.max(o.C(e)-o.LC(e),0)},c=function(e){return Math.abs(o.C(e)-o.LC(e))};return[[0,s,o.SMA(t,n,1,l)/o.SMA(t,n,1,c)*100],[0,s,o.SMA(t,a,1,l)/o.SMA(t,a,1,c)*100],[0,s,o.SMA(t,i,1,l)/o.SMA(t,i,1,c)*100]]},plots:[{shape:"line",style:{color:"#f8b439"}},{shape:"line",style:{color:"#1b96ff"}},{shape:"line",style:{color:"#ea45b3"}}]},CCI:{adapter:function(e){return[0,e.time,e.close,e.high,e.low]},input:[14],inputLabels:[],supportResolutions:n,priority:1,isPrice:!1,isRemovable:!0,noLegend:!1,datasourceType:"local",output:function(e,t,r){var n=r[0];if(t-n<0)return null;var a=e[1],i=function(e){return(o.C(e)+o.H(e)+o.L(e))/3};return[[0,a,(i(t)-o.MA(t,n,i))/(.015*o.AVEDEV(t,n,i))]]},plots:[{shape:"line",style:{color:"rgba(60, 120, 216, 1)"}}]},CR:{adapter:function(e){return[0,e.time,e.close,e.high,e.low]},input:[26,5,10,20],inputLabels:[],supportResolutions:n,priority:1,isPrice:!1,isRemovable:!0,noLegend:!1,datasourceType:"local",output:function(e,t,r){var n=r[0],a=r[1],i=r[2],s=r[3];if(t-n<0)return null;var l=e[1],c=function(e){return(o.C(e)+o.H(e)+o.L(e))/3},u=function(e){return Math.max(0,o.H(e)-o.REF(e,1,c))},h=function(e){return Math.max(0,o.REF(e,1,c)-o.L(e))},d=function(e){var t=o.getContext().cacheObj,r="CR"+e;if(t[r])return t[r];var a=o.SUM(e,n,u)/o.SUM(e,n,h)*100;return t[r]=a,a},p=function(e){return o.MA(e,a,d)},f=function(e){return o.MA(e,i,d)},m=function(e){return o.MA(e,s,d)};return[[0,l,d(t)],t-n-a>0?[0,l,o.REF(t,a/2.5+1,p)]:null,t-n-i>0?[0,l,o.REF(t,i/2.5+1,f)]:null,t-n-s>0?[0,l,o.REF(t,s/2.5+1,m)]:null]},plots:[{shape:"line",style:{color:"#0000FF"}},{shape:"line",style:{color:"#ff9900"}},{shape:"line",style:{color:"#ff00ff"}},{shape:"line",style:{color:"#00ff00"}}]}}},NBiX:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("BzvE"),a=r("rdLu"),i=r("PJh5"),s=r("WybQ"),l=r("nbee"),c=r("GawB"),u=r("b2uV"),h=r("qYPw"),d=r("NpAc"),p=r("KVhT"),f=r("2OPA"),m=r("H9vw"),_=r("Cqed");t.preferredTimeRange=["1天","5天","1月","1年","全部"];var y=["1","5","30","D","M"];t.DEFAULT_MA_PROPS=[{length:5,color:"rgb(255,0,0)",isVisible:!0},{length:10,color:"rgb(0,0,255)",isVisible:!1},{length:20,color:"rgb(255,0,255)",isVisible:!0},{length:30,color:"rgb(0,255,0)",isVisible:!1},{length:60,color:"rgb(255,152,0)",isVisible:!1}];var g=function(e){function ChartLayoutModel(){var t=e.call(this)||this;return t.willEraseDrawingTool=!1,t._isEditMode=!1,t._loading=!1,t._maStudies=[],t._charts=[],t.pulseUpdate=t.pulseUpdate.bind(t),t.fullUpdate=t.fullUpdate.bind(t),t.lightUpdate=t.lightUpdate.bind(t),t}return o(ChartLayoutModel,e),Object.defineProperty(ChartLayoutModel.prototype,"component",{set:function(e){this._component=e},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"charts",{get:function(){return this._charts.slice(0)},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"axisx",{get:function(){return this._axisx},set:function(e){this._axisx=e},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"mainChart",{get:function(){return this._mainChart},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"mainDatasource",{get:function(){return this._mainDatasource},set:function(e){this._mainDatasource=e},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"hoverChart",{get:function(){return this._charts.filter(function(e){return e.hover})[0]||null},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"defaultCursor",{get:function(){return this._defaultCursor},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"maProps",{get:function(){return this.readFromLS("qchart.studies.props.ma["+this.mainDatasource.resolution+"]")||t.DEFAULT_MA_PROPS},set:function(e){this.saveToLS("qchart.studies.props.ma["+this.mainDatasource.resolution+"]",e)},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"maStudies",{get:function(){return this._maStudies},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"isEditMode",{get:function(){return this._isEditMode},set:function(e){var t=this._mainChart;this._isEditMode=e,e&&(this.setHoverChart(t),this.setCursorPoint({x:~~(t.width/2+.5),y:~~(t.height/2+.5)})),this.emit("editmode_change",e)},enumerable:!0,configurable:!0}),ChartLayoutModel.prototype.saveToLS=function(e,t){void 0!==t&&(localStorage[e]=JSON.stringify(t))},ChartLayoutModel.prototype.readFromLS=function(e){return localStorage.hasOwnProperty(e)?JSON.parse(localStorage[e]):null},ChartLayoutModel.prototype.deleteFromLS=function(e){delete localStorage[e]},ChartLayoutModel.prototype.setHoverChart=function(e){this.charts.forEach(function(e){e.hover=!1,e.graphs.forEach(function(e){return e.hover=!1}),e.tools.forEach(function(e){return e.hover=!1})}),e.hover=!0},ChartLayoutModel.prototype.cancelSelectedGraph=function(){this.charts.forEach(function(e){e.graphs.forEach(function(e){return e.selected=!1}),e.tools.forEach(function(e){return e.selected=!1})})},ChartLayoutModel.prototype.fullUpdate=function(){var e=this,t=this.axisx;this.needMoreData()&&this.loadHistory(),this._lastAnimationFrame&&cancelAnimationFrame(this._lastAnimationFrame),this._lastAnimationFrame=requestAnimationFrame(function(){t.draw(),e.charts.forEach(function(e){e.clearCache(),e.calcRangeY(),e.draw(),e.axisY.draw(),e.clearTopCanvas(),e.crosshair.draw()}),e._lastAnimationFrame=null})},ChartLayoutModel.prototype.lightUpdate=function(){var e=this;this._lastAnimationFrame||(this._lastAnimationFrame=requestAnimationFrame(function(){e.axisx.draw(!!e.axisx.isValid),e.charts.forEach(function(e){e.axisY.range||e.calcRangeY(),e.clearTopCanvas(),e.isValid||e.draw(),e.axisY.draw(!!e.axisY.isValid),e.creatingDrawingTool&&e.creatingDrawingTool.draw(),e.editingDrawingTool&&e.editingDrawingTool.draw(),e.crosshair.draw()}),e._lastAnimationFrame=null}))},ChartLayoutModel.prototype.getServerTime=function(){var e=this;return m.getServerTime().then(function(t){var r=~~(Date.now()/1e3)-+t,o=[];e.charts.forEach(function(e){e.graphs.forEach(function(e){o.push(e.datasource)})}),o.forEach(function(e){return e.timeDiff=r})})},ChartLayoutModel.prototype.addPatterns=function(){var e=this;return"D"===this.mainDatasource.resolution?m.getPatterns(this.mainDatasource.symbol).then(function(t){t.data.shape_list.forEach(function(t){if("wave"===t.shape_type){var r=t.shape_detail.f.map(function(e){return{time:~~(i(e.d).toDate().getTime()/1e3),value:e.v}}),o=t.shape_detail.s.map(function(e){return{time:~~(i(e.d).toDate().getTime()/1e3),value:e.v}});e.mainChart.addPattern(new d.default(e.mainChart,t.shape_type,{bwPoints:r,swPoints:o}))}else if("triangle"===t.shape_type){var n=[],a=null;t.shape_detail.xtd&&(n.push(t.shape_detail.xtd.l1),n.push(t.shape_detail.xtd.l2)),t.shape_detail.dtd&&(n.push(t.shape_detail.dtd.l1),n.push(t.shape_detail.dtd.l2)),n=n.filter(function(e){return!!e}).map(function(e){return[{time:~~(i(e.p1.d).toDate().getTime()/1e3),value:e.p1.v},{time:~~(i(e.p2.d).toDate().getTime()/1e3),value:e.p2.v}]}),e.mainChart.addPattern(new d.default(e.mainChart,t.shape_type,{points:a,trendLines:n}))}else{var n=[],a=null;a=t.shape_detail.st.map(function(e){return{time:~~(i(e.d).toDate().getTime()/1e3),value:e.v}}),n=[t.shape_detail.l1,t.shape_detail.l2].filter(function(e){return!!e}).map(function(e){return[{time:~~(i(e.p1.d).toDate().getTime()/1e3),value:e.p1.v},{time:~~(i(e.p2.d).toDate().getTime()/1e3),value:e.p2.v}]}),e.mainChart.addPattern(new d.default(e.mainChart,t.shape_type,{points:a,trendLines:n}))}}),e.emit("patterns_add")}):Promise.resolve()},ChartLayoutModel.prototype.stopPulseUpdate=function(){this._loading=!1,this.emit("loading_end"),clearTimeout(this._pulseUpdateTimer),this._pulseUpdateTimer=null},ChartLayoutModel.prototype.loadHistory=function(){var e=this,t=this.mainDatasource;if(!t.hasMoreHistory||this._loading)return Promise.resolve();this._loading=!0,this.emit("loading_start");var r=this.axisx,o=[],n=~~(1.5*r.width/r.barWidth);return this.charts.forEach(function(e){e.graphs.forEach(function(e){o.push(e.datasource)})}),new Promise(function(r,i){var s=t.first()?t.first().time:null;t.loadHistory(n).then(function(){return Promise.all(a.chain(o).without(t).unique().reduce(function(e,r){return e.push(r.loadTimeRange(t.first().time,s||t.last().time)),e},[]).value()).then(function(){e.fullUpdate(),"number"!=typeof e._pulseUpdateTimer&&e.pulseUpdate(),e._loading=!1,e.emit("loading_end"),r()}).catch(function(t){e._loading=!1,e.emit("loading_end")})}).catch(function(t){e._loading=!1,e.emit("loading_end")})})},ChartLayoutModel.prototype.pulseUpdate=function(){var e=this,t=this.mainDatasource,r=t.pulseInterval<10?10:t.pulseInterval,o=t.loaded()?t.last().time:t.now()-86400,n=o+86400,i=[],s=[];this.charts.forEach(function(e){e.graphs.forEach(function(e){i.push(e.datasource)})}),Promise.all(a.chain(i).unique().reduce(function(e,t){return e.push(t.loadTimeRange(o,n)),e},s).value()).then(function(){e.fullUpdate(),t.pulseInterval&&(e._pulseUpdateTimer=setTimeout(e.pulseUpdate,1e3*r))}).catch(function(){return e._pulseUpdateTimer=setTimeout(e.pulseUpdate,3e4)})},ChartLayoutModel.prototype.setResolution=function(e){var t=this._mainDatasource,r=t.resolution;if(t instanceof m.StockDatasource){var o=this.mainChart.mainGraph;"1"===e?(o.setShape("line"),o.plots[0].shape="line"):(o.setShape("candle"),o.plots[0].shape="candle")}a.unique(this._charts.reduce(function(e,t){return e.concat(t.graphs.map(function(e){return e.datasource}))},[])).forEach(function(t){return t.resolution=e}),this.clearCache(),this.switchStudies(r),this.removeAllTools(),"D"!==e?this.removeAllPatterns():this.addPatterns(),this.stopPulseUpdate(),this.loadHistory(),this._axisx.resetOffset(),this.emit("resolution_change",e)},ChartLayoutModel.prototype.setSymbol=function(e){var t=this,r=this._mainDatasource;r.resolveSymbol(e).then(function(){var o=r.symbolInfo,n=t.readFromLS("chart.recentlist")||[];a.unique(t._charts.reduce(function(e,t){return e.concat(t.graphs.map(function(e){return e.datasource}))},[])).forEach(function(t){return t.symbol=e}),t.clearCache(),t.switchStudies(),t.removeAllTools(),t.removeAllPatterns(),t.addPatterns(),t.stopPulseUpdate(),t.loadHistory(),t._axisx.resetOffset(),-1===a.findIndex(n,{symbol:o.symbol})&&(n.push(o),n.length>50&&n.shift(),t.saveToLS("chart.recentlist",n)),history.replaceState(null,document.title,"/?symbol="+e),t.emit("symbol_change",o)})},ChartLayoutModel.prototype.setRight=function(e){a.unique(this._charts.reduce(function(e,t){return e.concat(t.graphs.map(function(e){return e.datasource}))},[])).forEach(function(t){t instanceof m.StockDatasource&&(t.right=e)}),this.clearCache(),this.removeAllTools(),this.stopPulseUpdate(),this.loadHistory(),this._axisx.resetOffset(),this.emit("right_change",e)},ChartLayoutModel.prototype.setCursorPoint=function(e){var t=this.mainChart.crosshair.point;t&&e&&t.x===e.x&&t.y===e.y||(this.charts.forEach(function(t){return t.crosshair.point=e}),this.emit("cursor_move",e))},ChartLayoutModel.prototype.setDefaultCursor=function(e){this._defaultCursor=e,this.emit("cursor_change",e)},ChartLayoutModel.prototype.addChart=function(e){var t=this._mainChart?this._mainChart.crosshair.point:{x:0,y:0};if(e.isMain){if(this._mainChart)throw new Error("can only has one main chart");this._mainChart=e}e.crosshair.point=t?{x:t.x,y:t.y}:null,this._charts.push(e),this.emit("chart_add",e)},ChartLayoutModel.prototype.removeChart=function(e){this._charts.splice(this._charts.indexOf(e),1),this.emit("chart_remove",e)},ChartLayoutModel.prototype.resetStudies=function(){var e=this;this.removeAllStudies();var r=this._mainChart,o=r.datasource,n=this.maProps||t.DEFAULT_MA_PROPS,a=this._maStudies,i=!!this.readFromLS("chart.forceMA"),s=!!this.readFromLS("chart.showPressureSupport")||!!this.readFromLS("chart.showReverseRelay"),l=!!this.readFromLS("chart.showInflection"),c=!!this.readFromLS("chart.showPressureSupport");a.length=0,"1"===o.resolution?o instanceof m.StockDatasource&&o.symbolInfo&&"stock"===o.symbolInfo.type&&(a[0]=new h.default(r,"均价"),r.addGraph(a[0])):n.forEach(function(t,n){var a=new h.default(r,"MA",!(s&&!i&&"D"===o.resolution)&&t.isVisible,[t.length],[{color:t.color,lineWidth:1}]);e._maStudies.push(a),r.addGraph(a)}),o.resolution<="D"&&c&&r.addGraph(new h.default(r,"压力支撑")),"D"===o.resolution&&l&&(r.addGraph(new h.default(r,"inflection")),r.addGraph(new h.default(r,"inflection2"))),r.addGraph(new h.default(r,"VOLUME"))},ChartLayoutModel.prototype.switchStudies=function(e){var r=this,o=this._mainChart,n=this._mainDatasource,a=n.resolution,i=n.symbolInfo,s=this._maStudies,l=this.maProps||t.DEFAULT_MA_PROPS,c=+("1"===e)^+("1"===a),u=!!this.readFromLS("chart.showPressureSupport"),d=!!this.readFromLS("chart.showInflection"),p=!!this.readFromLS("chart.forceMA"),f=!!this.readFromLS("chart.showPressureSupport")||!!this.readFromLS("chart.showReverseRelay");if(c)return this.resetStudies();this.maStudies.forEach(function(e){return r.removeStudy(o,e.id)}),u&&(e>"D"&&a<="D"?o.addGraph(new h.default(o,"压力支撑")):e<="D"&&a>"D"&&o.graphs.filter(function(e){return e instanceof h.default&&"压力支撑"===e.studyType}).forEach(function(e){return o.removeGraph(e)})),d&&("D"!==e&&"D"===a?o.addGraph(new h.default(o,"inflection")):"D"===e&&"D"!==a&&o.graphs.filter(function(e){return e instanceof h.default&&"inflection"===e.studyType}).forEach(function(e){return o.removeGraph(e)})),"1"===a?"stock"===i.type&&(s.length=0,s[0]=new h.default(o,"均价"),o.addGraph(s[0])):(s.length=0,l.forEach(function(e,t){var r=new h.default(o,"MA",!(f&&!p&&"D"===n.resolution)&&e.isVisible,[e.length],[{color:e.color,lineWidth:1}]);s.push(r),o.addGraph(r)}))},ChartLayoutModel.prototype.addStudy=function(e){var t=this,r=m.studyConfig[e],o=this._mainChart,n=this.mainDatasource;if(r.isPrice){var a=new h.default(o,e);"local"===a.datasourceType?(this._mainChart.addGraph(a),this.emit("graph_add",a)):n.first()&&(this._mainChart.addGraph(a),a.datasource.loadTimeRange(n.first().time,n.last().time).then(function(){t.emit("graph_add",a)}))}else{var i=new p.default(this),s=this.axisx,c=new f.default(n,i),u=new l.default(this,n,s,c,i,r.isPrice),d=new h.default(u,e);c.chart=u,i.chart=u,"local"===d.datasourceType?(u.addGraph(d),this.addChart(u),this.emit("graph_add",d)):n.first()&&d.datasource.loadTimeRange(n.first().time,n.last().time).then(function(){u.addGraph(d),t.addChart(u)})}},ChartLayoutModel.prototype.removeStudy=function(e,t){var r=this;e.graphs.some(function(o){return o instanceof h.default&&o.id===t&&(e.removeGraph(o),r.emit("graph_remove",o),!0)})&&(e.graphs.length||this.removeChart(e))},ChartLayoutModel.prototype.modifyGraph=function(e,t){e.clearCache(),Object.keys(t).forEach(function(r){return e[r]=t[r]}),this.emit("graph_modify")},ChartLayoutModel.prototype.hideMA=function(){var e=this;this._maStudies.forEach(function(t){return e.modifyGraph(t,{isVisible:!1})})},ChartLayoutModel.prototype.showMA=function(){var e=this;this._maStudies.forEach(function(t,r){return e.modifyGraph(t,{isVisible:e.maProps[r].isVisible})})},ChartLayoutModel.prototype.addComparison=function(e){var t=this,r=this.mainDatasource,o=this._mainChart,n=new m.StockDatasource(r.defaultSymbol,r.resolution,r.right,r.timeDiff),a=new c.default(n,o,!1,!1,!0,"line",{color:s({luminosity:"bright",hue:"random"}),lineWidth:1});return n.resolveSymbol(e).then(function(){n.loadTimeRange(r.first().time,r.last().time+86400).then(function(){o.addGraph(a),t.emit("graph_add",a)})}),a.id},ChartLayoutModel.prototype.removeComparison=function(e){var t=this;this._mainChart.graphs.some(function(r){return!(!r.isComparison||r.id!==e)&&(t._mainChart.removeGraph(r),t.emit("graph_remove",r),!0)})},ChartLayoutModel.prototype.goToDate=function(e){var t=this,r=this._mainDatasource,o=this._axisx;if(0!==r.loaded()){var n=e<r.last().time?r.search(e):r.loaded()-1;if(-1!==n||r.hasMoreHistory||(n=0),-1!==n)o.offset=(r.loaded()-1.5-n)*o.barWidth;else{var i=[];this.charts.forEach(function(e){e.graphs.forEach(function(e){i.push(e.datasource)})}),Promise.all(a.chain(i).unique().reduce(function(t,o){return t.push(o.loadTimeRange(e,r.first().time)),t},[]).value()).then(function(){return t.goToDate(r.first().time)})}}},ChartLayoutModel.prototype.setTimeRange=function(e){var r=y[t.preferredTimeRange.indexOf(e)],o=this.mainDatasource,n=this.axisx,a=i(1e3*o.now()),s=i({hour:_.OPEN_HOUR,minute:_.OPEN_MINUTE}),l=i({hour:_.CLOSE_HOUR,minute:_.CLOSE_MINUTE}),c=~~(a.toDate().getTime()/1e3+86400),h=~~(function(){switch(e){case"1天":return a.isAfter(l)?s.toDate().getTime():s.subtract(1,"days").toDate().getTime();case"5天":for(var t=a.isAfter(l)?s:s.subtract(1,"days"),r=4;r--;)t.subtract(1,"days"),-1===_.OPEN_DAYS.indexOf(t.day())&&r++;return t.toDate().getTime();case"1月":return s.subtract(1,"months").toDate().getTime();case"1年":return s.subtract(1,"years").toDate().getTime();case"全部":return i("2000-01-01").toDate().getTime();default:throw"unsupport range type"}}()/1e3);r!==this.mainDatasource.resolution&&this.setResolution(r);var d=o.search(h);-1===d?o.loadTimeRange(h,c).then(function(e){e.length&&(n.barWidth=(n.width-u.INITIAL_OFFSET)/e.length)}):n.barWidth=(n.width-u.INITIAL_OFFSET)/(o.loaded()-d),n.resetOffset()},ChartLayoutModel.prototype.addSelfSelect=function(e){var t=this.readFromLS("qchart.selfselectlist")||[];t.push(e),this.saveToLS("qchart.selfselectlist",t),this.emit("self_select_add")},ChartLayoutModel.prototype.deleteSelfSelect=function(e){var t=this.readFromLS("qchart.selfselectlist")||[];this.saveToLS("qchart.selfselectlist",a.reject(t,function(t){return t.symbol===e.symbol})),this.emit("self_select_delete")},ChartLayoutModel.prototype.toggleAbout=function(e){this._component.setState({showAbout:e})},ChartLayoutModel.prototype.showAnalysisSidebarTab=function(){this._component.setState({sidebarFolded:!1,sidebarActiveIndex:4})},ChartLayoutModel.prototype.toggleGoToDate=function(e){this._component.setState({showGoToDate:e})},ChartLayoutModel.prototype.setContextMenu=function(e){this._component.setState({contextMenuConfig:e})},ChartLayoutModel.prototype.setGapVisibility=function(e){this.saveToLS("chart.showGap",e),this.mainChart.mainGraph.showGap=e,this.emit("gap_visibility_change",e)},ChartLayoutModel.prototype.setWaveVisibility=function(e){var t=this.mainChart.patterns,r=this.readFromLS("chart.forceMA"),o=this.readFromLS("chart.showReverseRelay");this.saveToLS("chart.showWaveForm",e),e?(t.length?(this.mainChart.setPatternVisibility(!0,e),this.emit("pattern_modify",e)):this.addPatterns(),r||"D"!==this.mainDatasource.resolution||this.hideMA()):(this.mainChart.setPatternVisibility(!0,e),this.emit("pattern_modify",e),o||this.showMA())},ChartLayoutModel.prototype.setReverseRelayVisibility=function(e){var t=this.mainChart.patterns,r=this.readFromLS("chart.forceMA"),o=this.readFromLS("chart.showWaveForm");this.saveToLS("chart.showReverseRelay",e),e?(t.length?(this.mainChart.setPatternVisibility(!1,e),this.emit("pattern_modify")):this.addPatterns(),r||"D"!==this.mainDatasource.resolution||this.hideMA()):(this.mainChart.setPatternVisibility(!1,e),this.emit("pattern_modify"),o||this.showMA())},ChartLayoutModel.prototype.clearCache=function(){this._charts.forEach(function(e){e.graphs.forEach(function(e){e.clearCache(),e.datasource.clearCache()})})},ChartLayoutModel.prototype.removeAllStudies=function(){var e=this;this.charts.reverse().forEach(function(t){t.graphs.filter(function(e){return e instanceof h.default}).forEach(function(r){return e.removeStudy(t,r.id)})})},ChartLayoutModel.prototype.removeAllTools=function(){this._charts.forEach(function(e){e.removeAllTools()})},ChartLayoutModel.prototype.removeAllPatterns=function(){this.mainChart.removeAllPatterns(),this.emit("patterns_remove")},ChartLayoutModel.prototype.needMoreData=function(){var e=this.axisx,t=this.mainDatasource.loaded()*e.barWidth,r=e.width;return t-r-e.offset<r},ChartLayoutModel}(n);t.default=g},NIhD:function(e,t,r){"use strict";function setContext(e,t){a={datasource:e,adapter:t,cacheObj:{}}}function clearContext(){a=null}function getContext(){return a}function getLastOpenIndex(e){var t=o(1e3*e.last().time).hour(n.OPEN_HOUR).minute(n.OPEN_MINUTE);return e.search(~~(t.toDate().getTime()/1e3))}function $MA(e){var t=a.datasource,r=a.adapter,o=a.cacheObj,n=o.$ma_openIndex||getLastOpenIndex(t);if(o.$ma_openIndex=n,e<n||-1===n)return null;for(var i=0,s=0,l=n,c=void 0;l<=e;l++)c=r(t.barAt(l)),i+=c[2],s+=100*c[3];return i/s}function MA(e,t,r){var o=(a.datasource,a.adapter,e-t+1),n=e+1,i=0;if(o<0)return null;for(var s=o;s<n;s++)i+=r(s);return i/(n-o)}function LLV(e,t,r){for(var o=e-t+1<0?0:e-t+1,n=e+1,a=Number.MAX_VALUE,i=o,s=void 0;i<n;i++)(s=r(i))<a&&(a=s);return a}function HHV(e,t,r){for(var o=e-t+1<0?0:e-t+1,n=e+1,a=-Number.MAX_VALUE,i=o,s=void 0;i<n;i++)(s=r(i))>a&&(a=s);return a}function REF(e,t,r){return e-1<0?null:r(e-t)}function SUM(e,t,r){for(var o=e-t+1<0?0:e-t+1,n=e+1,a=0,i=o;i<n;i++)a+=r(i);return a}function STD(e,t,r){var o=e-t+1,n=e+1;if(o<0)return null;for(var a=0,i=o;i<n;i++)a+=r(i);a/=n-o;for(var s=0,i=o;i<n;i++)s+=Math.pow(r(i)-a,2);return Math.sqrt(s/(n-o))}function AVEDEV(e,t,r){var o=e-t+1,n=e+1;if(o<0)return null;for(var a=0,i=o;i<n;i++)a+=r(i);a/=n-o;for(var s=0,i=o;i<n;i++)s+=Math.abs(r(i)-a);return s/(n-o)}function EMA(e,t,r){var o=a.cacheObj,n=r.toString(),i="ema"+n+t+"_"+e,s="ema"+n+t+"_"+(e-1);if("number"==typeof o[i])return o[i];if("number"==typeof o[s])return o[i]=2/(t+1)*(r(e)-o[s])+o[s];for(var l=e-5*t<0?0:e-5*t,c=e+1,u=0,h=l+1;h<c;h++)u=2/(t+1)*(r(h)-u)+u;return o[i]=u,u}function SMA(e,t,r,o){var n=a.cacheObj,i=o.toString(),s="sma"+i+t+"_"+e,l="sma"+i+t+"_"+(e-1);if("number"==typeof n[s])return n[s];if(n[l])return n[s]=(r*o(e)+(t-r)*n[l])/t;for(var c=e-8*t<0?0:e-8*t,u=e+1,h=50,d=c+1;d<u;d++)h=(r*o(d)+(t-r)*h)/t;return n[s]=h,h}Object.defineProperty(t,"__esModule",{value:!0});var o=r("PJh5"),n=r("Cqed"),a=null;t.setContext=setContext,t.clearContext=clearContext,t.getContext=getContext,t.H=function(e){var t=a.datasource;return(0,a.adapter)(t.barAt(e))[3]},t.L=function(e){var t=a.datasource;return(0,a.adapter)(t.barAt(e))[4]},t.C=function(e){var t=a.datasource;return(0,a.adapter)(t.barAt(e))[2]},t.LC=function(e){return REF(e,1,t.C)},t.$MA=$MA,t.MA=MA,t.LLV=LLV,t.HHV=HHV,t.REF=REF,t.SUM=SUM,t.STD=STD,t.AVEDEV=AVEDEV,t.EMA=EMA,t.SMA=SMA},NpAc:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("/bDT"),n=function(){function Pattern(e,t,r){var n=r.bwPoints,a=r.swPoints,i=r.trendLines,s=r.points;switch(this._isValid=!0,this._type=t,t){case"wave":this._renderer=new o.WavePatternRenderer(e,n,a),this._isVisible=!!e.chartLayout.readFromLS("chart.showWaveForm");break;case"mhead":case"whead":case"hsp":case"hsb":case"triangle":this._renderer=new o.ShapePatternRenderer(e,s,i),this._isVisible=!!e.chartLayout.readFromLS("chart.showReverseRelay")}}return Object.defineProperty(Pattern.prototype,"isVisible",{get:function(){return this._isVisible},set:function(e){this._isVisible!==e&&(this._isVisible=e,this._isValid=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(Pattern.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(Pattern.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),Pattern.prototype.draw=function(e){this._renderer.draw(e),this._isValid=!0},Pattern.prototype.isNowVisible=function(){return this._renderer.isNowVisible()},Pattern}();t.default=n},NvYq:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("mZpQ");var n=r("U7vG"),a=r("rdLu"),i=r("wRi7"),s=r("NBiX"),l=function(e){function Welcome(t,r){var o=e.call(this,t,r)||this;return o._chartLayout=r.chartLayout,o.clickHandler=o.clickHandler.bind(o),o.state={animateStep:0},o}return o(Welcome,e),Welcome.prototype.componentDidMount=function(){var e=this;i.animationQueue().delay(500).enqueue(function(){return e.setState({animateStep:1})}).delay(300).enqueue(function(){return e.setState({animateStep:2})}).delay(120).enqueue(function(){return e.setState({animateStep:4})}).delay(300).enqueue(function(){return e.setState({animateStep:5})})},Welcome.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.state,t)},Welcome.prototype.render=function(){var e="";switch(this.state.animateStep){case 0:break;case 1:e="ani-step-1";break;case 2:e="ani-step-2";break;case 3:e="ani-step-3";break;case 4:e="ani-step-4";break;case 5:e="ani-step-5"}return n.createElement("div",{className:"chart-welcome "+e},n.createElement("div",{className:"blocker"}),n.createElement("div",{className:"content cd-intro-content"},n.createElement("div",{className:"logo"}),n.createElement("h1",null,"趣看盘"),n.createElement("h2",null,"更智能， 更高效， 更及时， 更全面"),n.createElement("p",null,"看盘软件在十几年间都没有发生过重要的变化，应该这样吗?"),n.createElement("p",null,"我们走访了数百家专业机构，发现他们",n.createElement("em",null,"看盘的方式"),"和",n.createElement("em",null,"主流看盘工具提供的功能"),"有非常",n.createElement("em",null,"巨大的信息鸿沟"),"。"),n.createElement("p",null,n.createElement("em",null,"几个IT工程师"),"，尝试做些创新， 试图帮您具备",n.createElement("em",null,"专业的看盘视角和能力"),"。"),n.createElement("a",{href:"javascript:;",className:"proceed-btn",onClick:this.clickHandler}),n.createElement("a",{href:"/forums/",target:"_blank",className:"feedback-btn"},"建议/反馈")))},Welcome.prototype.clickHandler=function(){var e=this;i.animationQueue().enqueue(function(){return e.setState({animateStep:3})}).delay(300).enqueue(function(){return e.setState({animateStep:0})}).delay(300).enqueue(function(){return e._chartLayout.toggleAbout(!1)})},Welcome.contextTypes={chartLayout:n.PropTypes.instanceOf(s.default)},Welcome}(n.Component);t.default=l},P2GU:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("4VlZ"),r("bpF5");var n=r("U7vG"),a=r("bHfy"),i=r("NBiX"),s=r("wRi7"),l=r("H9vw"),c=function(e){function PlateList(t,r){var o=e.call(this,t,r)||this;return o.state={sortKey:"zdf",order:"desc",startIndex:0},o._chartLayout=r.chartLayout,o.onScrollEnd=o.onScrollEnd.bind(o),o.sortHandler=o.sortHandler.bind(o),o.selectHandler=o.selectHandler.bind(o),o.setSymbolHandler=o.setSymbolHandler.bind(o),o.loadPlates=o.loadPlates.bind(o),o.loadStocks=o.loadStocks.bind(o),o}return o(PlateList,e),PlateList.prototype.shouldComponentUpdate=function(e,t){var r=this.state;return r.plates!==t.plates||r.stocks!==t.stocks||r.activePlateId!==t.activePlateId||r.sortKey!==t.sortKey||r.order!==t.order},PlateList.prototype.componentWillReceiveProps=function(e){e.width!==this.props.width&&(this._platelistScroller.refresh(),this._stockListScroller.refresh(),this._wrapperScroller.refresh())},PlateList.prototype.componentDidMount=function(){this._isMounted=!0,this._wrapperScroller=new a(this.refs.wrapper,{scrollbars:!0,hScrollbar:!0,scrollX:!0,scrollY:!1,fadeScrollbars:!0}),this._platelistScroller=new a(this.refs.plateListBody,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this._stockListScroller=new a(this.refs.stockListBody,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this._platelistScroller.on("scrollEnd",this.onScrollEnd),this.loadPlates(this.state.sortKey,this.state.order,this.state.startIndex)},PlateList.prototype.componentDidUpdate=function(){this._platelistScroller.refresh(),this._stockListScroller.refresh(),this._wrapperScroller.refresh()},PlateList.prototype.componentWillUnmount=function(){this._isMounted=!1,this._platelistScroller.destroy(),this._stockListScroller.destroy(),this._wrapperScroller.destroy(),clearTimeout(this._pollPlateListTimer),clearTimeout(this._pollStockListTimer)},PlateList.prototype.render=function(){var e=this,t=this.state.total,r=this.state.startIndex,o=this.state.plates,a=30*r,i=30*(t-r-9-1);return n.createElement("div",{className:"chart-plate",ref:"wrapper"},n.createElement("div",{className:"wrapper"},n.createElement("div",{className:"plate-list"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"18%"},"板块名称"),n.createElement("th",{width:"16%","data-key":"zdf",onClick:this.sortHandler},"涨跌幅","zdf"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"18%","data-key":"big_rate",onClick:this.sortHandler},"大单净比","big_rate"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"18%","data-key":"big_amount",onClick:this.sortHandler},"主力资金","big_amount"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"12%"},"上涨数"),n.createElement("th",{width:"12%"},"下跌数"),n.createElement("th",{width:"6%"})))),n.createElement("div",{className:"body",ref:"plateListBody"},n.createElement("table",{className:"s-table stripe "+(this.state.startIndex%2==0?"even":"odd")+" top-header"},n.createElement("tbody",null,n.createElement("tr",{key:"paddingTop"},n.createElement("td",{style:{height:a+"px"}})),o&&o.map(function(t,r){return n.createElement("tr",{key:r,className:t.bk_id===e.state.activePlateId?"selected":"","data-id":t.bk_id,onClick:e.selectHandler},n.createElement("td",{width:"18%"},t.name),n.createElement("td",{width:"16%"},(100*t.zdf).toFixed(2),"%"),n.createElement("td",{width:"18%"},(100*t.big_rate).toFixed(2),"%"),n.createElement("td",{width:"18%"},s.formatNumber(+t.big_amount,2)),n.createElement("td",{width:"12%"},t.z_num),n.createElement("td",{width:"12%"},t.d_num),n.createElement("td",{width:"6%"}))}),n.createElement("tr",{key:"paddingBottom"},n.createElement("td",{style:{height:i+"px"}})))))),n.createElement("div",{className:"separator"}),n.createElement("div",{className:"stock-list"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"40%"},"股票名称"),n.createElement("th",{width:"30%"},"最新价"),n.createElement("th",{width:"30%"},"涨跌幅")))),n.createElement("div",{className:"body",ref:"stockListBody"},n.createElement("table",{className:"s-table stripe even top-header"},n.createElement("tbody",null,this.state.stocks&&this.state.stocks.map(function(t,r){return n.createElement("tr",{key:r,"data-symbol":t.c,onClick:e.setSymbolHandler},n.createElement("td",{width:"40%"},t.n),n.createElement("td",{width:"30%"},(+t.price).toFixed(2)),n.createElement("td",{width:"30%"},(100*t.p_change).toFixed(2),"%"))})))))))},PlateList.prototype.onScrollEnd=function(){var e=~~(-this._platelistScroller.y/30);this.loadPlates(this.state.sortKey,this.state.order,e)},PlateList.prototype.sortHandler=function(e){var t=e.target.dataset.key,r="desc";t===this.state.sortKey&&(r="desc"===this.state.order?"asc":"desc"),this.loadPlates(t,r,this.state.startIndex)},PlateList.prototype.selectHandler=function(e){var t=e.currentTarget.dataset.id;this.loadStocks(t)},PlateList.prototype.setSymbolHandler=function(e){this.context.chartLayout.setSymbol(e.currentTarget.dataset.symbol)},PlateList.prototype.loadPlates=function(e,t,r){var o=this;clearTimeout(this._pollPlateListTimer),l.getAllPlates(e,t,r,9).then(function(n){if(o._isMounted){var a=1e3*n.data.intver;o.setState({sortKey:e,order:t,startIndex:r,plates:n.data.list,total:n.data.total_count}),o._pollPlateListTimer=a?setTimeout(function(){return o.loadPlates(e,t,r)},a):-1}}).catch(function(n){return o._pollPlateListTimer=setTimeout(function(){return o.loadPlates(e,t,r)},1e4)})},PlateList.prototype.loadStocks=function(e){var t=this;clearTimeout(this._pollStockListTimer),l.getStockListByPlateId(e).then(function(r){if(t._isMounted){var o=1e3*r.data.intver;t.setState({activePlateId:e,stocks:r.data.list}),t._pollStockListTimer=o?setTimeout(function(){return t.loadStocks(e)},o):-1}}).catch(function(r){return t._pollStockListTimer=setTimeout(function(){return t.loadStocks(e)},1e4)})},PlateList.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},PlateList}(n.Component);t.default=c},PcI6:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("RCQf");var n=r("U7vG"),a=r("m1l+"),i=r("XErX"),s=r("f1k0"),l=r("5A/R"),c=function(e){function Realtime(){var t=e.call(this)||this;return t.state={tabIndex:0},t}return o(Realtime,e),Realtime.prototype.shouldComponentUpdate=function(e,t){var r=this.props,o=this.state;return r.stockInfo!==e.stockInfo||r.capitalFlowInfo!==e.capitalFlowInfo||r.height!==e.height||o.tabIndex!==t.tabIndex},Realtime.prototype.render=function(){var e=this.props.height,t=this.props.stockInfo,r=this.props.capitalFlowInfo,o=t.selling&&t.buying,c=t.ticks.length,u=0,h=0,d=0;return o?c?(u=.3,h=.25,d=.45):(u=.5,h=.5):c?(h=.5,d=.5):h=1,n.createElement("div",{className:"realtime-info"},o?n.createElement(a.default,{stockInfo:t,maxHeight:e*u}):null,n.createElement(i.default,{stockInfo:t,maxHeight:e*h})," : null",c?n.createElement("div",{className:"tab-wrapper",style:{height:e*d+"px"}},n.createElement("ul",{className:"tab-btn-group",onClick:this.switchTabPage.bind(this),onTouchStart:this.switchTabPage.bind(this)},n.createElement("li",{className:0===this.state.tabIndex?"on":"","data-index":"0"},"明细"),n.createElement("li",{className:1===this.state.tabIndex?"on":"","data-index":"1"},"资金")),n.createElement("div",{className:"tab-container"},0===this.state.tabIndex?n.createElement(s.default,{stockInfo:t,maxHeight:e*d-35}):null,1===this.state.tabIndex?n.createElement(l.default,{capitalFlowInfo:r,maxHeight:e*d-35}):null)):null)},Realtime.prototype.switchTabPage=function(e){var t=+e.target.dataset.index;this.setState({tabIndex:t})},Realtime}(n.Component);t.default=c},PjwK:function(e,t){},PxPp:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("H9vw"),n=1,a=function(){function GraphModel(e,t,r,o,a,i,s,l,c,u,h,d){void 0===d&&(d=null),this._isValid=!0,this._hover=!1,this._selected=!1,this._datasource=e,this._chart=t,this._priority=r,this._isPrice=o,this._isRemovable=a,this._isMain=i,this._isComparison=s,this._isVisible=l,this._styles=c,this._adapter=u,this._calc=h,this._input=d,this._id=n++,this._plots=[],this._cache={}}return Object.defineProperty(GraphModel.prototype,"input",{get:function(){return this._input},set:function(e){this._input=e,this._isValid=!1},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"styles",{get:function(){return this._styles},set:function(e){this._styles=e,this._plots.forEach(function(t,r){return t.style=e[r]}),this._isValid=!1},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"isPrice",{get:function(){return this._isPrice},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"isRemovable",{get:function(){return this._isRemovable},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"isMain",{get:function(){return this._isMain},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"isComparison",{get:function(){return this._isComparison},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected!==e&&(this._selected=e,this._isValid=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"isVisible",{get:function(){return this._isVisible},set:function(e){this._isVisible=e,this._isValid=!1},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"hover",{get:function(){return this._hover},set:function(e){this._hover!==e&&(this._hover=e,this._isValid=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"plots",{get:function(){return this._plots.slice(0)},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"datasource",{get:function(){return this._datasource},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),GraphModel.prototype.draw=function(e){this._plots.forEach(function(t){return t.draw(e)}),this._isValid=!0},GraphModel.prototype.getPrevBar=function(){var e=this._chart.crosshair.point;if(!e)return null;var t=this._chart.axisX,r=t.findTimeBarByX(e.x-t.barWidth);return r?this._cache[r.time]:null},GraphModel.prototype.getCurBar=function(){var e=this._chart.crosshair.point;if(!e)return null;var t=this._chart.axisX.findTimeBarByX(e.x);return t?this._cache[t.time]:null},GraphModel.prototype.getNextBar=function(){var e=this._chart.crosshair.point;if(!e)return null;var t=this._chart.axisX,r=t.findTimeBarByX(e.x+t.barWidth);return r?this._cache[r.time]:null},GraphModel.prototype.getRangeY=function(){return this._plots.reduce(function(e,t){var r=t.graphic.calcRangeY();return r?e?(r.max>e.max&&(e.max=r.max),r.min<e.min&&(e.min=r.min),e):{max:r.max,min:r.min}:e},null)},GraphModel.prototype.hitTest=function(e){void 0===e&&(e=!1);for(var t=this._plots.length-1;t>=0;t--)if(this._plots[t].hitTest())return e&&(this.selected=!0),this.hover=!0;return e&&(this.selected=!1),this.hover=!1},GraphModel.prototype.getVisibleBars=function(){if(this._visibleBarCache)return this._visibleBarCache;var e=this._datasource,t=this._chart.axisX.getVisibleTimeBars(),r=t[0],n=t[t.length-1];if(!r||!n)return[];var a=e.range(r.time,n.time);if(!a.length)return[];var i=[];o.setContext(e,this._adapter);for(var s=0,l=a.length,c=void 0,u=e.search(a[0].time),h=void 0;s<l;s++,u++)c=a[s],h=this._cache[c.time],h=this._calc(this._adapter(c),u,this._input),this._cache[c.time]=h,i.push(h);o.clearContext();for(var d,p,f,m=[],_=0,y=0,g=t.length,v=i.length;_<g&&y<v;)if(d=i[y],p=d?d[0]:null,f=t[_],p)if(p[1]===f.time){for(var b=0,E=d,x=E.length;b<x;b++)E[b]&&(E[b][0]=f.x);m.push(d),_++,y++}else p[1]>f.time?_++:y++;else _++,y++;return this._visibleBarCache=m},GraphModel.prototype.clearCache=function(){this._visibleBarCache=null,this._cache={}},GraphModel}();t.default=a},QKig:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("gd6M");var n=r("U7vG"),a=function(e){function FullScreen(){return null!==e&&e.apply(this,arguments)||this}return o(FullScreen,e),FullScreen.prototype.shouldComponentUpdate=function(){return!1},FullScreen.prototype.render=function(){return n.createElement("a",{ref:"btn",className:"full-screen",title:"全屏/取消",onClick:this.mouseclickhandler.bind(this)})},FullScreen.prototype.mouseclickhandler=function(e){this.props.onFullScreen()},FullScreen}(n.Component);t.default=a},RCQf:function(e,t){},"RR/l":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("rdLu"),a=r("PJh5"),i=r("uRx8"),s=r("+d7d"),l=r("Cqed"),c=r("9FmA"),u=function(e){function StockDatasource(t,r,o,n){void 0===n&&(n=0);var a=e.call(this,r,n)||this;return a._defaultSymbol=t,a._right=o,a._symbolInfo=null,a._plotList=new s.default,a}return o(StockDatasource,e),Object.defineProperty(StockDatasource.prototype,"right",{get:function(){return this._right},set:function(e){this._right=e},enumerable:!0,configurable:!0}),Object.defineProperty(StockDatasource.prototype,"symbol",{get:function(){return this._symbol},set:function(e){this._symbol=e},enumerable:!0,configurable:!0}),Object.defineProperty(StockDatasource.prototype,"defaultSymbol",{get:function(){return this._defaultSymbol},enumerable:!0,configurable:!0}),Object.defineProperty(StockDatasource.prototype,"symbolInfo",{get:function(){return this._symbolInfo},set:function(e){this._symbol=e.symbol,this._symbolInfo=e},enumerable:!0,configurable:!0}),StockDatasource.prototype.barAt=function(e){return this._plotList.get(e)},StockDatasource.prototype.first=function(){return this._plotList.first()},StockDatasource.prototype.last=function(){return this._plotList.last()},StockDatasource.prototype.slice=function(e,t){return this._plotList.slice(e,t)},StockDatasource.prototype.range=function(e,t){return this._plotList.range(e,t)},StockDatasource.prototype.loaded=function(){return this._plotList.size()},StockDatasource.prototype.search=function(e){return this._plotList.search(e)},StockDatasource.prototype.max=function(e,t){void 0===t&&(t=this.loaded());var r=this.slice(e,t),o=-Number.MAX_VALUE;return r.forEach(function(e){return o=e.high>o?e.high:o}),o},StockDatasource.prototype.min=function(e,t){void 0===t&&(t=this.loaded());var r=this.slice(e,t),o=Number.MAX_VALUE;return r.forEach(function(e){return o=e.low<o?e.low:o}),o},StockDatasource.prototype.loadTimeRange=function(e,t){var r=this,o=this._symbol,a=this._resolution,s=this._right;return e>t?Promise.resolve([]):new Promise(function(l,c){return i.getStockBars(o,a,s,e,t).then(function(e){var t=[];e.t.forEach(function(o,n){var a={amount:e.a[n],close:e.c[n],high:e.h[n],low:e.l[n],open:e.o[n],time:e.t[n],volume:e.v[n]};r._pulseInterval=e.interval,e.tr&&(a.turnover=e.tr[n]),e.zd&&(a.changerate=e.zd[n]),t.push(a)}),t=n.unique(t,function(e){return e.time}),o.toUpperCase()===r._symbol.toUpperCase()&&a===r._resolution?(r._plotList.merge(t),l(t)):c("response expired")}).catch(c)})},StockDatasource.prototype.loadHistory=function(e,t,r){var o=this;if(void 0===t&&(t=0),!this._hasMoreHistory)return Promise.resolve();var n=r||(this._plotList.first()?this._plotList.first().time:this.now()+86400),i=0,s=0;switch(this._resolution){case"1":i=n-24*~~(e/l.OPEN_MINITES_COUNT+1)*3600,s=864e3;break;case"5":i=n-24*~~(e/l.OPEN_MINITES_COUNT*5+1)*3600,s=1728e3;break;case"15":i=n-24*~~(e/l.OPEN_MINITES_COUNT*15+1)*3600,s=3888e3;break;case"30":i=n-24*~~(e/l.OPEN_MINITES_COUNT*30+1)*3600,s=7776e3;break;case"60":i=n-24*~~(e/l.OPEN_MINITES_COUNT*60+1)*3600,s=15552e3;break;case"D":i=n-2*e*24*3600,s=31104e3;break;case"W":i=n-1.5*e*7*24*3600,s=31104e3;break;case"M":i=n-1.2*e*30*24*3600,s=31104e3;break;default:throw new Error("unsupport resolution")}for(var c=a(1e3*i);-1===l.OPEN_DAYS.indexOf(c.day());)c.subtract(1,"days");return i=~~(c.toDate().getTime()/1e3),new Promise(function(r,a){return o.loadTimeRange(i,n).then(function(n){var l=o._plotList.first()?o._plotList.first().time:o.now(),c=n.length;t+=c,t>=e?r():l-i>=s?(o._hasMoreHistory=!1,r()):o.loadHistory(e,t,i).then(r).catch(a)}).catch(a)})},StockDatasource.prototype.resolveSymbol=function(e){var t=this;return i.resolveSymbol(e).then(function(e){if(!e.description)return t.resolveSymbol(t._defaultSymbol);t._symbolInfo={description:e.description,exchange:e["exchange-listed"],symbol:e.symbol,type:e.type},t._symbol=e.symbol})},StockDatasource.prototype.searchSymbols=function(e){return new Promise(function(t){return i.searchSymbols(e).then(function(e){return t(e.map(function(e){return{description:e.description,exchange:e.exchange,symbol:e.symbol,type:e.type}}))})})},StockDatasource.prototype.clearCache=function(){e.prototype.clearCache.call(this),this._plotList.clear()},StockDatasource}(c.Datasource);t.StockDatasource=u},SjNc:function(e,t){},TsRb:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("U7vG"),a=r("NBiX"),i=function(e){function AxisX(t,r){var o=e.call(this,t,r)||this;return o._axisX=r.chartLayout.axisx,o.moveHandler=o.moveHandler.bind(o),o.startHandler=o.startHandler.bind(o),o.endHandler=o.endHandler.bind(o),o}return o(AxisX,e),AxisX.prototype.componentDidMount=function(){var e=this._axisX;e.ctx=this.refs.canvas.getContext("2d"),e.width=this.props.width,e.height=this.props.height,document.addEventListener("mousemove",this.moveHandler),document.addEventListener("touchmove",this.moveHandler),document.addEventListener("mouseup",this.endHandler),document.addEventListener("touchend",this.endHandler)},AxisX.prototype.componentWillUnmount=function(){document.removeEventListener("mousemove",this.moveHandler),document.removeEventListener("touchmove",this.moveHandler),document.removeEventListener("mouseup",this.endHandler),document.removeEventListener("touchend",this.endHandler)},AxisX.prototype.componentDidUpdate=function(){var e=this._axisX,t=this.refs.canvas,r=this.props.width,o=this.props.height;e.width=r,e.height=o,t.width=r,t.height=o,t.getContext("2d")},AxisX.prototype.shouldComponentUpdate=function(e){var t=this.props;return t.width!==e.width||t.height!==e.height},AxisX.prototype.render=function(){var e=this.props.width,t=this.props.height;return n.createElement("div",{className:"chart-line"},n.createElement("div",{className:"chart-axisx",style:{height:t,width:e}},n.createElement("canvas",{ref:"canvas",width:e,height:t,onMouseDown:this.startHandler,onTouchStart:this.startHandler})))},AxisX.prototype.moveHandler=function(e){if(this._dragBarWidthStart){var t=this._axisX,r=t.width,o=e.changedTouches?e.changedTouches[0].pageX:e.pageX,n=t.barWidth,a=r<=this._dragPosX?1:1+(this._dragPosX-o)/r;t.barWidth=n*a,a=t.barWidth/n,t.offset*=a,this._dragPosX=o}},AxisX.prototype.startHandler=function(e){e.touches?(e.preventDefault(),1===e.touches.length&&(this._dragPosX=e.touches[0].pageX,this._dragBarWidthStart=!0)):(this._dragPosX=e.pageX,this._dragBarWidthStart=!0)},AxisX.prototype.endHandler=function(){this._dragBarWidthStart=!1},AxisX.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},AxisX}(n.Component);t.default=i},UALi:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("KTML"),n=function(){function PlotModel(e,t,r,o){this.priceLabels=[],this._graph=e,this._index=t,this._style=o,this._originalShape=r,this.shape=r}return Object.defineProperty(PlotModel.prototype,"style",{get:function(){return this._style},set:function(e){this._style=e,this._graphic.style=e},enumerable:!0,configurable:!0}),Object.defineProperty(PlotModel.prototype,"shape",{get:function(){return this._shape},set:function(e){var t=e===this._originalShape?this._style:{};switch(this._shape=e,e){case"line":this._graphic=new o.LineChartRenderer(this,t);break;case"mountain":this._graphic=new o.MountainChartRenderer(this,t);break;case"column":this._graphic=new o.ColumnChartRenderer(this,t);break;case"candle":this._graphic=new o.CandleChartRenderer(this,t);break;case"histogram":this._graphic=new o.HistogramChartRenderer(this,t);break;case"band":this._graphic=new o.BandRenderer(this,t);break;case"inflection":case"inflection2":this._graphic=new o.InflectionRenderer(this);break;default:throw"unsupported chart shape"}},enumerable:!0,configurable:!0}),Object.defineProperty(PlotModel.prototype,"graphic",{get:function(){return this._graphic},enumerable:!0,configurable:!0}),Object.defineProperty(PlotModel.prototype,"graph",{get:function(){return this._graph},enumerable:!0,configurable:!0}),PlotModel.prototype.draw=function(e){e.save(),this._graphic.draw(e),e.restore(),this._graph.selected&&this._graphic.drawSelection()},PlotModel.prototype.hitTest=function(){return this._graphic.hitTest()},PlotModel.prototype.getVisibleBars=function(){for(var e=this._graph.isVisible?this._graph.getVisibleBars():[],t=[],r=0,o=e.length,n=this._index,a=void 0;r<o;r++)(a=e[r][n])&&t.push(a);return t},PlotModel.prototype.getPrevBar=function(){var e=this._graph.getPrevBar();return e?e[this._index]:null},PlotModel.prototype.getCurBar=function(){var e=this._graph.getCurBar();return e?e[this._index]:null},PlotModel.prototype.getNextBar=function(){var e=this._graph.getNextBar();return e?e[this._index]:null},PlotModel}();t.default=n},UYip:function(e,t){},"Uu/m":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("rdLu"),a=r("EVIZ"),i=function(e){function WavePatternRenderer(t,r,o){var n=e.call(this,t)||this;return n._bwPoints=r,n._swPoints=o,n}return o(WavePatternRenderer,e),WavePatternRenderer.prototype.draw=function(e){var t,r,o=this._bwPoints,n=this._swPoints,a=this._chart,i=a.axisX,s=a.axisY,l=o.length,c=null;e.save(),e.lineWidth=3,e.strokeStyle="rgba( 60, 120, 216, 1)",e.setLineDash([6,6]),e.beginPath(),l&&(c=o[0],t=~~i.getXByTime(c.time),r=~~s.getYByValue(c.value),e.moveTo(t,r));for(var u=1;u<l;u++)c=o[u],t=~~i.getXByTime(c.time),r=~~s.getYByValue(c.value),e.lineTo(t,r);e.stroke(),e.lineWidth=3,e.beginPath(),(l=n.length)&&(c=n[0],t=~~i.getXByTime(c.time),r=~~s.getYByValue(c.value),e.moveTo(t,r));for(var u=1;u<l;u++)c=n[u],t=~~i.getXByTime(c.time),r=~~s.getYByValue(c.value),e.lineTo(t,r);e.stroke(),e.restore()},WavePatternRenderer.prototype.hitTest=function(){return!1},WavePatternRenderer.prototype.isNowVisible=function(){var e=this._chart.axisX.getVisibleTimeBars(),t=e[0],r=e[e.length-1],o=n.pluck(this._bwPoints,"time"),a=n.pluck(this._swPoints,"time");return!(t.time>Math.max(n.max(o),n.max(a))||r.time<n.min(o))},WavePatternRenderer}(a.BasePatternRenderer);t.WavePatternRenderer=i},Vfj7:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("oJNF"),a=r("Cqed"),i=function(e){function VertLineRenderer(){return null!==e&&e.apply(this,arguments)||this}return o(VertLineRenderer,e),Object.defineProperty(VertLineRenderer.prototype,"vertexes",{get:function(){var e=this._chart.axisY.range;return this._vertexes.map(function(t){return{time:t.time,value:(e.max+e.min)/2}})},enumerable:!0,configurable:!0}),VertLineRenderer.prototype.drawTool=function(e){var t=this._chart,r=t.axisX,o=this._vertexes[0],n=~~r.getXByTime(o.time);e.strokeStyle="#000",e.lineWidth=1,e.translate(.5,0),e.beginPath(),e.moveTo(n,0),e.lineTo(n,t.height),e.stroke()},VertLineRenderer.prototype.hitTestTool=function(){var e=this._chart.axisX,t=this.getCursor(),r=this._vertexes[0];return Math.abs(t.x-~~e.getXByTime(r.time))<a.HIT_TEST_TOLERANCE},VertLineRenderer.prototype.isFinished=function(){return 1===this._vertexes.length},VertLineRenderer}(n.BaseToolRenderer);t.VertLineRenderer=i},Vq7t:function(e,t){},VzTM:function(e,t){},W60S:function(e,t){},WE1R:function(e,t){},WOwf:function(e,t){},Ww5v:function(e,t){},XErX:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("dx9y");var n=r("U7vG"),a=r("bHfy"),i=r("wRi7"),s=function(e){function StockDetail(){return null!==e&&e.apply(this,arguments)||this}return o(StockDetail,e),StockDetail.prototype.shouldComponentUpdate=function(e){var t=this.props;return t.stockInfo!==e.stockInfo||t.maxHeight!==e.maxHeight},StockDetail.prototype.componentDidMount=function(){this._stockInfoScroll=new a(this.refs.container,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0})},StockDetail.prototype.componentDidUpdate=function(){this._stockInfoScroll.refresh()},StockDetail.prototype.componentWillUnmount=function(){this._stockInfoScroll.destroy(),this._stockInfoScroll=null},StockDetail.prototype.render=function(){var e=this.props.stockInfo;return n.createElement("div",{className:"chart-stock-detail",ref:"container",style:{maxHeight:this.props.maxHeight+"px"}},n.createElement("table",null,n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{width:"42"},"昨收"),n.createElement("td",{width:"76"},e.preClose),n.createElement("th",{width:"46"},"成交量"),n.createElement("td",{width:"74"},i.formatNumber(e.volume/100,2),"手")),n.createElement("tr",null,n.createElement("th",null,"今开"),n.createElement("td",{className:e.open>e.preClose?"positive":"negtive"},e.open),n.createElement("th",null,"成交额"),n.createElement("td",null,i.formatNumber(e.amount,2))),n.createElement("tr",null,n.createElement("th",null,"最高"),n.createElement("td",{className:e.high>e.preClose?"positive":"negtive"},e.high),n.createElement("th",null,"振幅"),n.createElement("td",null,e.amplitude,"%")),n.createElement("tr",null,n.createElement("th",null,"最低"),n.createElement("td",{className:e.low>e.preClose?"positive":"negtive"},e.low),n.createElement("th",null,"换手率"),n.createElement("td",null,e.turnover?e.turnover+"%":"--")),n.createElement("tr",null,n.createElement("th",null,"涨停"),n.createElement("td",{className:"positive"},(1.1*e.preClose).toFixed(2)),n.createElement("th",null,"内盘"),n.createElement("td",{className:"positive"},e.inVol?e.inVol:"--")),n.createElement("tr",null,n.createElement("th",null,"跌停"),n.createElement("td",{className:"negtive"},(.9*e.preClose).toFixed(2)),n.createElement("th",null,"外盘"),n.createElement("td",{className:"negtive"},e.outVol?e.outVol:"--")))))},StockDetail}(n.Component);t.default=s},YSPl:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("85aO"),r("Vq7t"),r("unwN");var n=r("U7vG"),a=r("rdLu"),i=r("NBiX"),s=["5","15","30","60","D","W","M"],l={1:"分时",5:"5分钟",15:"15分钟",30:"30分钟",60:"60分钟",D:"日K",W:"周K",M:"月K"},c=function(e){function ResolutionOption(t,r){var o=e.call(this,t,r)||this;return o._resolution="D",o._chartLayout=r.chartLayout,o.state={showMoreResolution:!1},o.updateView=o.updateView.bind(o),o.resolutionSelectHandler=o.resolutionSelectHandler.bind(o),o.showMoreResolutionHandler=o.showMoreResolutionHandler.bind(o),o.hideMoreResolutionHandler=o.hideMoreResolutionHandler.bind(o),o}return o(ResolutionOption,e),ResolutionOption.prototype.componentDidMount=function(){this._chartLayout.addListener("resolution_change",this.updateView),document.addEventListener("mousedown",this.hideMoreResolutionHandler),document.addEventListener("touchstart",this.hideMoreResolutionHandler)},ResolutionOption.prototype.componentWillUnmount=function(){this._chartLayout.removeListener("resolution_change",this.updateView),document.removeEventListener("mousedown",this.hideMoreResolutionHandler),document.removeEventListener("touchstart",this.hideMoreResolutionHandler)},ResolutionOption.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.props,e)||!a.isEqual(this.state,t)},ResolutionOption.prototype.render=function(){var e=this,t=this._chartLayout.mainDatasource.resolution;return"1"!==t&&(this._resolution=t),n.createElement("div",{className:"chart-resolution chart-btn-group"},n.createElement("a",{href:"javascript:;",className:"btn "+("1"===t?"active":""),"data-value":1,onClick:this.resolutionSelectHandler},l[1]),n.createElement("a",{href:"javascript:;",className:"btn "+(this._resolution===t?"active":""),"data-value":this._resolution,onClick:this.resolutionSelectHandler},l[this._resolution]),n.createElement("a",{href:"javascript:;",className:"btn btn-more",onClick:this.showMoreResolutionHandler},n.createElement("i",null)),this.state.showMoreResolution?n.createElement("ul",{className:"popup-menu"},s.map(function(t){return n.createElement("li",{key:t,"data-value":t,onMouseDown:e.resolutionSelectHandler,onTouchStart:e.resolutionSelectHandler},l[t])})):null)},ResolutionOption.prototype.updateView=function(){this.forceUpdate()},ResolutionOption.prototype.resolutionSelectHandler=function(e){e.touches&&e.preventDefault();var t=this._chartLayout,r=e.target.dataset.value;t.mainDatasource.resolution!==r&&this.props.onResolutionChange(r)},ResolutionOption.prototype.showMoreResolutionHandler=function(){this.setState({showMoreResolution:!0})},ResolutionOption.prototype.hideMoreResolutionHandler=function(e){this.state.showMoreResolution&&(e.touches&&e.preventDefault(),this.setState({showMoreResolution:!1}))},ResolutionOption.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},ResolutionOption}(n.Component);t.default=c},Yd5c:function(e,t){},ZUoU:function(e,t){},aTSk:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("rdZE");var n=r("U7vG"),a=r("rdLu"),i=r("Cqed"),s=r("Fi2k"),l=r("NBiX"),c=r("dZHW"),u=r("ALsY"),h=function(e){function Chart(t,r){var o=e.call(this,t)||this;return o._v=0,o.state={hover:!1,cursor:"crosshair",showEditModeToolTip:!1,pointX:0,pointY:0},o._chartLayout=r.chartLayout,o.dragMoveHandler=o.dragMoveHandler.bind(o),o.gestureMoveHandler=o.gestureMoveHandler.bind(o),o.mouseDownHandler=o.mouseDownHandler.bind(o),o.touchStartHandler=o.touchStartHandler.bind(o),o.mouseMoveHandler=o.mouseMoveHandler.bind(o),o.touchMoveHandler=o.touchMoveHandler.bind(o),o.touchEndHandler=o.touchEndHandler.bind(o),o.mouseUpPageHanlder=o.mouseUpPageHanlder.bind(o),o.touchEndPageHandler=o.touchEndPageHandler.bind(o),o.contextMenuHanlder=o.contextMenuHanlder.bind(o),o.mouseOver=o.mouseOver.bind(o),o.mouseOut=o.mouseOut.bind(o),o.toolTipHandler=o.toolTipHandler.bind(o),o.hitHandler=o.hitHandler.bind(o),o.defaultCursorChangeHandler=o.defaultCursorChangeHandler.bind(o),o}return o(Chart,e),Chart.prototype.shouldComponentUpdate=function(e,t){var r=this.props;return e.chart!==r.chart||e.width!==r.width||e.height!==r.height||!a.isEqual(this.state,t)},Chart.prototype.componentDidMount=function(){var e=this._chartLayout,t=this.props.chart,r=~~this.props.width-i.AXIS_Y_WIDTH,o=~~this.props.height,n=this.refs.canvas,a=this.refs.topCanvas;t.width=r,t.height=o,t.ctx=n.getContext("2d"),t.topCtx=a.getContext("2d"),e.addListener("graph_hover",this.hitHandler),e.addListener("cursor_change",this.defaultCursorChangeHandler),e.addListener("cursor_move",this.toolTipHandler),e.addListener("drawingtool_end",this.toolTipHandler),e.addListener("editmode_change",this.toolTipHandler),document.addEventListener("mousemove",this.dragMoveHandler),document.addEventListener("touchmove",this.dragMoveHandler),document.addEventListener("touchmove",this.gestureMoveHandler),document.addEventListener("mouseup",this.mouseUpPageHanlder),document.addEventListener("touchend",this.touchEndPageHandler)},Chart.prototype.componentWillUnmount=function(){var e=this._chartLayout;e.removeListener("graph_hover",this.hitHandler),e.removeListener("cursor_change",this.defaultCursorChangeHandler),e.removeListener("cursor_move",this.toolTipHandler),e.removeListener("drawingtool_end",this.toolTipHandler),e.removeListener("editmode_change",this.toolTipHandler),document.removeEventListener("mousemove",this.dragMoveHandler),document.removeEventListener("touchmove",this.dragMoveHandler),document.removeEventListener("touchmove",this.gestureMoveHandler),document.removeEventListener("mouseup",this.mouseUpPageHanlder),document.removeEventListener("touchend",this.touchEndPageHandler)},Chart.prototype.componentDidUpdate=function(e){var t=this.props,r=this.props.chart,o=this.refs.canvas,n=this.refs.topCanvas;if(t.width!==e.width||t.height!==e.height){var a=~~this.props.width-i.AXIS_Y_WIDTH,s=~~this.props.height;o.width=a,o.height=s,n.width=a,n.height=s,o.getContext("2d"),n.getContext("2d"),r.width=a,r.height=s}},Chart.prototype.render=function(){var e=this.props.chart,t=this.props.width,r=this.props.width-i.AXIS_Y_WIDTH,o=this.props.height;return n.createElement("div",{className:"chart-line "+(e.isMain?"main":""),style:{width:t}},n.createElement("div",{className:"chart-plot",style:{height:o+"px",width:r+"px",cursor:this.state.cursor}},n.createElement(s.default,{chart:e}),n.createElement("canvas",{ref:"canvas",width:r,height:o}),n.createElement("canvas",{ref:"topCanvas",width:r,height:o,onContextMenu:this.contextMenuHanlder,onMouseDown:this.mouseDownHandler,onTouchStart:this.touchStartHandler,onMouseMove:this.mouseMoveHandler,onTouchMove:this.touchMoveHandler,onTouchEnd:this.touchEndHandler,onMouseOver:this.mouseOver,onMouseOut:this.mouseOut}),this.state.showEditModeToolTip?n.createElement("div",{className:"edit-mode-tooltip",style:{right:this.state.pointX+"px",bottom:this.state.pointY+"px"}},"1.拖动十字线定义第一点.",n.createElement("br",null),"2.点击任意位置确定第一个停止位置"):null,e.isMain?n.createElement(c.default,{chart:e}):null),n.createElement(u.default,{axis:e.axisY,height:o,width:i.AXIS_Y_WIDTH}))},Chart.prototype.momentumMove=function(e){var t=this,r=this._chartLayout.axisx;this._momentumTimer=setTimeout(function(){Math.abs(e)>10&&(r.offset+=30*e/1e3,e-=.3*e,t.momentumMove(e))},30)},Chart.prototype.stopMomentum=function(){clearTimeout(this._momentumTimer)},Chart.prototype.toolTipHandler=function(){var e=this._chartLayout,t=this.props.chart,r=t.crosshair.point;if(t.hover&&e.isEditMode){var o=~~this.props.width-i.AXIS_Y_WIDTH,n=~~this.props.height;this.setState({showEditModeToolTip:!0,pointX:o-r.x+8,pointY:n-r.y+8})}else this.setState({showEditModeToolTip:!1})},Chart.prototype.hitHandler=function(e){this._chartLayout.hoverChart===this.props.chart&&this.setState({cursor:e?"pointer":this._chartLayout.defaultCursor})},Chart.prototype.defaultCursorChangeHandler=function(e){this.setState({cursor:this.state.hover?"pointer":this._chartLayout.defaultCursor})},Chart.prototype.mouseOver=function(){this.props.chart.hover=!0},Chart.prototype.mouseOut=function(){this.props.chart.hover=!1,this.context.chartLayout.setCursorPoint(null)},Chart.prototype.mouseDownHandler=function(e){var t=this._chartLayout,r=this.props.chart,o=r.offset,n={x:e.pageX-o.left,y:e.pageY-o.top};if(0!==t.mainDatasource.loaded()){if(t.cancelSelectedGraph(),r.crosshair.point||t.setCursorPoint(n),t.selectedDrawingTool)return r.drawingToolBegin(),r.drawingToolSetVertex(n),void(r.creatingDrawingTool.isFinished()&&r.drawingToolEnd());if(r.creatingDrawingTool)return r.drawingToolSetVertex(n),void(r.creatingDrawingTool.isFinished()&&r.drawingToolEnd());r.hitTest(!0),r.editingDrawingTool?t.willEraseDrawingTool?r.removeDrawingTool(r.editingDrawingTool):(r.editingDrawingTool.isEditing=!0,this._dragDrawingToolStart=!0,this._dragPosX=n.x,this._dragPosY=n.y):(this._dragOffsetStart=!0,this._dragPosX=n.x,this._dragPosY=n.y)}},Chart.prototype.touchStartHandler=function(e){var t=this,r=1===e.touches.length,o=2===e.touches.length,n=this._chartLayout,a=this.props.chart;if(e.preventDefault(),0!==n.mainDatasource.loaded()){this._cancelClick=!1,n.cancelSelectedGraph(),a.hover||n.setHoverChart(a),this.stopMomentum();var i=a.offset,s={x:e.touches[0].pageX-i.left,y:e.touches[0].pageY-i.top};if(r){if(!n.isEditMode){if(n.setCursorPoint(s),n.selectedDrawingTool)return a.drawingToolBegin(),a.drawingToolSetVertex(s),void(a.creatingDrawingTool.isFinished()&&a.drawingToolEnd());if(a.creatingDrawingTool)return a.drawingToolSetVertex(s),void(a.creatingDrawingTool.isFinished()&&a.drawingToolEnd());this._longTapCounter=setTimeout(function(){t.contextMenuHanlder()},500)}a.hitTest(!0),a.editingDrawingTool?n.willEraseDrawingTool?a.removeDrawingTool(a.editingDrawingTool):(a.editingDrawingTool.isEditing=!0,this._dragDrawingToolStart=!0,this._dragPosX=s.x,this._dragPosY=s.y):(this._lastMovePosition=s.x,this._lastMoveTime=e.timeStamp,this._dragOffsetStart=!0,this._dragPosX=s.x,this._dragPosY=s.y)}else if(o){var l=Math.abs(e.touches[0].clientX-e.touches[1].clientX),c=Math.abs(e.touches[0].clientY-e.touches[1].clientY);return this._dragOffsetStart=!1,void(l>=c?(this._pinchHorzStart=!0,this._pinchOffset=l):(this._pinchVertStart=!0,this._pinchOffset=c))}}},Chart.prototype.touchEndHandler=function(e){var t=1===e.changedTouches.length,r=this._chartLayout,o=this.props.chart,n=o.crosshair.point;e.preventDefault(),clearTimeout(this._longTapCounter),r.isEditMode&&t&&!this._cancelClick&&(r.selectedDrawingTool?(o.drawingToolBegin(),o.drawingToolSetVertex({x:n.x,y:n.y}),o.creatingDrawingTool.isFinished()&&o.drawingToolEnd()):o.creatingDrawingTool&&(o.drawingToolSetVertex({x:n.x,y:n.y}),o.creatingDrawingTool.isFinished()&&o.drawingToolEnd()))},Chart.prototype.mouseUpPageHanlder=function(e){var t=this.props.chart;this._dragDrawingToolStart&&(t.editingDrawingTool.isEditing=!1,t.editingDrawingTool=null,this._dragDrawingToolStart=!1),this._dragOffsetStart=!1},Chart.prototype.touchEndPageHandler=function(e){var t=this.props.chart;this._dragOffsetStart&&e.timeStamp-this._lastMoveTime<60&&Math.abs(this._v)>100&&this.momentumMove(this._v),this._dragDrawingToolStart&&(t.editingDrawingTool.isEditing=!1,t.editingDrawingTool=null,this._dragDrawingToolStart=!1),this._dragOffsetStart=!1,this._pinchHorzStart=!1,this._pinchVertStart=!1,this._pinchOffset=0,this._v=0},Chart.prototype.mouseMoveHandler=function(e){var t=this._chartLayout,r=this.props.chart,o=r.offset,n={x:e.pageX-o.left,y:e.pageY-o.top};t.setCursorPoint(n),this._dragOffsetStart||this._dragDrawingToolStart||r.creatingDrawingTool||r.editingDrawingTool||r.hitTest()},Chart.prototype.touchMoveHandler=function(e){var t=this._chartLayout,r=this.props.chart,o=r.offset,n={x:e.touches[0].pageX-o.left,y:e.touches[0].pageY-o.top};clearTimeout(this._longTapCounter),this._pinchHorzStart||this._pinchVertStart||(this._cancelClick=!0,t.isEditMode||t.setCursorPoint(n))},Chart.prototype.dragMoveHandler=function(e){if(this._dragDrawingToolStart||this._dragOffsetStart){var t=!!e.touches,r=this.props.chart,o=this._chartLayout,n=r.axisX,a=r.axisY,i=r.offset,s=t?{x:e.touches[0].pageX-i.left,y:e.touches[0].pageY-i.top}:{x:e.pageX-i.left,y:e.pageY-i.top};if(this._dragDrawingToolStart){var l=n.findTimeBarByX(s.x).x,c=n.findTimeBarByX(this._dragPosX).x,u=l>=c?~~((l-c)/n.barWidth+.5):~~((l-c)/n.barWidth-.5),h=a.getValueByY(s.y-i.top)-a.getValueByY(this._dragPosY-i.top);r.editingDrawingTool.moveBy(u,h),this._dragPosX=s.x,this._dragPosY=s.y}else if(this._dragOffsetStart)if(o.isEditMode){var d=r.crosshair.point;o.setCursorPoint({x:d.x+s.x-this._dragPosX,y:d.y+s.y-this._dragPosY}),this._dragPosX=s.x,this._dragPosY=s.y}else{var p=n.offset,f=p+s.x-this._dragPosX,m=e.timeStamp;n.offset=f,this._dragPosX=s.x,t&&(this._v=(s.x-this._lastMovePosition)/(m-this._lastMoveTime)*1e3,this._lastMovePosition=s.x,this._lastMoveTime=m)}}},Chart.prototype.gestureMoveHandler=function(e){if(this._pinchHorzStart||this._pinchVertStart){var t=this.props.chart,r=t.axisX,o=t.axisY;if(this._pinchHorzStart){var n=Math.abs(e.touches[1].pageX-e.touches[0].pageX),a=r.barWidth,i=n/this._pinchOffset;r.barWidth=a*i,i=r.barWidth/a,r.offset*=i,this._pinchOffset=n}else if(this._pinchVertStart){var n=Math.abs(e.touches[1].pageY-e.touches[0].pageY),s=n-this._pinchOffset,l=o.height,c=o.margin,u=l-2*c,i=2*s/l;o.margin=(l-u*(1+i))/2,this._pinchOffset=n}}},Chart.prototype.contextMenuHanlder=function(e){e&&e.preventDefault();var t=this._chartLayout,r=this.props.chart.offset,o=e?parseInt(e.pageX):this._dragPosX+r.left,n=e?parseInt(e.pageY):this._dragPosY+r.top;t.setContextMenu({x:o,y:n,items:[{name:"定位时间",type:"gotodate"}],actions:function(e){"gotodate"===e&&t.toggleGoToDate(!0)}})},Chart.contextTypes={chartLayout:n.PropTypes.instanceOf(l.default)},Chart}(n.Component);t.default=h},b2uV:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("BzvE"),a=r("Cqed"),i=r("lKDe"),s=r("FHs6");t.INITIAL_OFFSET=50,t.MAX_BAR_WIDTH=30,t.MIN_BAR_WIDTH=2;var l=function(e){function AxisXModel(r,o){var n=e.call(this)||this;return n._barWidth=8,n._offset=-t.INITIAL_OFFSET,n._isValid=!1,n._datasource=r,n._crosshair=o,n._tickmark=new s.default(n),n._graphic=new i.default(n),n}return o(AxisXModel,e),Object.defineProperty(AxisXModel.prototype,"barWidth",{get:function(){return this._barWidth},set:function(e){e<t.MIN_BAR_WIDTH?this._barWidth=t.MIN_BAR_WIDTH:e>t.MAX_BAR_WIDTH?this._barWidth=t.MAX_BAR_WIDTH:this._barWidth=e,this._isValid=!1,this.emit("barwidth_change",this._barWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(AxisXModel.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),Object.defineProperty(AxisXModel.prototype,"offset",{get:function(){return this._offset},set:function(e){e<this.getMinOffset()?this._offset=this.getMinOffset():e>this.getMaxOffset()?this._offset=this.getMaxOffset():this._offset=e,this._isValid=!1,this.emit("offset_change",this._offset)},enumerable:!0,configurable:!0}),Object.defineProperty(AxisXModel.prototype,"datasource",{get:function(){return this._datasource},enumerable:!0,configurable:!0}),Object.defineProperty(AxisXModel.prototype,"graphic",{get:function(){return this._graphic},enumerable:!0,configurable:!0}),Object.defineProperty(AxisXModel.prototype,"tickmark",{get:function(){return this._tickmark},enumerable:!0,configurable:!0}),Object.defineProperty(AxisXModel.prototype,"crosshair",{get:function(){return this._crosshair},enumerable:!0,configurable:!0}),AxisXModel.prototype.getVisibleTimeBars=function(){if(this._visibleTimeBars)return this._visibleTimeBars;var e,t,r=[],o=this._datasource,n=o.resolution,a=this.width,i=this._barWidth,s=o.loaded(),l=this._offset,c=s-~~(l/i),u=a-i/2;if(c>s)c=s;else if(c<0)return r;u+=l>=0?l%i:l;var h=c-Math.ceil(u/i)-1;h<=0&&(h=0);var d=o.slice(h,c);if(!d.length)return r;e=u;for(var p=d.length-1;p>=0;p--,e-=i)r.unshift({time:d[p].time,x:e});for(t=r[0].time;e>=0;)t=this.getPrevTickTime(t,n),r.unshift({time:t,x:e}),e-=i;for(e=u,t=r[r.length-1].time;e<=a-i/2;)e+=i,t=this.getNextTickTime(t,n),r.push({time:t,x:e});return this._visibleTimeBars=r},AxisXModel.prototype.draw=function(e){void 0===e&&(e=!1);var t=this.ctx,r=this.width,o=this.height;e||(this._visibleTimeBars=null,this._tickmark.clearTickmarks()),t.save(),t.fillStyle="#ffffff",t.fillRect(0,0,r,o),this._graphic.draw(),t.restore(),this._isValid=!0},AxisXModel.prototype.findTimeBarByX=function(e){var t=this._barWidth,r=this.getVisibleTimeBars(),o=r[0],n=r[r.length-1],a=this._datasource.resolution;if(!r.length)return null;if(e>n.x){var i=n.x,s=~~((e-i+.5*t)/t),l=n.time;for(e=i+s*t;s--;)l=this.getNextTickTime(l,a);return{x:e,time:l}}if(e<o.x){var i=o.x,s=~~((i-e+.5*t)/t),l=o.time;for(e=i-s*t;s--;)l=this.getPrevTickTime(l,a);return{x:e,time:l}}var i=o.x,s=~~((e-i+.5*t)/t);return r[s]},AxisXModel.prototype.getXByTime=function(e){var t=this.getVisibleTimeBars(),r=this._barWidth,o=this._datasource,n=t[0],a=t[t.length-1];if(!t.length)return null;if(e>=n.time&&e<=a.time)return t[this.search(e)].x;for(var i=e<n.time?n.x:a.x,s=o.resolution,l=0,c=e<n.time?n.time:a.time;c!==e;)c<e?(c=this.getNextTickTime(c,s),l++):(e=this.getNextTickTime(e,s),l--);return i+l*r},AxisXModel.prototype.getNextTickTime=function(e,t){var r;switch(t){case"1":e+=60,r=new Date(1e3*e);break;case"5":e+=300,r=new Date(1e3*e);break;case"15":e+=900,r=new Date(1e3*e);break;case"30":e+=1800,r=new Date(1e3*e);break;case"60":e+=3600,r=new Date(1e3*e);break;case"D":e+=86400,r=new Date(1e3*e);break;case"W":for(e+=604800,r=new Date(1e3*e);5!==r.getDay();)r.setTime(r.getTime()+864e5);break;case"M":if(r=new Date(1e3*e),11===r.getMonth()?(r.setFullYear(r.getFullYear()+1),r.setDate(1),r.setMonth(1),r.setTime(r.getTime()-864e5)):10===r.getMonth()?(r.setFullYear(r.getFullYear()+1),r.setDate(1),r.setMonth(0),r.setTime(r.getTime()-864e5)):(r.setDate(1),r.setMonth(r.getMonth()+2),r.setTime(r.getTime()-864e5)),-1===a.OPEN_DAYS.indexOf(r.getDay())){for(var o=r.getDay(),n=0;-1===a.OPEN_DAYS.indexOf(o);)o=o-1<0?6:o-1,n++;r.setTime(r.getTime()-864e5*n)}}if(t<="60")for(var i=0,s=a.OPEN_TIME_RANGE.length,l=r.getHours(),c=r.getMinutes();i<s;i++){var u=a.OPEN_TIME_RANGE[i+1],h=a.OPEN_TIME_RANGE[i],d=h[1][0],p=h[1][1],f=void 0,m=void 0;if(u){if(f=u[0][0],m=u[0][1],(l>d||l===d&&c>p)&&(l<f||l===f&&c<m)){r.setHours(f+l-d),r.setMinutes(m+c-p);break}}else if(l>d||l===d&&c>p){u=a.OPEN_TIME_RANGE[0],f=u[0][0],m=u[0][1],r.setTime(r.getTime()+864e5),r.setHours(f+l-d),r.setMinutes(m+c-p);break}}if(-1===a.OPEN_DAYS.indexOf(r.getDay())){for(var o=r.getDay(),n=0;-1===a.OPEN_DAYS.indexOf(o%7);)n++,o++;r.setTime(r.getTime()+864e5*n)}return r.getTime()/1e3},AxisXModel.prototype.getPrevTickTime=function(e,t){var r;switch(t){case"1":e-=60,r=new Date(1e3*e);break;case"5":e-=300,r=new Date(1e3*e);break;case"15":e-=900,r=new Date(1e3*e);break;case"30":e-=1800,r=new Date(1e3*e);break;case"60":e-=3600,r=new Date(1e3*e);break;case"D":e-=86400,r=new Date(1e3*e);break;case"W":for(e-=604800,r=new Date(1e3*e);5!==r.getDay();)r.setTime(r.getTime()+864e5);break;case"M":if(r=new Date(1e3*e),r.setDate(1),r.setTime(r.getTime()-864e5),-1===a.OPEN_DAYS.indexOf(r.getDay())){for(var o=r.getDay(),n=0;-1===a.OPEN_DAYS.indexOf(o);)o=o-1<0?6:o-1,n++;r.setTime(r.getTime()-864e5*n)}}if(t<="60")for(var i=a.OPEN_TIME_RANGE.length-1,s=r.getHours(),l=r.getMinutes();i>=0;i--){var c=a.OPEN_TIME_RANGE[i-1],u=a.OPEN_TIME_RANGE[i],h=u[0][0],d=u[0][1],p=void 0,f=void 0;if(c){if(p=c[1][0],f=c[1][1],(s>p||s===p&&l>f)&&(s<h||s===h&&l<d)){r.setHours(p-(s-h)),r.setMinutes(f-(l-d));break}(s===p&&l===f||s===h&&l===d)&&(r.setHours(p),r.setMinutes(f))}else{if(s<h||s===h&&l<d){c=a.OPEN_TIME_RANGE[a.OPEN_TIME_RANGE.length-1],p=c[1][0],f=c[1][1],r.setTime(r.getTime()-864e5),r.setHours(p-(h-s)),r.setMinutes(f-(d-l));break}s===h&&l===d&&(c=a.OPEN_TIME_RANGE[a.OPEN_TIME_RANGE.length-1],p=c[1][0],f=c[1][1],r.setTime(r.getTime()-864e5),r.setHours(p),r.setMinutes(f))}}if(-1===a.OPEN_DAYS.indexOf(r.getDay())){for(var o=r.getDay(),n=0;-1===a.OPEN_DAYS.indexOf(o);)o=o-1<0?6:o-1,n++;r.setTime(r.getTime()-864e5*n)}return~~(r.getTime()/1e3)},AxisXModel.prototype.search=function(e){var t=this.getVisibleTimeBars();return t.length?e<t[0].time||e>t[t.length-1].time?-1:this.bsearch(e,0,t.length-1,t):-1},AxisXModel.prototype.resetOffset=function(){this._offset=-t.INITIAL_OFFSET},AxisXModel.prototype.getMaxOffset=function(){return(this._datasource.loaded()-10)*this._barWidth},AxisXModel.prototype.getMinOffset=function(){return 10*this._barWidth-this.width},AxisXModel.prototype.bsearch=function(e,t,r,o){var n=~~((t+r)/2),a=o[n].time;return t===r?e===a?n:-1:a===e?n:a>e?this.bsearch(e,t,n,o):this.bsearch(e,n+1,r,o)},AxisXModel}(n);t.default=l},b5Rr:function(e,t){},bIqt:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("unwN");var n=r("U7vG"),a=r("rdLu"),i=r("NBiX"),s=function(e){function ContextMenu(t,r){var o=e.call(this,t)||this;return o._chartLayout=r.chartLayout,o.closeHandler=o.closeHandler.bind(o),o.clickOutsideHandler=o.clickOutsideHandler.bind(o),o.onSelectMenu=o.onSelectMenu.bind(o),o}return o(ContextMenu,e),ContextMenu.prototype.shouldComponentUpdate=function(e){return!a.isEqual(this.props,e)},ContextMenu.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.clickOutsideHandler),document.addEventListener("touchstart",this.clickOutsideHandler)},ContextMenu.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.clickOutsideHandler),document.removeEventListener("touchstart",this.clickOutsideHandler)},ContextMenu.prototype.render=function(){var e=this,t=this.props,r=t.x,o=t.y,a=t.items;return n.createElement("ul",{ref:"container",className:"chart-contextmenu popup-menu",style:{left:r+"px",top:o+"px"}},a.map(function(t){return n.createElement("li",{key:t.type,"data-type":t.type,onMouseDown:e.onSelectMenu,onTouchStart:e.onSelectMenu},t.name)}))},ContextMenu.prototype.onSelectMenu=function(e){e.touches&&e.preventDefault();var t=e.target.dataset.type;this.props.actions(t),this.closeHandler()},ContextMenu.prototype.closeHandler=function(){this._chartLayout.setContextMenu(null)},ContextMenu.prototype.clickOutsideHandler=function(e){var t=this.refs.container,r=e.target;r===t||t.contains(r)||this.closeHandler()},ContextMenu.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},ContextMenu.defaultProps={},ContextMenu}(n.Component);t.default=s},bYF0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OPEN_DAYS=[1,2,3,4,5],t.OPEN_TIME_RANGE=[[[9,30],[11,30]],[[13,0],[15,0]]],t.OPEN_HOUR=t.OPEN_TIME_RANGE[0][0][0],t.OPEN_MINUTE=t.OPEN_TIME_RANGE[0][0][1],t.CLOSE_HOUR=t.OPEN_TIME_RANGE[t.OPEN_TIME_RANGE.length-1][1][0],t.CLOSE_MINUTE=t.OPEN_TIME_RANGE[t.OPEN_TIME_RANGE.length-1][1][1],t.OPEN_MINITES_COUNT=t.OPEN_TIME_RANGE.reduce(function(e,t){return e+=60*(t[1][0]-t[0][0])+(t[1][1]-t[0][1])},0)},bpF5:function(e,t){},cxcC:function(e,t,r){"use strict";function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),__export(r("oJNF")),__export(r("FutI")),__export(r("I282")),__export(r("Vfj7")),__export(r("G0ps")),__export(r("1JLH"))},dZHW:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("Yd5c");var n=r("U7vG"),a=r("rdLu"),i=r("NBiX"),s=r("Cqed"),l=function(e){function Indicator(t,r){var o=e.call(this,t)||this;return o._chartLayout=r.chartLayout,o.state={isOpen:!1,isLoading:!1},o.loadingStartHandler=o.loadingStartHandler.bind(o),o.loadingEndHandler=o.loadingEndHandler.bind(o),o}return o(Indicator,e),Indicator.prototype.shouldComponentUpdate=function(e,t){return this.props.chart!==e.chart||!a.isEqual(this.state,t)},Indicator.prototype.componentDidMount=function(){var e=this;this._intervalCheckStatus=setInterval(function(){var t=e.isOpen();e.state.isOpen!==t&&e.setState({isOpen:t})},1e4),this._chartLayout.addListener("loading_start",this.loadingStartHandler),this._chartLayout.addListener("loading_end",this.loadingEndHandler)},Indicator.prototype.componentWillUnmount=function(){clearInterval(this._intervalCheckStatus),this._chartLayout.removeListener("loading_start",this.loadingStartHandler),this._chartLayout.removeListener("loading_end",this.loadingEndHandler)},Indicator.prototype.render=function(){var e=this.state,t=e.isOpen,r=e.isLoading;return n.createElement("div",{className:"chart-indicator "+(r?"loading":t?"open":"")},r?"加载中...":t?"实时":"收盘")},Indicator.prototype.loadingStartHandler=function(){this.setState({isLoading:!0})},Indicator.prototype.loadingEndHandler=function(){this.setState({isLoading:!1})},Indicator.prototype.isOpen=function(){var e=1e3*this.props.chart.datasource.now(),t=new Date(e);return-1!==s.OPEN_DAYS.indexOf(t.getDay())&&s.OPEN_TIME_RANGE.some(function(r){var o=new Date(e);o.setHours(r[0][0]),o.setMinutes(r[0][1]),o.setSeconds(0),o.setMilliseconds(0);var n=new Date(e);return n.setHours(r[1][0]),n.setMinutes(r[1][1]),n.setSeconds(0),n.setMilliseconds(0),t.getTime()>=o.getTime()&&t.getTime()<=n.getTime()})},Indicator.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},Indicator}(n.Component);t.default=l},dx9y:function(e,t){},f1k0:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("Hu7R");var n=r("U7vG"),a=r("bHfy"),i=function(e){function StockDetail(){return null!==e&&e.apply(this,arguments)||this}return o(StockDetail,e),StockDetail.prototype.shouldComponentUpdate=function(e){var t=this.props;return t.stockInfo!==e.stockInfo||t.maxHeight!==e.maxHeight},StockDetail.prototype.componentDidMount=function(){this._tickListScroll=new a(this.refs.container,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0})},StockDetail.prototype.componentDidUpdate=function(){this._tickListScroll.refresh()},StockDetail.prototype.componentWillUnmount=function(){this._tickListScroll.destroy(),this._tickListScroll=null},StockDetail.prototype.render=function(){var e=this.props.stockInfo;return n.createElement("div",{className:"chart-tick-list",ref:"container",style:{maxHeight:this.props.maxHeight+"px"}},n.createElement("table",null,n.createElement("tbody",null,e.ticks.map(function(e,t){return n.createElement("tr",{key:t},n.createElement("td",{width:"34%"},e.time.substring(0,2),":",e.time.substring(2,4),":",e.time.substring(4,6)),n.createElement("td",{width:"33%"},e.price),n.createElement("td",{width:"33%",className:"1"===e.type?"positive":"2"===e.type?"negative":""},+e.volume/100,n.createElement("svg",{viewBox:"0 0 10 12"},n.createElement("g",null,n.createElement("path",{d:"M9.6,4.4c0.3,0.3,0.3,0.8,0,1.1C9.5,5.7,9.3,5.7,9.1,5.7S8.7,5.7,8.5,5.5L5.7,2.7v8.5c0,0.4-0.4,0.8-0.8,0.8c-0.4,0-0.8-0.4-0.8-0.8V2.7L1.4,5.5c-0.3,0.3-0.8,0.3-1.1,0s-0.3-0.8,0-1.1l4.1-4.1C4.5,0.1,4.7,0,4.9,0c0.2,0,0.4,0.1,0.6,0.2L9.6,4.4z"})))))}))))},StockDetail}(n.Component);t.default=i},gd6M:function(e,t){},gi10:function(e,t){},h0hR:function(e,t){},kXGG:function(e,t){},lKDe:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("wRi7"),n=function(){function AxisXRenderer(e){this._axis=e}return AxisXRenderer.prototype.draw=function(){var e=this._axis,t=e.ctx,r=e.width,n=e.height,a=e.getVisibleTimeBars(),i=e.crosshair.point;t.strokeStyle="#999999",t.lineWidth=1,t.translate(.5,.5),t.beginPath(),t.moveTo(0,0),t.lineTo(r,0),t.stroke(),t.font="10px ans-serif",t.fillStyle="#999999",t.textAlign="center";for(var s=e.tickmark.getTickMarksByTimeBars(a),l=0,c=s.length;l<c;l++){var u=s[l];t.moveTo(~~u.x,0),t.lineTo(~~u.x,5),t.fillText(u.time,u.x,19)}if(t.stroke(),t.closePath(),i){var h=e.findTimeBarByX(i.x);if(h){var d=new Date(1e3*h.time),p="",f=null;p=e.datasource.resolution>="D"?d.getFullYear()+"-"+o.pad(d.getMonth()+1+"",2)+"-"+o.pad(d.getDate()+"",2):d.getFullYear()+"-"+o.pad(d.getMonth()+1+"",2)+"-"+o.pad(d.getDate()+"",2)+" "+o.pad(d.getHours()+"",2)+":"+o.pad(d.getMinutes()+"",2),f=t.measureText(p),t.fillStyle="#333333",t.fillRect(h.x-f.width/2-4,0,f.width+8,n),t.fillStyle="#999999",t.fillText(p,h.x,19)}}},AxisXRenderer}();t.default=n},"m1l+":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("tSRr");var n=r("U7vG"),a=r("bHfy"),i=function(e){function BidList(){return null!==e&&e.apply(this,arguments)||this}return o(BidList,e),BidList.prototype.shouldComponentUpdate=function(e){var t=this.props;return t.stockInfo!==e.stockInfo||t.maxHeight!==e.maxHeight},BidList.prototype.componentDidMount=function(){this._bidListScroll=new a(this.refs.container,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0})},BidList.prototype.componentDidUpdate=function(){this._bidListScroll.refresh()},BidList.prototype.componentWillUnmount=function(){this._bidListScroll.destroy(),this._bidListScroll=null},BidList.prototype.render=function(){var e=this.props.stockInfo;return n.createElement("div",{className:"chart-bid-list",ref:"container",style:{maxHeight:this.props.maxHeight+"px"}},n.createElement("div",null,n.createElement("div",{className:"caption"},n.createElement("b",{className:"sold"},"卖",n.createElement("br",null),n.createElement("br",null),"盘"),n.createElement("b",{className:"buy"},"买",n.createElement("br",null),n.createElement("br",null),"盘")),n.createElement("div",{className:"bid"},n.createElement("table",null,n.createElement("tbody",null,e.selling.map(function(t,r){return n.createElement("tr",{key:r},n.createElement("td",{width:"33.33%"},5-r),n.createElement("td",{width:"33.33%",className:t[0]>e.preClose?"positive":"negtive"},t[0]),n.createElement("td",{width:"33.33%"},t[1]/100))}))),n.createElement("hr",null),n.createElement("table",null,n.createElement("tbody",null,e.buying.map(function(t,r){return n.createElement("tr",{key:r},n.createElement("td",{width:"33.33%"},r+1),n.createElement("td",{width:"33.33%",className:t[0]>e.preClose?"positive":"negtive"},t[0]),n.createElement("td",{width:"33.33%"},t[1]/100))}))))))},BidList}(n.Component);t.default=i},m297:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function CrosshairRenderer(e){this._model=e}return CrosshairRenderer.prototype.draw=function(){var e=this._model,t=e.chart,r=t.topCtx,o=e.point,n=t.height,a=t.width,i=t.chartLayout.isEditMode;if(o){var s=t.axisX.findTimeBarByX(o.x);r.save(),r.strokeStyle=i?"#a000a0":"#999999",r.translate(.5,.5),r.setLineDash&&r.setLineDash([2,4]),r.lineWidth=1,r.beginPath(),s&&(r.moveTo(~~s.x,0),r.lineTo(~~s.x,~~n),r.stroke()),t.hover&&t.axisY.range&&(r.moveTo(0,~~o.y),r.lineTo(~~a,~~o.y),r.stroke()),r.closePath(),i&&t.hover&&(r.fillStyle="#a000a0",r.beginPath(),r.arc(~~s.x,~~o.y,3,0,2*Math.PI),r.closePath(),r.fill()),r.restore()}},CrosshairRenderer}();t.default=o},mZpQ:function(e,t){},mrgO:function(e,t){},n1sv:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("u75s"),r("Vq7t"),r("unwN");var n=r("U7vG"),a=r("rdLu"),i=r("NBiX"),s=["MACD","KDJ","RSI","BOLL","CCI","CR"],l=function(e){function StudySelector(t,r){var o=e.call(this,t,r)||this;return o._chartLayout=r.chartLayout,o.state={showStudySelector:!1},o.showMoreIndicatorHandler=o.showMoreIndicatorHandler.bind(o),o.hideMoreIndicatorHandler=o.hideMoreIndicatorHandler.bind(o),o.indicatorSelectHandler=o.indicatorSelectHandler.bind(o),o}return o(StudySelector,e),StudySelector.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.hideMoreIndicatorHandler),document.addEventListener("touchstart",this.hideMoreIndicatorHandler)},StudySelector.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.hideMoreIndicatorHandler),document.removeEventListener("touchstart",this.hideMoreIndicatorHandler)},StudySelector.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.props,e)||!a.isEqual(this.state,t)},StudySelector.prototype.render=function(){return n.createElement("div",{className:"chart-indicator-selector chart-btn-group"},n.createElement("button",{className:"btn",onClick:this.showMoreIndicatorHandler},"指标"),this.state.showStudySelector?n.createElement("ul",{className:"popup-menu",onMouseDown:this.indicatorSelectHandler,onTouchStart:this.indicatorSelectHandler},s.map(function(e){return n.createElement("li",{key:e,"data-value":e},e)})):null)},StudySelector.prototype.showMoreIndicatorHandler=function(){this.setState({showStudySelector:!0})},StudySelector.prototype.hideMoreIndicatorHandler=function(e){this.state.showStudySelector&&(e.touches&&e.preventDefault(),this.setState({showStudySelector:!1}))},StudySelector.prototype.indicatorSelectHandler=function(e){e.touches&&e.preventDefault(),this.props.onAddStudy(e.target.dataset.value)},StudySelector.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},StudySelector}(n.Component);t.default=l},nbee:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("BzvE"),a=r("qYPw"),i=r("58Xd"),s=r("wRi7"),l=1,c=function(e){function ChartModel(t,r,o,n,a,s,c){void 0===c&&(c=!1);var u=e.call(this)||this;return u._isValid=!1,u._hover=!1,u._isHit=!1,u._id=0,u._id=l++,u._chartLayout=t,u._datasource=r,u._axisX=o,u._axisY=n,u._crosshair=a,u._isPrice=s,u._isMain=c,u._grid=new i.default(u),u._graphs=[],u._patterns=[],u._tools=[],u}return o(ChartModel,e),Object.defineProperty(ChartModel.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"chartLayout",{get:function(){return this._chartLayout},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"graphs",{get:function(){return this._graphs.slice(0)},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"visibleGraphs",{get:function(){return this._graphs.filter(function(e){return e.isVisible}).sort(function(e,t){return t.priority-e.priority})},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"studies",{get:function(){return this.graphs.filter(function(e){return e instanceof a.default}).sort(function(e,t){return t.priority-e.priority})},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"compares",{get:function(){return this.graphs.filter(function(e){return e.isComparison})},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"mainGraph",{get:function(){return this.graphs.filter(function(e){return e.isMain})[0]},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"tools",{get:function(){return this._tools.slice(0)},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"visibleTools",{get:function(){return this._tools.filter(function(e){return e.isNowVisible()&&!e.isEditing})},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"patterns",{get:function(){return this._patterns.slice(0)},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"visiblePatterns",{get:function(){return this._patterns.filter(function(e){return e.isVisible&&e.isNowVisible()})},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"datasource",{get:function(){return this._datasource},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"crosshair",{get:function(){return this._crosshair},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"axisX",{get:function(){return this._axisX},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"axisY",{get:function(){return this._axisY},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"isPrice",{get:function(){return this._isPrice},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"isMain",{get:function(){return this._isMain},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"isHit",{get:function(){return this._isHit},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"hover",{get:function(){return this._hover},set:function(e){this._hover=e,this.ctx&&(this._offset=s.clientOffset(this.ctx.canvas))},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"isValid",{get:function(){return this._isValid&&this.graphs.every(function(e){return e.isValid})&&this.tools.every(function(e){return e.isValid})&&this.patterns.every(function(e){return e.isValid})&&this.axisY.isValid},enumerable:!0,configurable:!0}),ChartModel.prototype.addGraph=function(e){this._graphs.push(e),this._isValid=!1},ChartModel.prototype.removeGraph=function(e){this._graphs.splice(this._graphs.indexOf(e),1),this._isValid=!1},ChartModel.prototype.addDrawingTool=function(e){this._tools.push(e),this._isValid=!1},ChartModel.prototype.setPatternVisibility=function(e,t){this._patterns.filter(function(t){return e?"wave"===t.type:"wave"!==t.type}).forEach(function(e){return e.isVisible=t}),this._isValid=!1},ChartModel.prototype.removeDrawingTool=function(e){this.editingDrawingTool=null,this._tools.splice(this._tools.indexOf(e),1),this._isValid=!1,this._chartLayout.emit("drawingtool_remove")},ChartModel.prototype.removeAllTools=function(){this._tools.length=0},ChartModel.prototype.drawingToolBegin=function(){var e=this._chartLayout;this.creatingDrawingTool=e.selectedDrawingTool,this.creatingDrawingTool.chart=this,e.selectedDrawingTool=null,this._chartLayout.emit("drawingtool_begin")},ChartModel.prototype.drawingToolEnd=function(){this.addDrawingTool(this.creatingDrawingTool),this.creatingDrawingTool=null,this._chartLayout.isEditMode=!1,this._chartLayout.emit("drawingtool_end")},ChartModel.prototype.drawingToolSetVertex=function(e){var t=this.axisX.findTimeBarByX(e.x),r=t.time,o=this.axisY.getValueByY(e.y);this.creatingDrawingTool.addVertex({time:r,value:o}),this._chartLayout.emit("drawingtool_setvertex")},ChartModel.prototype.addPattern=function(e){this._patterns.push(e),this._isValid=!1},ChartModel.prototype.removeAllPatterns=function(){this._patterns.length=0,this._isValid=!1},ChartModel.prototype.calcRangeY=function(){var e=this,t=this._graphs.reduce(function(t,r){if(e.isPrice&&!r.isPrice)return t;var o=r.getRangeY();return o?t?(o.max>t.max&&(t.max=o.max),o.min<t.min&&(t.min=o.min),t):{max:o.max,min:o.min}:t},null);t&&t.max===t.min&&(t.max+=.01,t.min-=.01),this._axisY.range=t},ChartModel.prototype.hitTest=function(e){void 0===e&&(e=!1);var t=!1;return this.visibleTools.reverse().forEach(function(r){t?r.hover=!1:r.hitTest(e)&&(t=!0)}),this.visibleGraphs.reverse().forEach(function(r){t?r.hover=!1:r.hitTest(e)&&(t=!0)}),t!==this._isHit&&(this._isHit=t,this._chartLayout.emit("graph_hover",t)),e&&this._chartLayout.emit("graph_select",t),t},ChartModel.prototype.draw=function(){var e=this.visibleGraphs,t=this.ctx;this.datasource.loaded()&&(this.drawBg(t),this._grid.draw(t),e.filter(function(e){return!e.hover}).forEach(function(e){return e.draw(t)}),e.filter(function(e){return e.hover}).forEach(function(e){return e.draw(t)}),this.visibleTools.forEach(function(e){return e.draw()}),this.visiblePatterns.forEach(function(e){return e.draw(t)}),this._isValid=!0)},ChartModel.prototype.clearTopCanvas=function(){var e=this.topCtx,t=this.width,r=this.height;e.clearRect(0,0,t,r)},ChartModel.prototype.clearCache=function(){this.graphs.forEach(function(e){return e.clearCache()})},ChartModel.prototype.drawBg=function(e){e.clearRect(0,0,this.width,this.height)},ChartModel}(n);t.default=c},nyAH:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("HG4G"),r("bpF5");var n=r("U7vG"),a=r("rdLu"),i=r("bHfy"),s=r("NBiX"),l=function(e){function Indexes(t,r){var o=e.call(this,t,r)||this;return o._chartLayout=r.chartLayout,o.state={highlightFinished:!0},o.selectIndex=o.selectIndex.bind(o),o}return o(Indexes,e),Indexes.prototype.componentDidMount=function(){this._scroller=new i(this.refs.scrollWrapper,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0})},Indexes.prototype.componentWillUnmount=function(){clearTimeout(this._highLightTimeout),this._scroller.destroy()},Indexes.prototype.componentDidUpdate=function(){this._scroller.refresh()},Indexes.prototype.componentWillReceiveProps=function(e){var t=this;a.isEqual(e.indexesInfo,this.props.indexesInfo)||(this.state.highlightFinished=!1,this._highLightTimeout=setTimeout(function(){return t.setState({highlightFinished:!0})},500))},Indexes.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.props,e)||!a.isEqual(this.state,t)},Indexes.prototype.render=function(){var e=this,t=this.props.indexesInfo,r=this._oldIndexesInfo,o=this.props.realtimeTools,a=this.props.nonRealtimeTools,i={},s={};return r&&t.forEach(function(e,t){return i[e.code]=r[t].price!==e.price?"mutation":""}),this._oldIndexesInfo=t,t&&t.forEach(function(e){return s[e.code]=+e.price_change>0?"positive":+e.price_change<0?"negtive":""}),o&&Object.keys(o).forEach(function(e){return s[e]="red"===o[e][1]?"positive":"green"===o[e][1]?"negtive":""}),n.createElement("div",{className:"chart-market",ref:"scrollWrapper",style:{height:this.props.height+"px"}},n.createElement("div",null,t?n.createElement("div",null,n.createElement("h3",null,"股指"),n.createElement("table",{className:"index-table s-table stripe even left-header"},n.createElement("tbody",null,t.map(function(t){return n.createElement("tr",{key:t.code,"data-symbol":t.code,onClick:e.selectIndex},n.createElement("th",{width:"70"},t.name),n.createElement("td",{width:"70",className:s[t.code]+" "+(i[t.code]||"")},n.createElement("span",null,t.price)),n.createElement("td",{width:"127",className:s[t.code]},(t.price_change>0?"+":"")+(+t.price_change).toFixed(2),"(",(t.p_change>0?"+":"")+(100*t.p_change).toFixed(2),"%)"))})))):null,o?n.createElement("div",null,n.createElement("h3",null,"实时数据"),n.createElement("table",{className:"s-table stripe even left-header"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{width:"157"},"沪股通资金流入"),n.createElement("td",{width:"110",className:s.hugutong},o.hugutong[0])),n.createElement("tr",null,n.createElement("th",null,"涨跌幅超过5%个股数"),n.createElement("td",null,n.createElement("span",{className:"positive"},o.goUpStaying[0]),"/",n.createElement("span",{className:"negtive"},o.fallStaying[0]))),n.createElement("tr",null,n.createElement("th",null,"急涨急跌股数"),n.createElement("td",{className:s.shortTermMove},o.shortTermMove[0]))))):null,a?n.createElement("div",null,n.createElement("h3",null,"资金和人气"),n.createElement("table",{className:"s-table stripe even left-header nonrealtime-tabe"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{width:"130"},"上证压力支撑"),n.createElement("td",{width:"137"},n.createElement("span",{className:"positive"},a.pressure),"/",n.createElement("span",{className:"negtive"},a.support))),n.createElement("tr",null,n.createElement("th",null,"央行资金"),n.createElement("td",{className:"red"===a.bankCapital[1]?"positive":"negtive"},a.bankCapital[0])),n.createElement("tr",null,n.createElement("th",null,"解禁市值"),n.createElement("td",{className:"negtive"},a.liftBanCapitalisation)),n.createElement("tr",null,n.createElement("th",null,"融资余额"),n.createElement("td",{className:"financing-balance"},a.financingBalance," ",n.createElement("span",{className:"red"===a.financingBalanceChange[1]?"positive":"negtive"},a.financingBalanceChange[0],n.createElement("svg",{viewBox:"0 0 10 12"},n.createElement("g",null,n.createElement("path",{d:"M9.6,4.4c0.3,0.3,0.3,0.8,0,1.1C9.5,5.7,9.3,5.7,9.1,5.7S8.7,5.7,8.5,5.5L5.7,2.7v8.5c0,0.4-0.4,0.8-0.8,0.8c-0.4,0-0.8-0.4-0.8-0.8V2.7L1.4,5.5c-0.3,0.3-0.8,0.3-1.1,0s-0.3-0.8,0-1.1l4.1-4.1C4.5,0.1,4.7,0,4.9,0c0.2,0,0.4,0.1,0.6,0.2L9.6,4.4z"})))))),n.createElement("tr",null,n.createElement("th",null,"机构资金"),n.createElement("td",{className:"red"===a.institutionCapital[1]?"positive":"negtive"},a.institutionCapital[0])),n.createElement("tr",null,n.createElement("th",null,"投资者资金"),n.createElement("td",{className:"red"===a.investerCapital[1]?"positive":"negtive"},a.investerCapital[0])),n.createElement("tr",null,n.createElement("th",null,"新增投资者"),n.createElement("td",{className:"positive"},a.newInvester)),n.createElement("tr",null,n.createElement("th",null,"交易投资者"),n.createElement("td",{className:"positive"},a.tradingInvester)),n.createElement("tr",null,n.createElement("th",null,"搜索人气"),n.createElement("td",{className:"positive"},a.searchSentiment)),n.createElement("tr",null,n.createElement("th",null,"股吧人气"),n.createElement("td",{className:"positive"},a.stockForumSentiment))))):null))},Indexes.prototype.selectIndex=function(e){this._chartLayout.setSymbol(e.currentTarget.dataset.symbol)},Indexes.contextTypes={chartLayout:n.PropTypes.instanceOf(s.default)},Indexes}(n.Component);t.default=l},oJNF:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("rdLu"),n=r("Cqed"),a=function(){function BaseToolRenderer(){this._hitVertexIndex=-1,this._vertexes=[],this._isValid=!1,this._isEditing=!1,this._hover=!1,this._selected=!1}return Object.defineProperty(BaseToolRenderer.prototype,"hover",{get:function(){return this._hover},set:function(e){e!==this._hover&&(this._hover=e,this._isValid=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(BaseToolRenderer.prototype,"selected",{get:function(){return this._selected},set:function(e){e!==this._selected&&(this._selected=e,this._isValid=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(BaseToolRenderer.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),Object.defineProperty(BaseToolRenderer.prototype,"isEditing",{get:function(){return this._isEditing},set:function(e){e!==this._isEditing&&(this._isEditing=e,this._isValid=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(BaseToolRenderer.prototype,"vertexes",{get:function(){return this._vertexes},enumerable:!0,configurable:!0}),Object.defineProperty(BaseToolRenderer.prototype,"hitVertexIndex",{get:function(){return this._hitVertexIndex},enumerable:!0,configurable:!0}),Object.defineProperty(BaseToolRenderer.prototype,"chart",{get:function(){return this._chart},set:function(e){this._chart=e},enumerable:!0,configurable:!0}),BaseToolRenderer.prototype.isNowVisible=function(){var e=this._chart.axisX.getVisibleTimeBars(),t=e[0],r=e[e.length-1],n=o.pluck(this._vertexes,"time");return!(t.time>o.max(n)||r.time<o.min(n))},BaseToolRenderer.prototype.getContext=function(){return!this._isEditing&&this.isFinished()?this._chart.ctx:this._chart.topCtx},BaseToolRenderer.prototype.getCursor=function(){return this._lastCursorPoint=this._chart.hover?this._chart.crosshair.point||this._lastCursorPoint:this._lastCursorPoint},BaseToolRenderer.prototype.addVertex=function(e){this._vertexes.push(e),this._isValid=!1},BaseToolRenderer.prototype.drawVertex=function(){var e=this.getContext(),t=this._chart,r=t.axisX,o=t.axisY,n=this.vertexes;e.strokeStyle="rgba( 128, 128, 128, 1)",e.lineWidth=this._selected?4:2,e.fillStyle="#fff";for(var a=0,i=n.length;a<i;a++)e.beginPath(),e.arc(r.getXByTime(n[a].time),o.getYByValue(n[a].value),5,0,2*Math.PI),e.closePath(),e.fill(),e.stroke()},BaseToolRenderer.prototype.setVertex=function(e,t,r){var o=this._vertexes[e];o.time=t,o.value=r,this._isValid=!1},BaseToolRenderer.prototype.hitTest=function(e){var t=this,r=!1,o=-1,n=this._chart,a=n.crosshair.point;return this._hitVertexIndex=-1,r=this.vertexes.some(function(e,r){return!!t.hitTestVertex(e,a)&&(o=r,!0)}),r?this._hitVertexIndex=o:r=this.hitTestTool(),e?(r&&(n.editingDrawingTool=this),this.selected=r):this.hover=r},BaseToolRenderer.prototype.draw=function(){var e=this.getContext();e.save(),this.drawTool(e),e.restore(),(this._selected||this._hover||!this.isFinished())&&(e.save(),this.drawVertex(),e.restore()),this._isValid=!0},BaseToolRenderer.prototype.moveBy=function(e,t){-1===this.hitVertexIndex?this.moveAsWhole(e,t):this.moveVertex(this._hitVertexIndex,e,t)},BaseToolRenderer.prototype.moveAsWhole=function(e,t){var r=this;this._vertexes.forEach(function(o,n){r.moveVertex(n,e,t)})},BaseToolRenderer.prototype.moveVertex=function(e,t,r){var o=this._chart.datasource,n=this._chart.axisX,a=o.resolution,i=o.first(),s=o.last(),l=o.loaded(),c=this._vertexes[e];if(0!==t||0!==r){var u,h=t,d=c.time,p=o.search(d);if(-1===p)if(d<i.time)if(h>0)for(u=n.getPrevTickTime(i.time,a);h--;)u===d?d=i.time:(d=n.getNextTickTime(d,a))>i.time&&(h<l?(d=o.barAt(h+1).time,h=0):(d=s.time,h-=l));else for(;h++;)d=n.getPrevTickTime(d,a);else if(h>0)for(;h--;)d=n.getNextTickTime(d,a);else for(u=n.getNextTickTime(s.time,a);h++;)u===d?d=s.time:(d=n.getPrevTickTime(d,a))<s.time&&(h>-l?(d=o.barAt(l-2+h).time,h=0):(d=i.time,h+=l));else if(p+h<0)for(d=o.first().time,h+=p;h++;)d=n.getPrevTickTime(d,a);else if(p+h>o.loaded()-1)for(d=o.last().time,h-=o.loaded()-1-p;h--;)d=n.getNextTickTime(d,a);else d=o.barAt(p+h).time;this.setVertex(e,d,c.value+r)}},BaseToolRenderer.prototype.hitTestVertex=function(e,t){var r=this._chart,o=r.axisX,a=r.axisY,i=o.getXByTime(e.time),s=a.getYByValue(e.value);return Math.sqrt(Math.pow(i-t.x,2)+Math.pow(s-t.y,2))<n.HIT_TEST_TOLERANCE},BaseToolRenderer}();t.BaseToolRenderer=a},oVxw:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n,a=r("rdLu"),i=r("Lv/5"),s=r("wRi7"),l=r("Cqed");!function(e){e[e.X=0]="X",e[e.TIME=1]="TIME",e[e.OPEN=2]="OPEN",e[e.CLOSE=3]="CLOSE",e[e.HIGH=4]="HIGH",e[e.LOW=5]="LOW"}(n||(n={}));var c={color:"rgb(215, 84, 66)",colorDown:"rgb(107, 165, 131)"},u=function(e){function CandleChartRenderer(t,r){return e.call(this,t,a.defaults(r,c))||this}return o(CandleChartRenderer,e),CandleChartRenderer.prototype.hitTest=function(){var e=this._plotModel,t=e.graph,r=t.chart,o=r.axisX,a=r.axisY,i=t.isPrice?a.range:t.getRangeY(),c=e.getCurBar();if(!c)return!1;var u=r.crosshair.point,h=~~(.8*o.barWidth+.5)%2==0?~~(.8*o.barWidth+.5)-1:~~(.8*o.barWidth+.5),d=u.x,p=u.y,f=~~c[n.X]-~~(h/2)-l.HIT_TEST_TOLERANCE,m=~~a.getYByValue(c[n.HIGH],i)-l.HIT_TEST_TOLERANCE,_=f+h+l.HIT_TEST_TOLERANCE,y=~~a.getYByValue(c[n.LOW],i)+l.HIT_TEST_TOLERANCE;return s.isPointInRect(d,p,f,m,_,y)},CandleChartRenderer.prototype.calcRangeY=function(){var e=this._plotModel.getVisibleBars();if(!e.length)return null;var t={max:-Number.MAX_VALUE,min:Number.MAX_VALUE};return e.reduce(function(e,t){return t[n.HIGH]>e.max&&(e.max=t[n.HIGH]),t[n.LOW]<e.min&&(e.min=t[n.LOW]),e},t)},CandleChartRenderer.prototype.draw=function(e){var t=this._plotModel,r=t.getVisibleBars();if(r.length){var o=t.graph,a=o.chart,i=a.axisX,s=a.axisY,l=~~(.8*i.barWidth+.5)%2==0?~~(.8*i.barWidth+.5)-1:~~(.8*i.barWidth+.5),c=o.isPrice?s.range:o.getRangeY(),u=r.reduce(function(e,t){return t[n.HIGH]>e?t[n.HIGH]:e},-Number.MAX_VALUE),h=r.reduce(function(e,t){return t[n.LOW]<e?t[n.LOW]:e},Number.MAX_VALUE);t.priceLabels=[{val:u,color:this.style.color},{val:h,color:this.style.colorDown}];var d,p;e.translate(.5,.5),e.lineWidth=1;for(var f=0,m=void 0,_=r.length,y=void 0,g=void 0;f<_;f++)m=r[f],y=m[n.CLOSE]>=m[n.OPEN],g=y?this.style.color:this.style.colorDown,e.strokeStyle="#333333",e.beginPath(),e.moveTo(~~m[n.X],~~s.getYByValue(m[n.HIGH],c)),e.lineTo(~~m[n.X],~~s.getYByValue(m[n.LOW],c)),e.stroke();for(var f=0,m=void 0,_=r.length,y=void 0,g=void 0;f<_;f++)m=r[f],y=m[n.CLOSE]>=m[n.OPEN],g=y?this.style.color:this.style.colorDown,e.strokeStyle="#333333",e.lineWidth=1,e.fillStyle=g,d=~~m[n.X]-(l-1)/2,p=~~s.getYByValue(y?m[n.CLOSE]:m[n.OPEN],c),e.beginPath(),e.moveTo(d,p),e.lineTo(d+l-1,p),p=~~Math.ceil(s.getYByValue(y?m[n.OPEN]:m[n.CLOSE],c)),e.lineTo(d+l-1,p),e.lineTo(d,p),e.closePath(),e.fill(),e.stroke();e.setLineDash([2,4]),e.strokeStyle=this.style.color,e.beginPath(),p=~~s.getYByValue(u,c),e.moveTo(0,p),e.lineTo(i.width,p),e.stroke(),e.strokeStyle=this.style.colorDown,e.beginPath(),p=~~s.getYByValue(h,c),e.moveTo(0,p),e.lineTo(i.width,p),e.stroke()}},CandleChartRenderer.prototype.getSelectionYByBar=function(e){var t=this._plotModel,r=t.graph,o=r.chart,a=o.axisY,i=r.isPrice?a.range:r.getRangeY(),s=e[n.CLOSE],l=e[n.OPEN];return~~a.getYByValue(Math.abs(s-(s-l)/2),i)},CandleChartRenderer}(i.BaseChartRenderer);t.CandleChartRenderer=u},oifU:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n,a=r("Lv/5"),i=r("Cqed"),s=r("wRi7");!function(e){e[e.X=0]="X",e[e.TIME=1]="TIME",e[e.VALUE=2]="VALUE"}(n||(n={}));var l=function(e){function HistogramChartRenderer(t,r){return e.call(this,t,r)||this}return o(HistogramChartRenderer,e),HistogramChartRenderer.prototype.hitTest=function(){var e=this._plotModel,t=e.graph,r=t.chart,o=r.axisX,a=r.axisY,l=t.isPrice?a.range:t.getRangeY(),c=e.getCurBar();if(!c)return!1;var u=r.crosshair.point,h=~~(o.barWidth/2+.5)%2==0?~~(o.barWidth/2+.5)-1:~~(o.barWidth/2+.5),d=this.style,p=d.histogramBase,f=u.x,m=u.y,_=~~c[n.X]-~~(h/2)-i.HIT_TEST_TOLERANCE,y=~~a.getYByValue(c[n.VALUE],l)-i.HIT_TEST_TOLERANCE,g=_+h+i.HIT_TEST_TOLERANCE,v=~~a.getYByValue(p,l)+i.HIT_TEST_TOLERANCE;return s.isPointInRect(f,m,_,y,g,v)},HistogramChartRenderer.prototype.calcRangeY=function(){var e=this._plotModel.getVisibleBars();if(!e.length)return null;var t={max:-Number.MAX_VALUE,min:Number.MAX_VALUE};return e.reduce(function(e,t){var r=t;return r[n.VALUE]<e.min&&(e.min=r[n.VALUE]),r[n.VALUE]>e.max&&(e.max=r[n.VALUE]),e},t)},HistogramChartRenderer.prototype.draw=function(e){var t=this._plotModel,r=t.getVisibleBars();if(r.length)for(var o=t.graph,a=o.chart,i=a.axisY,s=a.axisX,l=~~(s.barWidth/2+.5)%2==0?~~(s.barWidth/2+.5)-1:~~(s.barWidth/2+.5),c=this.style,u=c.histogramBase,h=o.isPrice?i.range:o.getRangeY(),d=~~i.getYByValue(u,h),p=0,f=r.length,m=void 0,_=void 0,y=void 0;p<f;p++)m=r[p],_=~~m[n.X]-~~(l/2),y=~~i.getYByValue(m[n.VALUE],h),e.fillStyle=m[n.VALUE]>u?c.color:c.colorDown,e.fillRect(_,y,l,d-y)},HistogramChartRenderer.prototype.getSelectionYByBar=function(e){var t=this._plotModel,r=t.graph,o=r.chart,a=o.axisY,i=r.isPrice?a.range:r.getRangeY();return a.getYByValue(e[n.VALUE],i)},HistogramChartRenderer}(a.BaseChartRenderer);t.HistogramChartRenderer=l},pUaQ:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("BzvE"),a=r("H9vw"),i=function(e){function PollManager(t,r){void 0===r&&(r=0);var o=e.call(this)||this;return o._timers={},o._data={},o._symbolInfo=t,o._tabIndex=r,o.pollStockInfo=o.pollStockInfo.bind(o),o.pollCapitalFlow=o.pollCapitalFlow.bind(o),o.pollIndexesInfo=o.pollIndexesInfo.bind(o),o.pollRealtimeTools=o.pollRealtimeTools.bind(o),o.getNonRealtimeTools=o.getNonRealtimeTools.bind(o),o.getAnalysisData=o.getAnalysisData.bind(o),o}return o(PollManager,e),Object.defineProperty(PollManager.prototype,"symbolInfo",{get:function(){return this._symbolInfo},set:function(e){this._symbolInfo=e},enumerable:!0,configurable:!0}),Object.defineProperty(PollManager.prototype,"tabIndex",{set:function(e){if(e!==this._tabIndex){switch(this._tabIndex){case 0:clearTimeout(this._timers.capitalFlowInfo);break;case 1:clearTimeout(this._timers.indexesInfo),clearTimeout(this._timers.realtimeTools),clearTimeout(this._timers.nonrealtimeTools);break;case 2:clearTimeout(this._timers.financingInfo);break;case 3:clearTimeout(this._timers.plates);break;case 4:clearTimeout(this._timers.analysis)}switch(this._tabIndex=e,e){case 0:this._timers.capitalFlowInfo||"stock"===this.symbolInfo.type&&this.pollCapitalFlow();break;case 1:this._timers.indexesInfo||this.pollIndexesInfo(),this._timers.realtimeTools||this.pollRealtimeTools(),this._timers.nonrealtimeTools||this._data.nonRealtimeTools||this.getNonRealtimeTools();break;case 2:"stock"!==this._symbolInfo.type||this._data.financingInfo||this.getFinancingInfo();break;case 3:"stock"!==this._symbolInfo.type||this._data.plates||this.getPlates();break;case 4:this._timers.analysis||this.getAnalysisData()}}},enumerable:!0,configurable:!0}),PollManager.prototype.start=function(){switch(this.pollStockInfo(),this._tabIndex){case 0:"stock"===this.symbolInfo.type&&this.pollCapitalFlow();break;case 1:this.pollIndexesInfo(),this.pollRealtimeTools(),this.getNonRealtimeTools();break;case 2:this.getFinancingInfo();break;case 3:this.getPlates();break;case 4:this.getAnalysisData()}},PollManager.prototype.restart=function(){this.stop(),this.start()},PollManager.prototype.stop=function(){var e=this;Object.keys(this._timers).forEach(function(t){return clearTimeout(e._timers[t])}),this._data={},this._timers={}},PollManager.prototype.pollStockInfo=function(){var e=this;a.getStockInfo(this._symbolInfo.symbol).then(function(t){var r=t.data.stock_info,o={open:r.open,high:r.high,low:r.low,preClose:r.pre_close,price:r.price,changeRate:r.p_change,changePrice:r.price_change,amount:r.amount,volume:r.volume,turnover:r.turnover,amplitude:r.zf,inVol:r.invol,outVol:r.outvol,selling:r.a5_p?[[r.a5_p,r.a5_v],[r.a4_p,r.a4_v],[r.a3_p,r.a3_v],[r.a2_p,r.a2_v],[r.a1_p,r.a1_v]]:null,buying:r.b1_p?[[r.b1_p,r.b1_v],[r.b2_p,r.b2_v],[r.b3_p,r.b3_v],[r.b4_p,r.b4_v],[r.b5_p,r.b5_v]]:null,ticks:t.data.ticks_list};e._data.stockInfo=o,e._timers.stockInfo=t.data.reflush_time?setTimeout(e.pollStockInfo,1e3*t.data.reflush_time):-1,e.emit("data",e._data)}).catch(function(){return e._timers.stockInfo=setTimeout(e.pollStockInfo,1e4)})},PollManager.prototype.pollCapitalFlow=function(){var e=this;if("stock"!==this._symbolInfo.type||0!==this._tabIndex)return void(this._timers.capitalFlowInfo=null);a.getCapitalFlow(this._symbolInfo.symbol).then(function(t){t=t.data;var r=t.map(function(e){return(e.mainIn-e.mainOut)/1e4}).reverse();t=t[0];var o=t.retailIn/1e4,n=t.retailOut/1e4,a=t.mainIn/1e4,i=t.mainOut/1e4,s=[o,a,i,n],l={barChartData:r,donutChartData:s};e._data.capitalFlowInfo=l,e._timers.capitalFlowInfo=setTimeout(e.pollCapitalFlow,18e4),e.emit("data",e._data)}).catch(function(){e._timers.capitalFlowInfo=setTimeout(e.pollCapitalFlow,1e4)})},PollManager.prototype.pollIndexesInfo=function(){var e=this;if(1!==this._tabIndex)return void(this._timers.indexesInfo=null);a.getIndexesInfo().then(function(t){var r=1e3*t.data.intver,o=t.data.list;e._data.indexesInfo=o,e._timers.indexesInfo=r?setTimeout(e.pollIndexesInfo,r):-1,e.emit("data",e._data)}).catch(function(){e._timers.indexesInfo=setTimeout(e.pollIndexesInfo,1e4)})},PollManager.prototype.pollRealtimeTools=function(){var e=this;if(1!==this._tabIndex)return void(this._timers.realtimeTools=null);a.getRealtimeTools().then(function(t){t=t.data;var r=/class='(.*?)'/,o=/>(.*?)</,n=t.zhangdieting.split("/<"),a={hugutong:[o.exec(t.hugutong)[1],r.exec(t.hugutong)[1]],shortTermMove:[o.exec(t.jzjd)[1],r.exec(t.jzjd)[1]],goUpStaying:[o.exec(n[0])[1],r.exec(n[0])[1]],fallStaying:[o.exec(n[1])[1],r.exec(n[1])[1]]};e._data.realtimeTools=a,e._timers.realtimeTools=t.flush_time?setTimeout(e.pollRealtimeTools,1e3*t.flush_time):-1,e.emit("data",e._data)}).catch(function(){e._timers.realtimeTools=setTimeout(e.pollRealtimeTools,1e4)})},PollManager.prototype.getFinancingInfo=function(){var e=this;"stock"===this._symbolInfo.type&&a.getFinancingInfo(this._symbolInfo.symbol).then(function(t){e._data.financingInfo=t.data,e.emit("data",e._data)}).catch(function(){e._timers.financingInfo=setTimeout(e.getFinancingInfo,1e4)})},PollManager.prototype.getPlates=function(){var e=this;"stock"===this._symbolInfo.type&&a.getPlatesBySymbol(this._symbolInfo.symbol).then(function(t){e._data.plates=t.data.bk_list,e.emit("data",e._data)}).catch(function(){e._timers.plates=setTimeout(e.getPlates,1e4)})},PollManager.prototype.getNonRealtimeTools=function(){var e=this;a.getNonrealtimeTools().then(function(t){var r=/class="(.*?)"/,o=/<.*?>/g,n=t.data.pressure_str.split(/\/(?=\<)/),a=t.data.rzInfo_str.split("&nbsp;");t=t.data,e._data.nonRealtimeTools={bankCapital:[t.bankInfo_str.replace(o,""),r.exec(t.bankInfo_str)[1]],stockForumSentiment:t.guba_str.replace(o,""),searchSentiment:t.search_str.replace(o,""),institutionCapital:[t.jgInfo_str.replace(o,""),r.exec(t.jgInfo_str)[1]],investerCapital:[t.zijin_str.replace(o,""),r.exec(t.zijin_str)[1]],tradingInvester:t.jiaoyi_str.replace(o,""),liftBanCapitalisation:t.jiejingInfo_str.replace(o,""),support:n[1].replace(o,""),pressure:n[0].replace(o,""),financingBalance:a[0],financingBalanceChange:[a[1].replace(o,""),r.exec(a[1])[1]],newInvester:t.xinzeng_str.replace(o,"")},e.emit("data",e._data)}).catch(function(){e._timers.nonrealtimeTools=setTimeout(e.getNonRealtimeTools,1e4)})},PollManager.prototype.getAnalysisData=function(){var e=this;if(4!==this._tabIndex)return void(this._timers.analysis=null);a.getAnalysisData(this._symbolInfo.symbol).then(function(t){t=t.data,e._data.analysisData={pressureInfo:t.pressure_info,gapInfo:t.gap_info},e.emit("data",e._data)}).catch(function(){return e._timers.analysis=setTimeout(e.getAnalysisData,1e4)})},PollManager}(n);t.default=i},pip8:function(e,t){},qMEF:function(e,t,r){"use strict";function renderChart(){n.render(o.createElement(a.default,{chartLayout:u},o.createElement(s.default,{symbol:h,defaultSymbol:"sh000001",height:document.documentElement.clientHeight,width:document.documentElement.clientWidth,shape:"candle",resolution:"1"})),c)}Object.defineProperty(t,"__esModule",{value:!0}),r("1z0p"),r("kXGG");var o=r("U7vG"),n=r("O27J"),a=r("CPKi"),i=r("wRi7"),s=r("xlyV"),l=r("NBiX"),c=document.getElementById("chart_container"),u=new l.default,h=i.getParameterByName("symbol")||"sh000001";window.onresize=renderChart,renderChart()},qYPw:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("rdLu"),a=r("H9vw"),i=r("UALi"),s=r("PxPp"),l=function(e){function StudyModel(t,r,o,s,l){void 0===o&&(o=!0);var c=this,u=a.studyConfig[r],h=t.chartLayout.mainDatasource,d=h.symbol,p=h.resolution,f=h.timeDiff,m=null;switch(r){case"压力支撑":m=new a.PressureSupportDatasource(d,p,f);break;case"inflection":m=new a.InflectionDatasource(d,p,1,f);break;case"inflection2":m=new a.InflectionDatasource(d,p,2,f);break;default:m=t.datasource}return l=l||n.pluck(u.plots,"style"),c=e.call(this,m,t,u.priority,u.isPrice,u.isRemovable,!1,!1,o,l,u.adapter,u.output,s||u.input)||this,c._studyType=r,c._datasourceType=u.datasourceType,c._inputLabels=u.inputLabels||[],c._noLegend=!!u.noLegend,u.plots.forEach(function(e,t){c._plots.push(new i.default(c,t,e.shape,n.extend({},e.style,l?l[t]:{})))}),c}return o(StudyModel,e),Object.defineProperty(StudyModel.prototype,"noLegend",{get:function(){return this._noLegend},enumerable:!0,configurable:!0}),Object.defineProperty(StudyModel.prototype,"studyType",{get:function(){return this._studyType},enumerable:!0,configurable:!0}),Object.defineProperty(StudyModel.prototype,"datasourceType",{get:function(){return this._datasourceType},enumerable:!0,configurable:!0}),Object.defineProperty(StudyModel.prototype,"inputLabels",{get:function(){return this._inputLabels},enumerable:!0,configurable:!0}),StudyModel}(s.default);t.default=l},qbbe:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n,a=r("rdLu"),i=r("Lv/5"),s=r("Cqed"),l=r("wRi7");!function(e){e[e.X=0]="X",e[e.TIME=1]="TIME",e[e.VALUE=2]="VALUE"}(n||(n={}));var c={color:"rgba( 60, 120, 216, 1)",lineWidth:1},u=function(e){function LineChartRenderer(t,r){return e.call(this,t,a.defaults(r,c))||this}return o(LineChartRenderer,e),LineChartRenderer.prototype.hitTest=function(){var e=this._plotModel,t=e.graph,r=t.chart,o=r.axisY,a=t.isPrice?o.range:t.getRangeY(),i=e.getCurBar(),c=e.getPrevBar(),u=e.getNextBar();if(!i||i&&0===i[n.VALUE])return!1;var h=r.crosshair.point,d=h.x,p=h.y,f=c?c[n.X]:0,m=c?~~o.getYByValue(c[n.VALUE],a):0,_=i[n.X],y=~~o.getYByValue(i[n.VALUE],a),g=u?u[n.X]:0,v=u?~~o.getYByValue(u[n.VALUE],a):0,b=Number.MAX_VALUE,E=Number.MAX_VALUE;return c&&(b=l.pointToSegDist(d,p,f,m,_,y)),u&&(E=l.pointToSegDist(d,p,_,y,g,v)),b<s.HIT_TEST_TOLERANCE||E<s.HIT_TEST_TOLERANCE},LineChartRenderer.prototype.calcRangeY=function(){var e=this._plotModel.getVisibleBars();if(!e.length)return null;var t={max:-Number.MAX_VALUE,min:Number.MAX_VALUE};t=e.reduce(function(e,t){return t[n.VALUE]>e.max&&(e.max=t[n.VALUE]),t[n.VALUE]<e.min&&(e.min=t[n.VALUE]),e},t);var r=(t.max-t.min)/t.max;return r<.02&&(t.max+=(.02-r)*t.max,t.min-=(.02-r)*t.max),t},LineChartRenderer.prototype.draw=function(e){var t=this._plotModel,r=t.getVisibleBars();if(r.length){var o=t.graph,a=o.chart,i=a.axisY,s=o.isPrice?i.range:o.getRangeY();e.strokeStyle=this.style.color,e.lineWidth=this.style.lineWidth,e.beginPath();for(var l=0,c=void 0,u=void 0,h=void 0,d=!1,p=r.length;l<p;l++)h=r[l],c=h[n.X],u=~~i.getYByValue(h[n.VALUE],s),0!==h[n.VALUE]&&(d?e.lineTo(c,u):(e.moveTo(c,u),d=!0));e.stroke()}},LineChartRenderer.prototype.getSelectionYByBar=function(e){var t=this._plotModel,r=t.graph,o=r.chart,a=o.axisY,i=r.isPrice?a.range:r.getRangeY();return~~a.getYByValue(e[n.VALUE],i)},LineChartRenderer}(i.BaseChartRenderer);t.LineChartRenderer=u},rBAp:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("Vq7t");var n=r("U7vG"),a=r("rdLu"),i=r("NBiX"),s=["不复权","前复权"],l=[0,1],c=function(e){function RightOption(t,r){var o=e.call(this,t,r)||this;return o._chartLayout=r.chartLayout,o.updateView=o.updateView.bind(o),o.rightSelectHandler=o.rightSelectHandler.bind(o),o}return o(RightOption,e),RightOption.prototype.shouldComponentUpdate=function(e){return!a.isEqual(this.props,e)},RightOption.prototype.componentDidMount=function(){this._chartLayout.addListener("right_change",this.updateView)},RightOption.prototype.componentWillUnmount=function(){this._chartLayout.removeListener("right_change",this.updateView)},RightOption.prototype.render=function(){var e=this._chartLayout.mainDatasource.right;return n.createElement("div",{className:"chart-btn-group",onClick:this.rightSelectHandler},l.map(function(t,r){var o="btn";return e===t&&(o+=" active"),n.createElement("button",{key:t,className:o,value:t},s[r])}))},RightOption.prototype.updateView=function(){this.forceUpdate()},RightOption.prototype.rightSelectHandler=function(e){var t=+e.target.value;this._chartLayout.mainDatasource.right!==t&&this.props.onRightChange(t)},RightOption.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},RightOption}(n.Component);t.default=c},rBG8:function(e,t){},rdZE:function(e,t){},svHs:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("mrgO"),r("bpF5");var n=r("U7vG"),a=r("rdLu"),i=r("bHfy"),s=r("wRi7"),l=r("NBiX"),c=r("H9vw"),u=function(e){function SelfSelectStock(t,r){var o=e.call(this,t,r)||this;return o.state={sortKey:"zdf",order:"desc"},o._chartLayout=r.chartLayout,o.loadStocks=o.loadStocks.bind(o),o.sortHandler=o.sortHandler.bind(o),o.setSymbolHandler=o.setSymbolHandler.bind(o),o}return o(SelfSelectStock,e),SelfSelectStock.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.state,t)},SelfSelectStock.prototype.componentDidMount=function(){this._isMounted=!0,this._wrapperScroller=new i(this.refs.wrapper,{scrollbars:!0,hScrollbar:!0,scrollX:!0,scrollY:!1,eventPassthrough:!0,fadeScrollbars:!0}),this._scroller=new i(this.refs.body,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this._chartLayout.addListener("self_select_add",this.loadStocks),this._chartLayout.addListener("self_select_delete",this.loadStocks),this.loadStocks(this.state.sortKey,this.state.order)},SelfSelectStock.prototype.componentWillReceiveProps=function(e){e.width!==this.props.width&&(this._wrapperScroller.refresh(),this._scroller.refresh())},SelfSelectStock.prototype.componentDidUpdate=function(){this._scroller.refresh()},SelfSelectStock.prototype.componentWillUnmount=function(){this._isMounted=!1,this._wrapperScroller.destroy(),this._scroller.destroy(),this._chartLayout.removeListener("self_select_add",this.loadStocks),this._chartLayout.removeListener("self_select_delete",this.loadStocks),clearTimeout(this._pollStocksTimer)},SelfSelectStock.prototype.render=function(){var e=this,t=this.state.stocks;return n.createElement("div",{className:"chart-self-select",ref:"wrapper"},n.createElement("div",{className:"wrapper"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"18%"},"股票"),n.createElement("th",{width:"14%","data-key":"price",onClick:this.sortHandler},"最新价","price"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"14%","data-key":"zdf",onClick:this.sortHandler},"涨跌幅","zdf"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"16%","data-key":"sz",onClick:this.sortHandler},"总市值","sz"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"20%","data-key":"lt_sz",onClick:this.sortHandler},"实际流通市值","lt_sz"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"18%","data-key":"hy",onClick:this.sortHandler},"所属行业","hy"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":"")))),n.createElement("div",{className:"body",ref:"body"},n.createElement("table",{className:"s-table stripe even top-header"},n.createElement("tbody",null,t&&t.map(function(t,r){return n.createElement("tr",{key:r,"data-symbol":t.code,onClick:e.setSymbolHandler},n.createElement("td",{width:"18%"},t.name),n.createElement("td",{width:"14%"},(+t.price).toFixed(2)),n.createElement("td",{width:"14%"},(100*t.zdf).toFixed(2),"%"),n.createElement("td",{width:"16%"},"--"!==t.sz?s.formatNumber(+t.sz,2):"--"),n.createElement("td",{width:"20%"},"--"!==t.lt_sz?s.formatNumber(+t.lt_sz,2):"--"),n.createElement("td",{width:"18%"},t.hy))}))))))},SelfSelectStock.prototype.loadStocks=function(e,t){var r=this,o=a.pluck(this._chartLayout.readFromLS("qchart.selfselectlist")||[],"symbol");c.getStockListByCodes(o,e,t).then(function(o){if(r._isMounted){var n=1e3*o.data.intver;r.setState({sortKey:e,order:t,stocks:o.data.list}),r._pollStocksTimer=n?setTimeout(function(){return r.loadStocks},n):-1}}).catch(function(e){return r._pollStocksTimer=setTimeout(function(){return r.loadStocks},1e4)})},SelfSelectStock.prototype.sortHandler=function(e){var t=e.target.dataset.key,r="desc";t===this.state.sortKey&&(r="desc"===this.state.order?"asc":"desc"),this.loadStocks(t,r)},SelfSelectStock.prototype.setSymbolHandler=function(e){this.context.chartLayout.setSymbol(e.currentTarget.dataset.symbol)},SelfSelectStock.contextTypes={chartLayout:n.PropTypes.instanceOf(l.default)},SelfSelectStock}(n.Component);t.default=u},"tF+H":function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("PJh5"),a=r("uRx8"),i=r("+d7d"),s=r("H9vw"),l=function(e){function InflectionDatasource(t,r,o,n){void 0===n&&(n=0);var a=e.call(this,r,n)||this;return a._version=o,a._symbol=t,a._plotList=new i.default,a}return o(InflectionDatasource,e),Object.defineProperty(InflectionDatasource.prototype,"symbol",{get:function(){return this._symbol},set:function(e){this._symbol=e},enumerable:!0,configurable:!0}),Object.defineProperty(InflectionDatasource.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),InflectionDatasource.prototype.barAt=function(e){return this._plotList.get(e)},InflectionDatasource.prototype.first=function(){return this._plotList.first()},InflectionDatasource.prototype.last=function(){return this._plotList.last()},InflectionDatasource.prototype.slice=function(e,t){return this._plotList.slice(e,t)},InflectionDatasource.prototype.range=function(e,t){return this._plotList.range(e,t)},InflectionDatasource.prototype.loaded=function(){return this._plotList.size()},InflectionDatasource.prototype.search=function(e){return this._plotList.search(e)},InflectionDatasource.prototype.loadTimeRange=function(e,t){var r=this,o=this._symbol,i=this._resolution;if(e>t)return Promise.resolve([]);var s=n(1e3*e).format("YYYYMMDD"),l=n(1e3*t).format("YYYYMMDD");return new Promise(function(e,t){return a.getInflectionData(o,r._version,s,l).then(function(a){var s=[];a.data.shape_list.forEach(function(e){return s.push({time:~~(n(e.day).toDate().getTime()/1e3),type:e.shape_detail.val,val:e.shape_detail.y,prob:e.shape_detail.prob})}),o.toUpperCase()===r._symbol.toUpperCase()&&i===r._resolution?(r._plotList.merge(s),e(s)):t("response expired")}).catch(t)})},InflectionDatasource.prototype.clearCache=function(){e.prototype.clearCache.call(this),this._plotList.clear()},InflectionDatasource}(s.Datasource);t.InflectionDatasource=l},tSRr:function(e,t){},tc6X:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("PJh5"),a=r("uRx8"),i=r("+d7d"),s=r("Cqed"),l=r("9FmA"),c=function(e){function PressureSupportDatasource(t,r,o){void 0===o&&(o=0);var n=e.call(this,r,o)||this;return n._symbol=t,n._plotList=new i.default,n}return o(PressureSupportDatasource,e),Object.defineProperty(PressureSupportDatasource.prototype,"symbol",{get:function(){return this._symbol},set:function(e){this._symbol=e},enumerable:!0,configurable:!0}),PressureSupportDatasource.prototype.barAt=function(e){return this._plotList.get(e)},PressureSupportDatasource.prototype.first=function(){return this._plotList.first()},PressureSupportDatasource.prototype.last=function(){return this._plotList.last()},PressureSupportDatasource.prototype.slice=function(e,t){return this._plotList.slice(e,t)},PressureSupportDatasource.prototype.range=function(e,t){return this._plotList.range(e,t)},PressureSupportDatasource.prototype.loaded=function(){return this._plotList.size()},PressureSupportDatasource.prototype.search=function(e){return this._plotList.search(e)},PressureSupportDatasource.prototype.max=function(e,t){void 0===t&&(t=this.loaded());var r=this.slice(e,t),o=-Number.MAX_VALUE;return r.forEach(function(e){return o=e.pressure>o?e.pressure:o}),o},PressureSupportDatasource.prototype.min=function(e,t){void 0===t&&(t=this.loaded());var r=this.slice(e,t),o=Number.MAX_VALUE;return r.forEach(function(e){return o=e.support<o?e.support:o}),o},PressureSupportDatasource.prototype.loadTimeRange=function(e,t){var r=this,o=this._symbol,i=this._resolution;if(e>t)return Promise.resolve([]);var l=n(1e3*e).format("YYYYMMDD"),c=n(1e3*t).format("YYYYMMDD");return new Promise(function(e,t){return a.getPressureSupport(o,l,c).then(function(a){var l=[];if("D"===i)l=a.data.map(function(e){return{time:+e.timestamp,pressure:+e.upper_price,support:+e.lower_price}});else{var c,u,h=s.OPEN_TIME_RANGE.map(function(e){return e[1]}),d=s.OPEN_TIME_RANGE.map(function(e){return e[0]}),p=null;switch(r._resolution){case"1":p=1;break;case"5":p=5;break;case"15":p=15;break;case"30":p=30;break;case"60":p=60;break;default:throw"unsupported resolution"}a.data.forEach(function(e){h.forEach(function(t,r){var o=t[0],a=t[1],i=d[r][0],s=d[r][1],h=n(1e3*(+e.timestamp+3600*o+60*a)),f=n(1e3*(+e.timestamp+3600*i+60*s));for(c=+e.upper_price>0?+e.upper_price:c,u=+e.lower_price>0?+e.lower_price:u;!f.add(p,"minute").isAfter(h);)l.push({time:f.toDate().getTime()/1e3,pressure:c,support:u})})})}o.toUpperCase()===r._symbol.toUpperCase()&&i===r._resolution?(r._plotList.merge(l),e(l)):t("response expired")}).catch(t)})},PressureSupportDatasource.prototype.clearCache=function(){e.prototype.clearCache.call(this),this._plotList.clear()},PressureSupportDatasource}(l.Datasource);t.PressureSupportDatasource=c},tub9:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r("rdLu"),a=r("EVIZ"),i=["rgba( 60, 120, 216, 1)","rgba(102, 255, 153, .5)"],s=[[8,8],[]],l=function(e){function ShapePatternRenderer(t,r,o){var n=e.call(this,t)||this;return n._points=r,n._trendLines=o,n}return o(ShapePatternRenderer,e),ShapePatternRenderer.prototype.draw=function(e){var t,r,o,n=this._points||[],a=this._trendLines||[],l=this._chart,c=l.datasource,u=l.axisX,h=l.axisY,d=u.getVisibleTimeBars(),p=d[0],f=d[d.length-1],m=c.first(),_=c.last(),y=n.length,g=null;e.save(),e.lineWidth=3,e.setLineDash([8,8]),e.strokeStyle="rgba( 60, 120, 216, 1)",e.beginPath(),y&&(g=n[0],r=~~u.getXByTime(g.time),o=~~h.getYByValue(g.value),e.moveTo(r,o));for(var v=1;v<y;v++)g=n[v],r=~~u.getXByTime(g.time),o=~~h.getYByValue(g.value),e.lineTo(r,o);e.stroke(),e.lineWidth=3,y=a.length;for(var v=0,b=void 0,E=void 0;v<y;v++)e.beginPath(),e.strokeStyle=i[~~(v/2)],e.setLineDash(s[~~(v/2)]),t=a[v],b=c.search(t[1].time)-c.search(t[0].time),E=(t[1].value-t[0].value)/b,p.time<t[0].time&&(b=p.time<m.time?u.search(m.time)+c.search(t[0].time):c.search(t[0].time)-c.search(p.time),r=p.x,o=~~h.getYByValue(t[0].value-b*E),e.moveTo(r,o)),r=~~u.getXByTime(t[0].time),o=~~h.getYByValue(t[0].value),e.lineTo(r,o),r=~~u.getXByTime(t[1].time),o=~~h.getYByValue(t[1].value),e.lineTo(r,o),f.time>t[1].time&&(b=f.time>_.time?d.length-1-u.search(_.time)+c.search(_.time)-c.search(t[1].time):c.search(f.time)-c.search(t[1].time),r=f.x,o=~~h.getYByValue(t[1].value+b*E),e.lineTo(r,o)),e.stroke();e.restore()},ShapePatternRenderer.prototype.hitTest=function(){return!1},ShapePatternRenderer.prototype.isNowVisible=function(){var e=this._chart.axisX.getVisibleTimeBars(),t=e[0],r=e[e.length-1],o=this._points||[],a=this._trendLines||[],i=n.pluck(a.reduce(function(e,t){return e.push(t[0]),e.push(t[1]),e},[]).concat(o),"time");return!(t.time>n.max(i)||r.time<n.min(i))},ShapePatternRenderer}(a.BasePatternRenderer);t.ShapePatternRenderer=l},u75s:function(e,t){},uRx8:function(e,t,r){"use strict";function getStockBars(e,t,r,o,a){return fetch(n+"/chart/common/history?code="+e+"&resolution="+t+"&fq="+r+"&from="+o+"&to="+a).then(function(e){return e.json()})}function resolveSymbol(e){return fetch(n+"/chart/symbols?symbol="+e).then(function(e){return e.json()})}function searchSymbols(e){return fetch(n+"/chart/search?query="+e+"&limit=15&type=&exchange=").then(function(e){return e.json()})}function getServerTime(){return fetch(n+"/chart/time").then(function(e){return e.text()})}function getStockInfo(e){return fetch(n+"/chart/stock/info?code="+e+"&ticks_time=0").then(function(e){return e.json()})}function getCapitalFlow(e){return fetch(o+"/stock/moneyflow?code="+e).then(function(e){return e.json()})}function getIndexesInfo(){return fetch(o+"/chart/index/list").then(function(e){return e.json()})}function getRealtimeTools(){return fetch(n+"/chart/stock/realtimetool").then(function(e){return e.json()})}function getFinancingInfo(e){return fetch(n+"/chart/stock/finance?code="+e).then(function(e){return e.json()})}function getPlatesBySymbol(e){return fetch(o+"/chart/bankuai/bystock?code="+e).then(function(e){return e.json()})}function getAllPlates(e,t,r,n){return fetch(o+"/chart/bankuai/list?key="+e+"&sort="+t+"&start="+r+"&count="+n).then(function(e){return e.json()})}function getStockListByPlateId(e){return fetch(o+"/chart/bankuai/stocklist?bk_id="+e).then(function(e){return e.json()})}function getStockListByCodes(e,t,r){return fetch(o+"/chart/stock/zixuan?code_list="+e.join(",")+"&key="+t+"&sort="+r).then(function(e){return e.json()})}function getStockListByIndexId(e){return fetch(o+"/chart/index/stocks?index_id="+e).then(function(e){return e.json()})}function getNonrealtimeTools(){return fetch(n+"/chart/stock/nonrealtime").then(function(e){return e.json()})}function getPatterns(e){return fetch(o+"/chart/common/shape?code="+e+"&type=wave,mhead,whead,hsp,hsb,triangle,dtd").then(function(e){return e.json()})}function getPressureSupport(e,t,r){return fetch(o+"/chart/common/pressure?code="+e+"&from_date="+t+"&to_date="+r).then(function(e){return e.json()})}function getInflectionData(e,t,r,n){return fetch(o+"/chart/common/shapebytype?code="+e+"&from_date="+r+"&to_date="+n+"&type="+(1===t?"gd":"gd_v2")).then(function(e){return e.json()})}function getAnalysisData(e){return fetch(o+"/chart/common/analytics?code="+e).then(function(e){return e.json()})}Object.defineProperty(t,"__esModule",{value:!0}),r("hKoQ").polyfill(),r("j9g7");var o="http://api.quchaogu.com",n="http://www.quchaogu.com";t.getStockBars=getStockBars,t.resolveSymbol=resolveSymbol,t.searchSymbols=searchSymbols,t.getServerTime=getServerTime,t.getStockInfo=getStockInfo,t.getCapitalFlow=getCapitalFlow,t.getIndexesInfo=getIndexesInfo,t.getRealtimeTools=getRealtimeTools,t.getFinancingInfo=getFinancingInfo,t.getPlatesBySymbol=getPlatesBySymbol,t.getAllPlates=getAllPlates,t.getStockListByPlateId=getStockListByPlateId,t.getStockListByCodes=getStockListByCodes,t.getStockListByIndexId=getStockListByIndexId,t.getNonrealtimeTools=getNonrealtimeTools,t.getPatterns=getPatterns,t.getPressureSupport=getPressureSupport,t.getInflectionData=getInflectionData,t.getAnalysisData=getAnalysisData},uYdA:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AXIS_X_HEIGHT=30,t.AXIS_Y_WIDTH=60,t.NAVBAR_HEIGHT=35,t.CONTROL_BAR_HEIGHT=22,t.HIT_TEST_TOLERANCE="ontouchstart"in document?12:4,t.SIDEBAR_WIDTH=314,t.SIDEBAR_FOLD_WIDTH=45,t.FOOTER_PANEL_HEIGHT=30,t.FOOTER_PANEL_UNFOLD_HEIGHT=320,t.TOOLBOX_WIDTH=52},ulXj:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("PjwK"),r("Vq7t"),r("unwN");var n=r("U7vG"),a=r("rdLu"),i=r("NBiX"),s=r("pUaQ"),l=r("PcI6"),c=r("nyAH"),u=r("Htct"),h=r("yk63"),d=r("HuvF"),p=r("GKYn"),f=["实时看盘","大盘概况","财务信息","所属板块","分析功能"],m=[n.createElement("svg",{viewBox:"0 0 20 20"},n.createElement("g",null,n.createElement("path",{d:"M10,4c-6,0-9,6-9,6s3,6,9,6s9-6,9-6S16,4,10,4z M10,14.5c-2.5,0-4.5-2-4.5-4.5s2-4.5,4.5-4.5s4.5,2,4.5,4.5S12.5,14.5,10,14.5z"}),n.createElement("path",{d:"M12,9c-0.6,0-1-0.4-1-1c0-0.3,0.1-0.5,0.3-0.7C10.9,7.1,10.5,7,10,7c-1.7,0-3,1.3-3,3c0,0.3,0,0.6,0.1,0.9C7.4,10.4,7.9,10,8.5,10c0.8,0,1.5,0.7,1.5,1.5c0,0.6-0.4,1.1-0.9,1.4C9.4,13,9.7,13,10,13c1.7,0,3-1.3,3-3c0-0.5-0.1-0.9-0.3-1.3C12.5,8.9,12.3,9,12,9z"}))),n.createElement("svg",{viewBox:"0 0 20 20"},n.createElement("g",null,n.createElement("path",{d:"M16.7,2.7h1.8v14.1h-1.8V2.7z M13.1,3.2l-0.2,0.1c-0.3,0.1-0.7,0-0.8-0.3c-0.1-0.1-0.1-0.3,0-0.4c0.1-0.1,0.2-0.3,0.4-0.3l2.8-0.9l0.3,2.5c0,0.1,0,0.3-0.1,0.4c-0.1,0.1-0.3,0.2-0.5,0.2c0,0,0,0-0.1,0c-0.3,0-0.6-0.2-0.6-0.5l0-0.4c-3.2,4.4-10.6,9.2-10.9,9.4c-0.1,0.1-0.2,0.1-0.4,0.1c-0.2,0-0.4-0.1-0.5-0.2c-0.1-0.1-0.2-0.2-0.1-0.4c0-0.1,0.1-0.3,0.2-0.4C2.7,12.2,10,7.5,13.1,3.2z M15.2,5.9v11h-1.8v-11H15.2z M12.1,9.1v7.7h-1.8V9.1H12.1z M8.9,12.5v4.3H7.1v-4.3H8.9z M5.5,14.2v2.6H3.7v-2.6H5.5z M19,18.5H1v-1.3h18L19,18.5L19,18.5z"}))),n.createElement("svg",{viewBox:"0 0 20 20"},n.createElement("g",null,n.createElement("path",{d:"M14.3,5.9l3.8,1l1-3.8l-0.7-0.2l-0.6,2.4C16.1,2.7,13.2,1,10,1c-5,0-9,4-9,9s4,9,9,9c3.3,0,6.2-1.8,7.8-4.5l-0.7-0.4c-1.4,2.4-4.1,4.1-7.1,4.1c-4.6,0-8.3-3.7-8.3-8.3S5.4,1.7,10,1.7c3.1,0,5.7,1.7,7.2,4.1l-2.7-0.7L14.3,5.9z"}),n.createElement("path",{d:"M10.4,14v-0.7c0.7,0,1.1-0.2,1.5-0.6c0.4-0.3,0.6-0.8,0.6-1.3c0-0.6-0.2-1-0.5-1.3c-0.3-0.3-0.8-0.5-1.6-0.7h0V7.7c0.5,0.1,0.9,0.2,1.3,0.5l0.6-0.8c-0.6-0.4-1.3-0.7-2-0.7V6.2H9.8v0.5c-0.6,0-1.1,0.2-1.5,0.6C8,7.6,7.8,8.1,7.8,8.6c0,0.5,0.2,1,0.5,1.2c0.3,0.3,0.8,0.5,1.5,0.7v1.8c-0.5-0.1-1.1-0.3-1.6-0.8l-0.7,0.8c0.7,0.6,1.5,1,2.3,1V14L10.4,14L10.4,14zM10.4,10.7c0.4,0.1,0.6,0.2,0.8,0.3c0.1,0.2,0.2,0.3,0.2,0.5s-0.1,0.4-0.3,0.5c-0.2,0.2-0.4,0.2-0.7,0.3V10.7z M9.1,9C9,8.9,8.9,8.7,8.9,8.5C8.9,8.3,9,8.1,9.1,8c0.2-0.2,0.4-0.2,0.7-0.3v1.6C9.4,9.3,9.2,9.1,9.1,9z"}))),n.createElement("svg",{viewBox:"0 0 20 20"},n.createElement("g",null,n.createElement("path",{d:"M10.6,10.7H1c0,4.1,4.2,8.4,9,8.4c5,0,9-4,9-9c0-1.4-0.3-2.8-0.9-4L10.6,10.7z"}),n.createElement("path",{d:"M6.3,1.6c0.1,0.2,4.2,7.2,4.2,7.2l6.9-4C15,1.2,10.3-0.1,6.3,1.6z M15.3,4.5l-4.2,2.4c-0.9-1.5-1.9-3.3-2.6-4.5C9,2.3,9.5,2.3,10,2.3C12,2.3,13.9,3.1,15.3,4.5z"}),n.createElement("path",{d:"M5,2.4C2.6,4,1.2,6.6,1,9.3l8,0L5,2.4z M4.6,4.5l1.9,3.3l-3.9,0C3,6.6,3.7,5.5,4.6,4.5z"}))),n.createElement("svg",{viewBox:"0 0 18 17.88"},n.createElement("g",null,n.createElement("path",{d:"M15.74,10.51A7.12,7.12,0,0,1,2.46,12.2a2.74,2.74,0,0,1-.75.12A2.75,2.75,0,0,1,.39,12a8.93,8.93,0,0,0,17.22-1.63,2.61,2.61,0,0,1-1.87.17Z"}),n.createElement("path",{d:"M2,6.8A7.12,7.12,0,0,1,15,5.47a2.55,2.55,0,0,1,1.84-.36A8.93,8.93,0,0,0,0,7.37a2.75,2.75,0,0,1,1.71-.61Z"}),n.createElement("path",{d:"M1.71,11.11a1.56,1.56,0,0,0,1.3-.7H5.84L7,13.73a.91.91,0,0,0,.81.6h0a.9.9,0,0,0,.82-.53l2.87-6.24.45.72a.88.88,0,0,0,.78.42h2.3a1.57,1.57,0,1,0,.1-1.81H13.3L12.23,5.18a.91.91,0,0,0-1.59.1L8,11,7.33,9.19a.91.91,0,0,0-.85-.6H2.95a1.56,1.56,0,1,0-1.24,2.51Z"})))],_=function(e){function Sidebar(t,r){var o=e.call(this,t,r)||this;return o._data={},o._chartLayout=r.chartLayout,o.state={popUpOprList:!1},o.onDataHandler=o.onDataHandler.bind(o),o.switchTabPage=o.switchTabPage.bind(o),o.symbolChangeHandler=o.symbolChangeHandler.bind(o),o.foldingBtnClickHandler=o.foldingBtnClickHandler.bind(o),o.showMoreOprHandler=o.showMoreOprHandler.bind(o),o.clickOprHandler=o.clickOprHandler.bind(o),o.hideOprListHandler=o.hideOprListHandler.bind(o),o}return o(Sidebar,e),Sidebar.prototype.shouldComponentUpdate=function(e,t){return!a.isEqual(this.props,e)||!a.isEqual(this.state,t)},Sidebar.prototype.componentDidMount=function(){var e=this._chartLayout,t=e.mainDatasource.symbolInfo;this._pollManager=new s.default(t,this.props.activeIndex),this._pollManager.addListener("data",this.onDataHandler),e.addListener("symbol_change",this.symbolChangeHandler),document.addEventListener("mousedown",this.hideOprListHandler),document.addEventListener("touchstart",this.hideOprListHandler),this._pollManager.start()},Sidebar.prototype.componentWillUnmount=function(){var e=this._chartLayout;this._pollManager.removeListener("data",this.onDataHandler),e.removeListener("symbol_change",this.symbolChangeHandler),document.removeEventListener("mousedown",this.hideOprListHandler),document.removeEventListener("touchstart",this.hideOprListHandler),this._pollManager.stop(),this._pollManager=null},Sidebar.prototype.componentWillReceiveProps=function(e){var t=this._chartLayout,r=e.activeIndex;e.folded||this.props.activeIndex===r||(this._pollManager.tabIndex=r),e.folded&&t.saveToLS("qchart.sidebar.folded",!1),t.saveToLS("qchart.sidebar.activeIndex",r)},Sidebar.prototype.render=function(){var e=this,t=this._chartLayout,r=this.props.height-44,o=this._data,a=o.stockInfo,i=o.capitalFlowInfo,s=o.realtimeTools,_=o.indexesInfo,y=o.financingInfo,g=o.plates,v=o.nonRealtimeTools,b=o.analysisData,E=null;switch(this.props.activeIndex){case 0:E=a?n.createElement(l.default,{stockInfo:a,capitalFlowInfo:i,height:r}):null;break;case 1:E=s&&_?n.createElement(c.default,{height:r,realtimeTools:s,indexesInfo:_,nonRealtimeTools:v}):null;break;case 2:E=n.createElement(u.default,{height:r,financingInfo:y});break;case 3:E=n.createElement(h.default,{height:r,plates:g});break;case 4:E=n.createElement(p.default,{height:r,stockInfo:a,analysisData:b})}return n.createElement("div",{className:"chart-sidebar "+(this.props.folded?"folded":""),style:{height:this.props.height,width:this.props.width}},!this.props.folded&&a?n.createElement(d.default,{symbolInfo:t.mainDatasource.symbolInfo,stockInfo:a}):null,n.createElement("div",{className:"data-window-tabs"},n.createElement("ul",{className:"tab-list"},n.createElement("a",{href:"javascript:;",className:"btn btn-more",onClick:this.showMoreOprHandler},n.createElement("i",null)),this.state.popUpOprList?n.createElement("ul",{className:"popup-menu",onMouseDown:this.clickOprHandler,onTouchStart:this.clickOprHandler},this.state.isSymbolAdded?n.createElement("li",{"data-opr":"delete-self-select"},"删除自选股"):n.createElement("li",{"data-opr":"add-self-select"},"加入自选股")):null,f.map(function(t,r){return n.createElement("li",{key:r,className:e.props.folded||e.props.activeIndex!==r?"":"active",title:t,"data-index":r,onClick:e.switchTabPage},m[r])})),n.createElement("div",{className:"data-page-list"},!this.props.folded&&E?E:null)),n.createElement("a",{href:"javascript:;",className:"sidebar-folding-btn "+(this.props.folded?"folded":""),onClick:this.foldingBtnClickHandler},n.createElement("span",null)))},Sidebar.prototype.onDataHandler=function(e){this._data=e,this.forceUpdate()},Sidebar.prototype.foldingBtnClickHandler=function(){var e=this._chartLayout,t=!this.props.folded;e.saveToLS("qchart.sidebar.folded",t),this.props.onChange&&this.props.onChange(t,this.props.activeIndex)},Sidebar.prototype.showMoreOprHandler=function(){var e=this._chartLayout,t=e.mainDatasource.symbolInfo,r=e.readFromLS("qchart.selfselectlist")||[];this.setState({popUpOprList:!0,isSymbolAdded:-1!==a.findIndex(r,{symbol:t.symbol})})},Sidebar.prototype.hideOprListHandler=function(e){this.state.popUpOprList&&(e.touches&&e.preventDefault(),this.setState({popUpOprList:!1}))},Sidebar.prototype.clickOprHandler=function(e){var t=e.target.dataset.opr,r=this._chartLayout,o=r.mainDatasource.symbolInfo;"add-self-select"===t?r.addSelfSelect(o):"delete-self-select"===t&&r.deleteSelfSelect(o)},Sidebar.prototype.switchTabPage=function(e){var t=+e.currentTarget.dataset.index;if(!this.props.folded&&this.props.activeIndex===t)return void this.foldingBtnClickHandler();this.props.onChange&&this.props.onChange(!1,t)},Sidebar.prototype.symbolChangeHandler=function(e){this._pollManager.symbolInfo=e,this._pollManager.restart()},Sidebar.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},Sidebar}(n.Component);t.default=_},un2I:function(e,t){},unwN:function(e,t){},vReJ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function AxisYRenderer(e){this._axis=e}return AxisYRenderer.prototype.draw=function(){var e=this._axis,t=e.chart,r=e.ctx,o=e.width,n=e.height,a=e,i=e.crosshair.point,s=e.crosshair.chart.hover;r.strokeStyle="#999999",r.lineWidth=1,r.translate(.5,.5),r.beginPath(),r.moveTo(0,0),r.lineTo(0,n),r.font="10px ans-serif",r.fillStyle="#999999",r.textAlign="left";for(var l=a.tickmark.getTickMarksByTimeBars(),c=0,u=l.length;c<u;c++){var h=l[c];r.moveTo(0,~~h.y),r.lineTo(5,~~h.y),r.fillText(h.value.toFixed(2).toString(),10,h.y+4)}if(r.closePath(),r.stroke(),t.datasource.resolution>"1"&&t.graphs.forEach(function(t){return t.plots.forEach(function(t){return t.priceLabels.forEach(function(t){var n=~~e.getYByValue(t.val);r.fillStyle=t.color,r.fillRect(0,n-6-4,o+8,20),r.fillStyle="#ffffff",r.fillText(t.val.toFixed(2).toString(),10,n+4)})})}),i&&s&&e.range){var d=i.y;r.fillStyle="#333333",r.fillRect(0,d-6-4,o+8,20),r.fillStyle="#999999",r.fillText(e.getValueByY(d).toFixed(2).toString(),10,~~(d+4))}},AxisYRenderer}();t.default=o},wRi7:function(e,t,r){"use strict";function cloneObj(e){return JSON.parse(JSON.stringify(e))}function getParameterByName(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}function darkenRGB(e){var t=e.match(/\((.*?)\)/);if(!t)throw new Error("rgbColor is not a valid rgb color string.");var r=t[1].split(","),o=r.slice(0,3).map(function(e){return(+e-50>0?+e-50:0)+""});return 4===r.length&&o.push(r[3]),"rgb("+o.join(",")+")"}function pad(e,t,r){return void 0===e&&(e=""),void 0===r&&(r="0"),e.length>=t?e:new Array(t-e.length+1).join(r)+e}function padRight(e,t,r){return void 0===e&&(e=""),void 0===r&&(r="0"),e.length>=t?e:e+new Array(t-e.length+1).join(r)}function clientOffset(e){for(var t=0,r=0;e!==document.body;)t+=e.offsetTop,r+=e.offsetLeft,e=e.offsetParent;return{top:t,left:r}}function formatNumber(e,t){return void 0===t&&(t=0),Math.abs(e/1e12)>=1?(e/1e12).toFixed(t)+"万亿":Math.abs(e/1e8)>=1?(e/1e8).toFixed(t)+"亿":Math.abs(e/1e4)>=1?(e/1e4).toFixed(t)+"万":e.toFixed(t)}function pointToSegDist(e,t,r,o,n,a){var i=(n-r)*(e-r)+(a-o)*(t-o);if(i<=0)return Math.sqrt((e-r)*(e-r)+(t-o)*(t-o));var s=(n-r)*(n-r)+(a-o)*(a-o);if(i>=s)return Math.sqrt((e-n)*(e-n)+(t-a)*(t-a));var l=i/s,c=r+(n-r)*l,u=o+(a-o)*l;return Math.sqrt((e-c)*(e-c)+(t-u)*(t-u))}function isPointInRect(e,t,r,o,n,a){return e>=Math.min(r,n)&&e<=Math.max(r,n)&&t>=Math.min(o,a)&&t<=Math.max(o,a)}function getCanvasHeight(e){return e.style.height?parseInt(e.style.height):e.height}function getCanvasWidth(e){return e.style.width?parseInt(e.style.width):e.width}function animationQueue(){var e={_itvl:0,_queue:[],delay:function(t){return e._queue.push(["delay",t]),e._go(),e},enqueue:function(t){return e._queue.push(["action",t]),e._go(),e},_go:function(){clearTimeout(e._itvl),e._itvl=setTimeout(function(){var t=e._queue.shift();t&&("delay"===t[0]?setTimeout(function(){return e._go()},t[1]):"action"===t[0]&&(t[1](),setTimeout(function(){return e._go()},0)))},0)}};return e}function requestFullscreen(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?(window.navigator.userAgent.toUpperCase().indexOf("CHROME"),e.webkitRequestFullScreen()):e.mozRequestFullScreen&&e.mozRequestFullScreen()}function exitFullscreen(){["exitFullscreen","mozCancelFullScreen","mozExitFullscreen","webkitExitFullscreen","msExitFullscreen"].some(function(e){if("function"==typeof document[e])return document[e](),!0})}function getFullScreenElement(){var e=null;return["fullscreenElement","webkitFullscreenElement","mozFullscreenElement","msFullscreenElement"].some(function(t){if(t in document)return e=document[t],!0}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.cloneObj=cloneObj,t.getParameterByName=getParameterByName,t.darkenRGB=darkenRGB,t.pad=pad,t.padRight=padRight,t.clientOffset=clientOffset,t.formatNumber=formatNumber,t.pointToSegDist=pointToSegDist,t.isPointInRect=isPointInRect,t.getCanvasHeight=getCanvasHeight,t.getCanvasWidth=getCanvasWidth,t.animationQueue=animationQueue,t.requestFullscreen=requestFullscreen,t.exitFullscreen=exitFullscreen,t.getFullScreenElement=getFullScreenElement},x85n:function(e,t){},xlyV:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}(),n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e};Object.defineProperty(t,"__esModule",{value:!0}),r("pip8");var a=r("dREm"),i=r("U7vG"),s=r("rdLu"),l=r("NvYq"),c=r("xuHO"),u=r("bIqt"),h=r("aTSk"),d=r("TsRb"),p=r("HJCg"),f=r("7B1/"),m=r("ulXj"),_=r("3663"),y=r("Lk2d"),g=r("nbee"),v=r("KVhT"),b=r("H9vw"),E=r("Cqed"),x=r("wRi7"),w=r("b2uV"),T=r("2OPA"),S=r("GawB"),L=r("NBiX"),M=function(e){function ChartLayout(t,r){var o=e.call(this,t,r)||this;o._chartLayout=o.context.chartLayout;var n=o._chartLayout;return n.component=o,o.state={sidebarFolded:n.readFromLS("qchart.sidebar.folded"),sidebarActiveIndex:n.readFromLS("qchart.sidebar.activeIndex")||0,footerPanelFolded:!0,footerPanelActiveIndex:0,loaded:!1,showAbout:!o._chartLayout.readFromLS("chart.welcome"),showGoToDate:!1},o.updateView=o.updateView.bind(o),o.onSymbolChange=o.onSymbolChange.bind(o),o.onResolutionChange=o.onResolutionChange.bind(o),o.onRightChange=o.onRightChange.bind(o),o.onAddComparison=o.onAddComparison.bind(o),o.onRemoveComparison=o.onRemoveComparison.bind(o),o.onAddStudy=o.onAddStudy.bind(o),o.onStudyModified=o.onStudyModified.bind(o),o.onFullScreen=o.onFullScreen.bind(o),o.sidebarChangeHandler=o.sidebarChangeHandler.bind(o),o.footerPanelChangeHandler=o.footerPanelChangeHandler.bind(o),o.wheelHandler=o.wheelHandler.bind(o),o}return o(ChartLayout,e),ChartLayout.prototype.shouldComponentUpdate=function(e,t){return!s.isEqual(this.state,t)||!s.isEqual(this.props,e)},ChartLayout.prototype.componentDidMount=function(){var e=this,t=this._chartLayout,r=new a({}).spin(this.refs.root),o=t.readFromLS("qchart.resolution")||this.props.resolution,n=new b.StockDatasource(this.props.defaultSymbol,o,this.props.right),i=x.getParameterByName("start")||null;t.saveToLS("chart.welcome",!0),Promise.all([t.getServerTime(),n.resolveSymbol(this.props.symbol)]).then(function(){history.replaceState(null,document.title,"/?symbol="+n.symbol),e.prepareMainChart(n,o),e.initEvents(),r.stop(),e.setState({loaded:!0},function(){var e=this;t.addPatterns(),i&&(this.goToDateChecker=setInterval(function(){t.mainDatasource.loaded()>0&&(t.goToDate(+i),clearInterval(e.goToDateChecker))},100))})})},ChartLayout.prototype.componentWillUnmount=function(){var e=this._chartLayout;e.removeAllListeners(),e.axisx.removeAllListeners()},ChartLayout.prototype.componentDidUpdate=function(){this._chartLayout.fullUpdate()},ChartLayout.prototype.prepareMainChart=function(e,t){var r=this._chartLayout,o=new v.default(r),n=new w.default(e,o),a=new T.default(e,o),i=new g.default(r,e,n,a,o,!0,!0);a.chart=i,o.chart=i,r.axisx=n,r.mainDatasource=e,i.addGraph(new S.default(e,i,!0,!0,!1,"1"===t&&"candle"===this.props.shape?"line":this.props.shape,{lineWidth:2})),r.addChart(i),r.resetStudies()},ChartLayout.prototype.initEvents=function(){var e=this._chartLayout;e.axisx.addListener("offset_change",e.fullUpdate),e.axisx.addListener("barwidth_change",e.fullUpdate),e.addListener("chart_add",this.updateView),e.addListener("chart_remove",this.updateView),e.addListener("graph_add",e.lightUpdate),e.addListener("graph_remove",e.lightUpdate),e.addListener("graph_modify",e.lightUpdate),e.addListener("graph_hover",e.lightUpdate),e.addListener("graph_select",e.lightUpdate),e.addListener("cursor_move",e.lightUpdate),e.addListener("barmargin_change",e.lightUpdate),e.addListener("drawingtool_begin",e.lightUpdate),e.addListener("drawingtool_end",e.lightUpdate),e.addListener("drawingtool_setvertex",e.lightUpdate),e.addListener("drawingtool_remove",e.lightUpdate),e.addListener("editmode_change",e.lightUpdate),e.addListener("patterns_add",e.lightUpdate),e.addListener("patterns_remove",e.lightUpdate),e.addListener("pattern_modify",e.lightUpdate),e.addListener("gap_visibility_change",e.lightUpdate)},ChartLayout.prototype.render=function(){var e=this.props.width,t=this.props.height;if(!this.state.loaded)return i.createElement("div",{className:"chart-layout",ref:"root",style:{height:t+"px",width:e+"px"}});var r=this._chartLayout,o=e>768&&t>450,a=!!o&&this.props.showsidebar,s=!!o&&this.props.showtoolbox,g=!!o&&this.props.showfooterpanel,v=e-12;s&&(v-=E.TOOLBOX_WIDTH),a&&(v-=this.state.sidebarFolded?E.SIDEBAR_FOLD_WIDTH:E.SIDEBAR_WIDTH);var b=this.props.shownavbar,x=this.props.showcontrolbar,w=t-E.AXIS_X_HEIGHT-12;b&&(w-=E.NAVBAR_HEIGHT),x&&(w-=E.CONTROL_BAR_HEIGHT),g&&(w-=this.state.footerPanelFolded?E.FOOTER_PANEL_HEIGHT:E.FOOTER_PANEL_UNFOLD_HEIGHT),r.charts.length>1&&(w-=r.charts.length-1);for(var T=r.charts.length-1,S=~~((1-.3*T>.3?1-.3*T:.3)*w),L=~~((w-S)/T),M=[],C=0,P=r.charts.length,O=void 0;C<P;C++)O=r.charts[C],M.push(i.createElement(h.default,{key:O.id,chart:O,height:O.isMain?S:L,width:v})),C<P-1&&M.push(i.createElement("div",{key:O.id+"_separator",className:"chart-separator"}));return i.createElement("div",{className:"chart-layout",ref:"root",style:{height:t+"px",width:e+"px"}},s?i.createElement(p.default,null):null,this.state.showAbout?i.createElement(l.default,null):null,this.state.showGoToDate?i.createElement(c.default,null):null,this.state.contextMenuConfig?i.createElement(u.default,n({},this.state.contextMenuConfig)):null,a?i.createElement(m.default,{folded:this.state.sidebarFolded,activeIndex:this.state.sidebarActiveIndex,onChange:this.sidebarChangeHandler,width:this.state.sidebarFolded?E.SIDEBAR_FOLD_WIDTH:E.SIDEBAR_WIDTH,height:this.props.height}):null,b?i.createElement(f.default,{width:v,onSymbolChange:this.onSymbolChange,onResolutionChange:this.onResolutionChange,onAddComparison:this.onAddComparison,onRemoveComparison:this.onRemoveComparison,onAddStudy:this.onAddStudy,onStudyModified:this.onStudyModified,onFullScreen:this.onFullScreen,onRightChange:this.onRightChange}):null,i.createElement("div",{className:"chart-body",style:{width:v+2+"px"},onWheel:this.wheelHandler},M,i.createElement(d.default,{height:E.AXIS_X_HEIGHT,width:v-E.AXIS_Y_WIDTH})),x?i.createElement(_.default,{width:v+2}):null,g?i.createElement(y.default,{folded:this.state.footerPanelFolded,activeIndex:this.state.footerPanelActiveIndex,onChange:this.footerPanelChangeHandler,width:v+2}):null)},ChartLayout.prototype.onSymbolChange=function(e){this._chartLayout.setSymbol(e)},ChartLayout.prototype.onResolutionChange=function(e){this._chartLayout.saveToLS("qchart.resolution",e),this._chartLayout.setResolution(e)},ChartLayout.prototype.onRightChange=function(e){this._chartLayout.setRight(e)},ChartLayout.prototype.onAddComparison=function(e){return this._chartLayout.addComparison(e)},ChartLayout.prototype.onRemoveComparison=function(e){this._chartLayout.removeComparison(e)},ChartLayout.prototype.onAddStudy=function(e){this._chartLayout.addStudy(e)},ChartLayout.prototype.onStudyModified=function(e,t){this._chartLayout.modifyGraph(e,t)},ChartLayout.prototype.onFullScreen=function(){var e=this.refs.root;x.getFullScreenElement()===e?x.exitFullscreen():x.requestFullscreen(e)},ChartLayout.prototype.sidebarChangeHandler=function(e,t){this.setState({sidebarFolded:e,sidebarActiveIndex:t})},ChartLayout.prototype.footerPanelChangeHandler=function(e,t){this.setState({footerPanelFolded:e,footerPanelActiveIndex:t})},ChartLayout.prototype.wheelHandler=function(e){if(e.preventDefault(),0!==this._chartLayout.mainDatasource.loaded()){this._chartLayout.axisx.offset-=e.deltaX}},ChartLayout.prototype.updateView=function(){this.forceUpdate()},ChartLayout.propTypes={axis:i.PropTypes.oneOf(["left","right","both"]),resolution:i.PropTypes.oneOf(["1","5","15","30","60","D","W","M"]),scalable:i.PropTypes.bool,scrollable:i.PropTypes.bool,shape:i.PropTypes.oneOf(["mountain","line","column","candle"]),showtoolbox:i.PropTypes.bool,showcontrolbar:i.PropTypes.bool,showfooterpanel:i.PropTypes.bool,showsidebar:i.PropTypes.bool,shownavbar:i.PropTypes.bool,study:i.PropTypes.oneOf(["MA","MACD","BOLL","KDJ","VOLUME"]),to:i.PropTypes.number,type:i.PropTypes.oneOf(["snapshot","realtime"]),width:i.PropTypes.number.isRequired,right:i.PropTypes.oneOf([0,1,2])},ChartLayout.defaultProps={axis:"right",resolution:"1",scalable:!0,scrollable:!0,shape:"line",showtoolbox:!0,showcontrolbar:!0,shownavbar:!0,showsidebar:!0,showfooterpanel:!0,type:"realtime",right:1},ChartLayout.contextTypes={chartLayout:i.PropTypes.instanceOf(L.default)},ChartLayout}(i.Component);t.default=M},xuHO:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("h0hR"),r("Vq7t"),r("SjNc");var n=r("U7vG"),a=r("PJh5"),i=r("8ijy"),s=r("IloD"),l=r("NBiX"),c=r("Cqed"),u=function(e){function GoToDateDialog(t,r){var o=e.call(this,t,r)||this;return o._inputDateValue=null,o._chartLayout=r.chartLayout,o.state={},o.dateChangeHandler=o.dateChangeHandler.bind(o),o.datePickerBlurHandler=o.datePickerBlurHandler.bind(o),o.dialogCloseHandler=o.dialogCloseHandler.bind(o),o.goToDateHandler=o.goToDateHandler.bind(o),o.checkDateHandler=o.checkDateHandler.bind(o),o}return o(GoToDateDialog,e),GoToDateDialog.prototype.shouldComponentUpdate=function(e,t){return!1},GoToDateDialog.prototype.render=function(){var e=this._chartLayout,t=e.mainDatasource.resolution>"60",r=e.mainDatasource,o=new Date(1e3*r.now());this.correctTime(o);var l=this._inputDateValue?this._inputDateValue:a(o).minute(o.getMinutes()-o.getMinutes()%5),u=t?l.format("YYYY-MM-DD"):l.format("YYYY-MM-DD HH:mm");return this._inputDateValue=l,n.createElement(s.default,{title:"定位时间",className:"chart-gotodate",onClose:this.dialogCloseHandler},n.createElement("div",null,n.createElement("input",{ref:"dateInput",type:"text",readOnly:!0,defaultValue:u}),n.createElement("button",{className:"btn btn-blue",onClick:this.goToDateHandler},"前往")),n.createElement(i,{input:!1,value:l.toDate(),open:!0,isValidDate:this.checkDateHandler,dateFormat:!0,timeFormat:!t||null,timeConstraints:{hours:{min:c.OPEN_HOUR,max:c.CLOSE_HOUR},minutes:{step:5}},closeOnSelect:!1,disableOnClickOutside:!0,locale:"zh-cn",onBlur:this.datePickerBlurHandler,onChange:this.dateChangeHandler}))},GoToDateDialog.prototype.goToDateHandler=function(){var e=this._chartLayout,t=e.mainDatasource.resolution,r=this._inputDateValue.toDate();r.setSeconds(0),t>"60"&&(r.setHours(0),r.setMinutes(0)),e.goToDate(~~(r.getTime()/1e3)),this.dialogCloseHandler()},GoToDateDialog.prototype.dialogCloseHandler=function(){this._chartLayout.toggleGoToDate(!1)},GoToDateDialog.prototype.dateChangeHandler=function(e){var t=this._chartLayout.mainDatasource.resolution;this._inputDateValue=e,this.refs.dateInput.value=e.format(t>"60"?e.format("YYYY-MM-DD"):e.format("YYYY-MM-DD HH:mm"))},GoToDateDialog.prototype.datePickerBlurHandler=function(){this.setState({})},GoToDateDialog.prototype.checkDateHandler=function(e,t){var r=this._chartLayout,o=r.mainDatasource.resolution,n=r.mainDatasource.now(),i=a(1e3*n),s=a(1e3*n);if(e.isAfter(i))return!1;switch(o){case"1":return s.subtract(1,"months"),e.isAfter(s);case"5":return s.subtract(2,"months"),e.isAfter(s);case"15":return s.subtract(6,"months"),e.isAfter(s);case"30":return s.subtract(1,"years"),e.isAfter(s);case"60":return s.subtract(2,"years"),e.isAfter(s);case"D":case"W":case"M":return!0;default:throw new Error("Unsupported resolution")}},GoToDateDialog.prototype.correctTime=function(e){var t=e.getHours(),r=e.getMinutes();t<c.OPEN_HOUR||t===c.OPEN_HOUR&&r<c.OPEN_MINUTE?(e.setHours(c.OPEN_HOUR),e.setMinutes(c.OPEN_MINUTE)):(t>c.CLOSE_HOUR||t===c.CLOSE_HOUR&&r>c.CLOSE_MINUTE)&&(e.setHours(c.CLOSE_HOUR),e.setMinutes(c.CLOSE_MINUTE))},GoToDateDialog.contextTypes={chartLayout:n.PropTypes.instanceOf(l.default)},GoToDateDialog}(n.Component);t.default=u},yk63:function(e,t,r){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),r("gi10");var n=r("U7vG"),a=r("bHfy"),i=r("H9vw"),s=function(e){function Plates(){var t=e.call(this)||this;return t.timer=null,t.state={activeIndex:-1,stocks:null},t.selectPlate=t.selectPlate.bind(t),t}return o(Plates,e),Plates.prototype.componentDidMount=function(){this._platesScroll=new a(this.refs.plates,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0})},Plates.prototype.componentWillUnmount=function(){this._platesScroll.destroy(),this._platesScroll=null,this.cancelStockListTimer()},Plates.prototype.componentDidUpdate=function(){this._platesScroll.refresh()},Plates.prototype.shouldComponentUpdate=function(e,t){var r=this.props,o=this.state;return r.plates!==e.plates||r.height!==e.height||o.stocks!==t.stocks||o.activeIndex!==t.activeIndex},Plates.prototype.render=function(){var e=this,t=this.props.plates;return t?n.createElement("div",{className:"plates",ref:"plates",style:{height:this.props.height+"px"}},n.createElement("div",null,n.createElement("h3",null,"所属板块"),n.createElement("ul",{className:"plate-list"},t.map(function(t,r){return n.createElement("li",{key:t.n,className:e.state.activeIndex===r?"active":""},n.createElement("h4",{"data-index":r,"data-id":t.bk_id,onClick:e.selectPlate},t.n),e.state.activeIndex===r?n.createElement("ul",{className:"stocks-in-same-plate"},e.state.stocks?e.state.stocks.map(function(e){var t=e.p_change>0?"positive":e.p_change<0?"negtive":"";return n.createElement("li",{key:e.c},n.createElement("span",{className:"stock-name"},n.createElement("b",null,e.n),n.createElement("i",null,e.c)),n.createElement("span",{className:t+" price"},e.price),n.createElement("span",{className:t+" change-rate"},e.p_change>0?"+":"",(100*e.p_change).toFixed(2),"%"))}):null):null)})))):n.createElement("div",{className:"plates",ref:"plates",style:{height:this.props.height+"px"}},n.createElement("div",{className:"no-plates"},"非个股无板块信息"))},Plates.prototype.selectPlate=function(e){e.touches&&e.preventDefault();var t=+e.target.dataset.index,r=e.target.dataset.id;t===this.state.activeIndex?(this.cancelStockListTimer(),this.setState({activeIndex:-1})):(this.loadStockList(r),this.setState({activeIndex:t,stocks:null}))},Plates.prototype.loadStockList=function(e){var t=this;this.cancelStockListTimer(),i.getStockListByPlateId(e).then(function(r){var o=1e3*r.data.intver;t.setState({stocks:r.data.list}),t.timer=o?setTimeout(function(){return t.loadStockList(e)},o):-1})},Plates.prototype.cancelStockListTimer=function(){clearTimeout(this.timer)},Plates}(n.Component);t.default=s}},["qMEF"]);
//# sourceMappingURL=main-885c6350.js.map