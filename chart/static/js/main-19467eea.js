webpackJsonp([0],{"+d7d":function(t,e,r){"use strict";var o=function(){function PlotList(){this.cache=[]}return PlotList.prototype.search=function(t){return 0===this.cache.length?-1:t<this.cache[0].time||t>this.cache[this.cache.length-1].time?-1:this.bsearch(t,0,this.cache.length-1)},PlotList.prototype.get=function(t){return this.cache[t]||null},PlotList.prototype.first=function(){return this.cache[0]||null},PlotList.prototype.last=function(){return this.cache[this.cache.length-1]||null},PlotList.prototype.size=function(){return this.cache.length},PlotList.prototype.slice=function(t,e){return this.cache.slice(t,e)},PlotList.prototype.range=function(t,e){var r=this.search(t),o=this.search(e);if(-1===r){if(!this.first()||e<this.first().time)return[];r=0}if(-1===o){if(!this.last()||t>this.last().time)return[];o=this.cache.length-1}return this.cache.slice(r,o+1)},PlotList.prototype.merge=function(t){if(t.length){t=t.sort(function(t,e){return t.time-e.time});var e=this.cache,r=t[0],o=t[t.length-1],n=this.cache[0],i=this.cache[this.cache.length-1];if(n&&i)if(r.time>i.time)this.cache=e.concat(t);else if(o.time<n.time)this.cache=t.concat(e);else{var a=void 0;a=n.time<r.time?e.slice(0,this.search(r.time)).concat(t):t,i.time>o.time&&(a=a.concat(e.slice(this.search(o.time)+1))),this.cache=a}else this.cache=t}},PlotList.prototype.clear=function(){this.cache=[]},PlotList.prototype.bsearch=function(t,e,r,o){void 0===o&&(o=!0);var n=~~((e+r)/2),i=this.cache[n].time;return e===r?t===i?n:o?n:-1:i===t?n:i>t?this.bsearch(t,e,n):this.bsearch(t,n+1,r)},PlotList}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},"+vTI":function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("VzTM");var n=r("U7vG"),i=r("rdLu"),a=r("NBiX"),s=function(t){function SearchBox(e,r){var o=this;t.call(this,e,r),this.searchSymbols=i.debounce(function(t){return o.setState({loading:!0}),o.context.chartLayout.mainDatasource.searchSymbols(t).then(function(t){o.setState({loading:!1,results:t})})},300),this._chartLayout=r.chartLayout,this.state={focus:!1,loading:!1,results:null,selectedIndex:0}}return o(SearchBox,t),SearchBox.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.props,t)||!i.isEqual(this.state,e)},SearchBox.prototype.render=function(){var t=this,e=this.state,r=e.focus,o=e.loading,i=e.results,a=e.selectedIndex;return n.createElement("div",{className:"chart-searchbox "+this.props.className+" "+(r?"extended":"")},n.createElement("input",{className:"chart-searchbox-input",defaultValue:"",type:"text",maxLength:100,placeholder:this.props.placeholder,ref:"input",onKeyDown:this.keyDownHandler.bind(this),onFocus:this.inputFocosHandler.bind(this),onBlur:this.inputBlurHandler.bind(this),onInput:this.inputHandler.bind(this)}),n.createElement("ul",{className:"chart-searchresults",onClick:this.selectSymbolHandler.bind(this),style:{display:r&&(o||i)?"block":"none"}},o?n.createElement("li",{className:"loading"}):null,o||!i||i.length?null:n.createElement("li",{className:"no-results"},"查询结果为空"),!o&&i?i.map(function(e,r){return n.createElement("li",{key:e.symbol,"data-index":r,onMouseEnter:t.mouseEnterHandler.bind(t),className:"symbol-item "+(a===r?"selected":"")},n.createElement("span",{className:"symbol-code"},e.symbol),n.createElement("span",{className:"symbol-name"},e.description),n.createElement("span",{className:"symbol-exchanger"},e.type,"-",e.exchange))}):null))},SearchBox.prototype.selectSymbolHandler=function(){var t=this,e=this.state.selectedIndex,r=this.state.results[e];this.props.onSelect(r.symbol),this.props.autofill&&setTimeout(function(){t.refs.input.value=r.symbol,t.refs.input.blur()},300)},SearchBox.prototype.inputFocosHandler=function(){var t=this.refs.input;t.selectionStart=0,t.selectionEnd=t.value.length,this.setState({focus:!0,results:null,selectedIndex:0})},SearchBox.prototype.inputBlurHandler=function(){var t=this;setTimeout(function(){t.setState({focus:!1,selectedIndex:0})},300)},SearchBox.prototype.inputHandler=function(){var t=this.refs.input,e=t.value,r=t.selectionStart;t.value=e.toUpperCase(),t.selectionStart=r,e.length?this.searchSymbols(e):this.setState({results:null,selectedIndex:0})},SearchBox.prototype.mouseEnterHandler=function(t){var e=+t.currentTarget.dataset.index;this.setState({selectedIndex:e})},SearchBox.prototype.keyDownHandler=function(t){var e=this.state.results?this.state.results.length:0,r=this.state.selectedIndex;switch(t.keyCode){case 38:this.setState({selectedIndex:r-1<0?e-1:r-1});break;case 40:this.setState({selectedIndex:(r+1)%e});break;case 13:this.selectSymbolHandler()}},SearchBox.defaultProps={className:"",placeholder:"",autofill:!1},SearchBox.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},SearchBox}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=s},"/5Qm":function(t,e,r){"use strict";var o,n=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=r("rdLu"),a=r("Lv/5"),s=r("Cqed"),l=r("wRi7");!function(t){t[t.X=0]="X",t[t.TIME=1]="TIME",t[t.VALUE=2]="VALUE"}(o||(o={}));var c={color:"rgba( 60, 120, 240, 1)",fillColor:"rgba( 60, 120, 216, 1)",lineWidth:2},h=function(t){function MountainChartRenderer(e,r){t.call(this,e,i.defaults(r,c))}return n(MountainChartRenderer,t),MountainChartRenderer.prototype.hitTest=function(){var t=this._plotModel,e=t.graph,r=e.chart,n=r.axisY,i=e.isPrice?n.range:e.getRangeY(),a=t.getCurBar(),c=t.getPrevBar(),h=t.getNextBar();if(!a)return!1;var u=r.crosshair.point,d=u.x,p=u.y,f=c?c[o.X]:0,m=c?n.getYByValue(c[o.VALUE],i):0,y=a[o.X],g=n.getYByValue(a[o.VALUE],i),_=h?h[o.X]:0,v=h?n.getYByValue(h[o.VALUE],i):0,b=Number.MAX_VALUE,E=Number.MAX_VALUE;return c&&(b=l.pointToSegDist(d,p,f,m,y,g)),h&&(E=l.pointToSegDist(d,p,y,g,_,v)),b<s.HIT_TEST_TOLERANCE||E<s.HIT_TEST_TOLERANCE},MountainChartRenderer.prototype.calcRangeY=function(){var t=this._plotModel.getVisibleBars();if(!t.length)return null;var e={max:-Number.MAX_VALUE,min:Number.MAX_VALUE};return t.reduce(function(t,e){var r=e;return r[o.VALUE]<t.min&&(t.min=r[o.VALUE]),r[o.VALUE]>t.max&&(t.max=r[o.VALUE]),t},e)},MountainChartRenderer.prototype.draw=function(t){var e=this._plotModel,r=e.getVisibleBars();if(r.length){var n=e.graph,i=n.chart,a=i.axisY,s=i.height,l=n.isPrice?a.range:n.getRangeY(),c=this.style.histogramBase,h="number"==typeof c?a.getYByValue(c,l):-1;t.strokeStyle=this.style.color,t.lineWidth=this.style.lineWidth,t.fillStyle=this.style.fillColor||this.style.color,t.beginPath();var u,d=r.length;d&&(u=r[0],t.moveTo(~~u[o.X],~~a.getYByValue(u[o.VALUE],l)));for(var p=0;p<d;p++)u=r[p],t.lineTo(~~u[o.X],~~a.getYByValue(u[o.VALUE],l));t.stroke(),"number"==typeof c?(t.lineTo(r[d-1][o.X],h),t.lineTo(r[0][o.X],h)):(t.lineTo(r[d-1][o.X],s),t.lineTo(r[0][o.X],s)),t.closePath(),t.fill()}},MountainChartRenderer.prototype.getSelectionYByBar=function(t){var e=this._plotModel,r=e.graph,n=r.chart,i=n.axisY,a=r.isPrice?i.range:r.getRangeY();return~~i.getYByValue(t[o.VALUE],a)},MountainChartRenderer}(a.BaseChartRenderer);e.MountainChartRenderer=h},"/QIH":function(t,e){},"/bDT":function(t,e,r){"use strict";function __export(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}__export(r("EVIZ")),__export(r("tub9")),__export(r("Uu/m"))},"04Un":function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("311T"),r("Vq7t");var n=r("U7vG"),i=r("rdLu"),a=r("NBiX"),s=r("+vTI"),l=r("IloD"),c=[[["sh000001","上证指数"],["sz399001","深证指数"]],[["sz399300","沪深300"],["sz399005","中小板指"]],[["sz399006","创业板指"]]],h=function(t){function Compare(e,r){t.call(this,e,r),this._indexesCheckState={},this._chartLayout=r.chartLayout,this.state={showCompareDialog:!1},this.showDialogHandler=this.showDialogHandler.bind(this),this.dialogCloseHandler=this.dialogCloseHandler.bind(this),this.selectSymbolHandler=this.selectSymbolHandler.bind(this),this.checkChangeHandler=this.checkChangeHandler.bind(this),this.graphRemoveHandler=this.graphRemoveHandler.bind(this)}return o(Compare,t),Compare.prototype.componentDidMount=function(){this._chartLayout.addListener("graph_remove",this.graphRemoveHandler)},Compare.prototype.componentWillUnmount=function(){this._chartLayout.removeListener("graph_remove",this.graphRemoveHandler)},Compare.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.props,t)||!i.isEqual(this.state,e)},Compare.prototype.render=function(){var t=this;return n.createElement("div",{className:"chart-compare chart-btn-group"},n.createElement("button",{className:"btn",onClick:this.showDialogHandler},"对比"),this.state.showCompareDialog?n.createElement(l.default,{title:"对比",width:320,className:"chart-compare-dialog",onClose:this.dialogCloseHandler},n.createElement(s.default,{className:"chart-compare-search",placeholder:"输入检索股票",onSelect:this.selectSymbolHandler}),c.map(function(e,r){return n.createElement("div",{key:r,className:"index-shortcut"},e.map(function(e){return n.createElement("div",{key:e[0]},n.createElement("input",{id:"index_"+e[0],type:"checkbox",value:e[0],defaultChecked:!!t._indexesCheckState[e[0]],onChange:t.checkChangeHandler}),n.createElement("label",{htmlFor:"index_"+e[0]},e[1]))}))})):null)},Compare.prototype.showDialogHandler=function(){this.setState({showCompareDialog:!0})},Compare.prototype.dialogCloseHandler=function(){this.setState({showCompareDialog:!1})},Compare.prototype.selectSymbolHandler=function(t){this._chartLayout.addComparison(t)},Compare.prototype.checkChangeHandler=function(t){var e=t.target.checked,r=t.target.value;e?this._indexesCheckState[r]=this.props.onAddComparison(r):(this.props.onRemoveComparison(this._indexesCheckState[r]),this._indexesCheckState[r]=null)},Compare.prototype.graphRemoveHandler=function(t){var e=this._indexesCheckState;Object.keys(e).forEach(function(r){t.isComparison&&t.id===e[r]&&(e[r]=null)})},Compare.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},Compare}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=h},"1JLH":function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("rdLu"),i=r("PJh5"),a=r("wRi7"),s=r("oJNF"),l=r("Cqed"),c=[["起始时间","startTime","终止时间","endTime"],["起始价","startPrice","终止价","endPrice"],["最高","high","最低","low"],["涨跌幅","changeRate","振幅","amplitude"],["总手","volume","金额","amount"],["阳线","upCount","阴线","downCount"],["十字星","crossCount"]],h={startTime:"#000",endTime:"#000",startPrice:"#000",endPrice:null,high:"#d32f2f",low:"#00796b",changeRate:null,amplitude:"#54a9ff",volume:"#54a9ff",amount:"#54a9ff",upCount:"#d32f2f",downCount:"#00796b",crossCount:"#000"},u=function(t){function DateRangeRenderer(e){t.call(this),this._datasource=e}return o(DateRangeRenderer,t),DateRangeRenderer.prototype.isNowVisible=function(){var t=this._chart.axisX,e=t.getVisibleTimeBars(),r=this._vertexes;return r[0].time<=e[e.length-1].time&&r[1].time>=e[0].time},Object.defineProperty(DateRangeRenderer.prototype,"selected",{set:function(t){t!==this._selected&&(this._selected=t,this._isValid=!1),t||this._chart.removeDrawingTool(this)},enumerable:!0,configurable:!0}),Object.defineProperty(DateRangeRenderer.prototype,"vertexes",{get:function(){var t=this._chart.axisY,e=t.range;return this._vertexes.map(function(t){return{time:t.time,value:(e.max+e.min)/2}})},enumerable:!0,configurable:!0}),Object.defineProperty(DateRangeRenderer.prototype,"statData",{get:function(){if(this._isValid&&this.isFinished())return this._statData;var t,e=this._datasource,r=this._chart.axisX,o=this._vertexes[0].time,s=this._vertexes.length>1?this._vertexes[1].time:r.findTimeBarByX(this.getCursor().x).time;o>s&&(t=o,o=s,s=t);var l=e.range(o,s);if(0===l.length)return this._statData=null;var c=e.resolution>="D"?"YYYY-MM-DD":"YYYY-MM-DD HH:mm",h=l[0].open,u=l[l.length-1].close,d=Math.max.apply(Math,n.pluck(l,"high")),p=Math.min.apply(Math,n.pluck(l,"low")),f=a.formatNumber(n.pluck(l,"volume").reduce(function(t,e){return t+e},0),2)+"手",m=a.formatNumber(n.pluck(l,"amount").reduce(function(t,e){return t+e},0),2),y=l.reduce(function(t,e){return e.close>=e.open?t+1:t},0),g=l.reduce(function(t,e){return e.close<e.open?t+1:t},0),_=l.reduce(function(t,e){return Math.abs((e.open-e.close)/(e.high-e.low))<.2?t+1:t},0);return this._statData={startTime:i(1e3*l[0].time).format(c),endTime:i(1e3*l[l.length-1].time).format(c),startPrice:h,endPrice:u,high:d,low:p,changeRate:(u>=h?"+":"")+(100*(u/h-1)).toFixed(2)+"%",amplitude:(100*(d/p-1)).toFixed(2)+"%",volume:f,amount:m,upCount:y,downCount:g,crossCount:_}},enumerable:!0,configurable:!0}),DateRangeRenderer.prototype.drawTool=function(t){var e=this._chart,r=e.axisX,o=this._vertexes,n=this.getCursor(),i=this.isFinished(),a=e.height,s=this._datasource.resolution;t.strokeStyle="#ababab",t.lineWidth=1,t.beginPath();var l,u,d,p,f;i?(l=o[0].time,u=o[1].time,l>u&&(d=l,l=u,u=d),p=~~r.getXByTime(l),f=~~r.getXByTime(u),t.moveTo(p,0),t.lineTo(p,a),t.moveTo(f,0),t.lineTo(f,a)):(p=~~r.getXByTime(o[0].time),f=n.x,p>f&&(d=p,p=f,f=d),t.moveTo(p,0),t.lineTo(p,a),t.moveTo(f,0),t.lineTo(f,a)),t.stroke(),t.beginPath(),t.strokeStyle="#a000a0",t.setLineDash([6,6]),t.moveTo(p,a/2),t.lineTo(f,a/2),t.moveTo(f-8,a/2-8),t.lineTo(f,a/2),t.moveTo(f-8,a/2+8),t.lineTo(f,a/2),t.stroke(),t.globalAlpha=.3,t.fillStyle="#6b91c5",t.rect(p,0,f-p,a),t.fill();var m=s>="D"?80:100,y=4*m,g=20*c.length+28,_=p+(f-p)/2-y/2,v=a-g,b=this.statData,E=b.startPrice;if(s>"1"&&b){t.globalAlpha=1,t.setLineDash([0,0]),t.lineWidth=1,t.strokeStyle="#6b91c5",t.fillStyle="#eee",t.beginPath(),t.rect(_,v,y,g),t.fill(),t.stroke(),t.textAlign="right",t.textBaseline="middle",t.font="10px Verdana, Arial, sans-serif";for(var x=0,w=c.length,T=void 0,S=void 0;x<w;x++){T=c[x],S=v+14+20*(x+.5);for(var L=0,C=T.length,M=void 0,P=void 0,k=void 0,H=void 0,O=void 0;L<C;L+=2)k=_+m*L+14,M=T[L],t.fillStyle="#000",t.textAlign="left",t.fillText(M,k,S),H=T[L+1],P=b[H],O=h[H],k=_+m*(L+2)-14,O?t.fillStyle=O:"number"==typeof P?t.fillStyle=P>=E?"#d32f2f":"#00796b":"string"==typeof P&&(t.fillStyle="-"!==P.charAt(0)?"#d32f2f":"#00796b"),t.textAlign="right",t.fillText("number"==typeof P?P.toFixed(2):P,k,S)}}},DateRangeRenderer.prototype.hitTestTool=function(){var t=this._chart,e=t.height,r=t.axisX,o=this._vertexes,n=this.getCursor(),i=n.x,a=n.y,s=~~r.getXByTime(o[0].time),c=~~r.getXByTime(o[1].time),h=s<=c?s:c,u=s<=c?c:s;return Math.abs(h-i)<l.HIT_TEST_TOLERANCE||Math.abs(u-i)<l.HIT_TEST_TOLERANCE||i>=h&&i<=u&&Math.abs(a-e/2)<l.HIT_TEST_TOLERANCE},DateRangeRenderer.prototype.isFinished=function(){return 2===this._vertexes.length},DateRangeRenderer}(s.BaseToolRenderer);e.DateRangeRenderer=u},"1k0e":function(t,e){},"1z0p":function(t,e){},"254b":function(t,e,r){"use strict";var o=function(){function GapRenderer(t){this._gapCache=null,this._firstBarTime=0,this._graph=t}return GapRenderer.prototype.findLastGap=function(){var t=this._graph,e=t.chart.axisX,r=t.datasource;if(r.loaded()<2)return null;var o=this._gapCache,n=e.getVisibleTimeBars();if(o&&o.lastBarTime===r.last().time)return o.time2>n[0].time&&o.time2<n[n.length-1].time?o:null;for(var i,a,s,l,c,h,u=this._firstBarTime?r.search(this._firstBarTime):r.loaded()-1,d=r.last().time,p=!1,f=r.max(u),m=r.min(u);u;){if(c=r.barAt(u),h=r.barAt(u-1),f=Math.max(f,c.high),m=Math.min(m,c.low),i=h.time,a=c.time,h.low>f){p=!0,s=h.low,l=f;break}if(h.high<m){p=!0,s=h.high,l=m;break}u--}return p?(this._gapCache=o=p?{time1:i,time2:a,from:s,to:l,lastBarTime:d}:null,o.time2>n[0].time&&o.time2<n[n.length-1].time?o:null):(this._firstBarTime=r.first().time,null)},GapRenderer.prototype.draw=function(t){var e=this._graph.chart,r=e.axisX,o=e.axisY,n=r.width,i=this.findLastGap();if(i){var a=~~r.getXByTime(i.time2),s=~~o.getYByValue(i.from),l=~~o.getYByValue(i.to),c=~~Math.abs(l-s);t.save(),t.fillStyle="#636363",t.font="12px Verdana, Arial, sans-serif",t.fillRect(a,l<s?l:s,n-a,c>0?c:1),t.fillStyle="black",t.fillText(Number(i.from).toFixed(2)+"-"+Number(i.to).toFixed(2),a,s<l?s-2:l-2),t.restore()}},GapRenderer.prototype.clearCache=function(){this._firstBarTime=0,this._gapCache=null},GapRenderer}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},"2OPA":function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("BzvE"),i=r("vReJ"),a=r("C1Kg"),s=function(t){function AxisYModel(e,r){t.call(this),this._margin=10,this._isValid=!1,this._datasource=e,this._crosshair=r,this._graphic=new i.default(this),this._tickmark=new a.default(this)}return o(AxisYModel,t),Object.defineProperty(AxisYModel.prototype,"margin",{get:function(){var t=this.height;return this._margin>t/2?t/2-1:this._margin},set:function(t){var e=this.height;this._margin=t>e/2?e/2-1:t,this._isValid=!1,this._chart.chartLayout.emit("barmargin_change")},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"datasource",{get:function(){return this._datasource},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"graphic",{get:function(){return this._graphic},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"tickmark",{get:function(){return this._tickmark},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"crosshair",{get:function(){return this._crosshair},enumerable:!0,configurable:!0}),AxisYModel.prototype.getYByValue=function(t,e){void 0===e&&(e=this.range);var r=this.margin,o=this.height-2*r,n=e.max-e.min,i=e.max-t;return 0===e.max&&0===e.min?o+r:e.max===e.min?r:i/n*o+r},AxisYModel.prototype.getValueByY=function(t,e){void 0===e&&(e=this.range);var r=this.margin,o=this.height,n=o-2*r;return(o-r-t)*(e.max-e.min)/n+e.min},Object.defineProperty(AxisYModel.prototype,"maxVal",{get:function(){return this.getValueByY(this.getYByValue(this.range.max)-this.margin)},enumerable:!0,configurable:!0}),Object.defineProperty(AxisYModel.prototype,"minVal",{get:function(){return this.getValueByY(this.getYByValue(this.range.min)+this.margin)},enumerable:!0,configurable:!0}),AxisYModel.prototype.draw=function(t){void 0===t&&(t=!1);var e=this.ctx,r=this.width,o=this.height;t||this._tickmark.clearTickmarks(),e.save(),e.fillStyle="#fff",e.fillRect(0,0,r,o),this._graphic.draw(),e.restore(),this._isValid=!0},AxisYModel}(n);Object.defineProperty(e,"__esModule",{value:!0}),e.default=s},"311T":function(t,e){},3663:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("UYip"),r("Vq7t");var n=r("U7vG"),i=r("rdLu"),a=r("NBiX"),s=function(t){function ControlBar(e,r){t.call(this,e,r),this._chartLayout=r.chartLayout,this.state={},this.openDialogHandler=this.openDialogHandler.bind(this),this.timeRangeClickHandler=this.timeRangeClickHandler.bind(this)}return o(ControlBar,t),ControlBar.prototype.shouldComponentUpdate=function(t){return!i.isEqual(this.props,t)},ControlBar.prototype.render=function(){var t=this;return n.createElement("div",{className:"chart-footerbar",style:{width:this.props.width+"px"}},n.createElement("div",{className:"control-list"},a.preferredTimeRange.map(function(e){return n.createElement("a",{key:e,className:"mini-btn",href:"javascript:;","data-value":e,onClick:t.timeRangeClickHandler},e)}),n.createElement("a",{className:"mini-btn",href:"javascript:;",onClick:this.openDialogHandler},"定位时间")))},ControlBar.prototype.timeRangeClickHandler=function(t){var e=t.target.dataset.value;this._chartLayout.setTimeRange(e)},ControlBar.prototype.openDialogHandler=function(){this._chartLayout.toggleGoToDate(!0)},ControlBar.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},ControlBar}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=s},"41LM":function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("x85n"),r("Vq7t");var n=r("U7vG"),i=r("rdLu"),a=r("NBiX"),s=r("IloD"),l=r("GYzC"),c=r("wRi7"),h=function(t){function MASettings(e,r){t.call(this,e,r),this._originMAProps=null,this._maProps=null,this._chartLayout=r.chartLayout,this.state={showDialog:!1,colorPickerIndex:-1},this.showDialogHandler=this.showDialogHandler.bind(this),this.closeDialogHandler=this.closeDialogHandler.bind(this),this.checkStateChangeHandler=this.checkStateChangeHandler.bind(this),this.inputChangeHandler=this.inputChangeHandler.bind(this),this.cancelHandler=this.cancelHandler.bind(this)}return o(MASettings,t),MASettings.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.props,t)||!i.isEqual(this.state,e)},MASettings.prototype.render=function(){var t=this,e=this._chartLayout,r=e.maProps||a.DEFAULT_MA_PROPS;return n.createElement("div",{className:"chart-btn-group"},n.createElement("button",{className:"btn",onClick:this.showDialogHandler},"均线"),this.state.showDialog?n.createElement(s.default,{title:"均线设置",className:"chart-ma-settings",onClose:this.closeDialogHandler},n.createElement("table",null,n.createElement("tbody",null,r.map(function(e,r){return n.createElement("tr",{key:r},n.createElement("td",{width:"60"},n.createElement("input",{id:"chart-settings-ma"+r,type:"checkbox",defaultChecked:e.isVisible,value:r,onChange:t.checkStateChangeHandler}),n.createElement("label",{htmlFor:"chart-settings-ma"+r},"均线",r+1)),n.createElement("td",{width:"130"},n.createElement("input",{type:"text","data-index":r,defaultValue:e.length+"",onChange:t.inputChangeHandler})),n.createElement("td",{width:"30"},n.createElement(l.default,{defaultColor:e.color,onChangeComplete:t.colorChangeHandler(r)})))}))),n.createElement("div",{className:"chart-ma-settings-btn-group clearfix"},n.createElement("button",{className:"btn btn-gray btn-smaller",onClick:this.cancelHandler},"取消"),n.createElement("button",{className:"btn btn-blue btn-smaller",onClick:this.closeDialogHandler},"确定"))):null)},MASettings.prototype.showDialogHandler=function(){var t=this._chartLayout;this._maProps=t.maProps||c.cloneObj(a.DEFAULT_MA_PROPS),this._originMAProps=c.cloneObj(this._maProps),this.setState({showDialog:!0})},MASettings.prototype.closeDialogHandler=function(){this._maProps=null,this._originMAProps=null,this.setState({showDialog:!1})},MASettings.prototype.checkStateChangeHandler=function(t){var e=this._chartLayout,r=t.target.checked,o=+t.target.value,n=e.maStudies[o],i=this._maProps;i[o].isVisible=r,e.maProps=i,e.modifyGraph(n,{isVisible:r})},MASettings.prototype.inputChangeHandler=function(t){var e=this._chartLayout,r=t.target.dataset.index,o=+t.target.value,n=e.maStudies[r],i=this._maProps;i[r].length=o,e.maProps=i,e.modifyGraph(n,{input:[o]})},MASettings.prototype.colorChangeHandler=function(t){var e=this;return function(r){var o=e._chartLayout,n=e._maProps,i=o.maStudies[t],a=i.styles;n[t].color=r,a[0].color=r,o.maProps=n,o.modifyGraph(i,{styles:a})}.bind(this)},MASettings.prototype.cancelHandler=function(){var t=this,e=this._chartLayout,r=e.maStudies,o=this._maProps,n=this._originMAProps;n.forEach(function(e,n){var a=r[n],s=a.styles;i.isEqual(e,o[n])||(s[0].color=e.color,t.props.onStudyModified(a,{input:[e.length],isVisible:e.isVisible,styles:s}))}),e.maProps=n,this.closeDialogHandler()},MASettings.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},MASettings}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=h},"4VlZ":function(t,e){},"58Xd":function(t,e,r){"use strict";var o=function(){function GridRenderer(t){this._chart=t}return GridRenderer.prototype.draw=function(t){var e,r,o=this._chart,n=o.axisX,i=o.axisY,a=~~o.width,s=~~o.height;t.save(),t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="#e6e6e6",t.beginPath(),e=n.tickmark.getTickMarksByTimeBars(n.getVisibleTimeBars());for(var l=0,c=e.length;l<c;l++)r=e[l],t.moveTo(~~r.x,0),t.lineTo(~~r.x,s);e=i.tickmark.getTickMarksByTimeBars();for(var l=0,c=e.length;l<c;l++)r=e[l],t.moveTo(0,~~r.y),t.lineTo(a,~~r.y);t.stroke(),t.restore()},GridRenderer}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},"5A/R":function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("ZUoU");var n=r("U7vG"),i=r("rdLu"),a=r("bHfy"),s=r("EL4d"),l=r("8JFl"),c=r("wRi7"),h=function(t){function CapitalFlow(){t.call(this),this.state={showToolTip:!1,label:"",color:"#fff",value:0,left:0,top:0},this.sectorMouseMoveHandler=this.sectorMouseMoveHandler.bind(this),this.sectorMouseLeaveHandler=this.sectorMouseLeaveHandler.bind(this)}return o(CapitalFlow,t),CapitalFlow.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.props,t)||!i.isEqual(this.state,e)},CapitalFlow.prototype.componentDidMount=function(){this._capitalFlowScroll=new a(this.refs.container,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0})},CapitalFlow.prototype.componentDidUpdate=function(){this._capitalFlowScroll.refresh()},CapitalFlow.prototype.componentWillUnmount=function(){this._capitalFlowScroll.destroy(),this._capitalFlowScroll=null},CapitalFlow.prototype.render=function(){var t=this.props.capitalFlowInfo,e=t.donutChartData,r=t.barChartData;return n.createElement("div",{className:"chart-capital-flow",ref:"container",style:{maxHeight:this.props.maxHeight+"px"}},n.createElement("div",null,n.createElement(s.default,{data:e,width:248,height:128,onSectorMouseMove:this.sectorMouseMoveHandler,onSectorMouseLeave:this.sectorMouseLeaveHandler}),n.createElement(l.default,{data:r,width:248,height:128})),n.createElement("div",{className:"tool-tip",style:{display:this.state.showToolTip?"block":"none",left:this.state.left,top:this.state.top}},this.state.label,":",n.createElement("span",{style:{color:this.state.color}},this.state.value)))},CapitalFlow.prototype.sectorMouseMoveHandler=function(t){var e=c.clientOffset(this.refs.container);this.setState({showToolTip:!0,label:t.label,value:t.value,color:t.color,left:t.pageX-e.left,top:t.pageY-e.top})},CapitalFlow.prototype.sectorMouseLeaveHandler=function(){this.setState({showToolTip:!1})},CapitalFlow}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=h},"5cZ6":function(t,e,r){"use strict";var o,n=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=r("rdLu"),a=r("Lv/5"),s=r("wRi7");!function(t){t[t.X=0]="X",t[t.TIME=1]="TIME",t[t.VOLUME=2]="VOLUME",t[t.IS_DOWN=3]="IS_DOWN"}(o||(o={}));var l={color:"#ff524f",colorDown:"#2bbe65",lineWidth:1,opacity:1},c=function(t){function ColumnChartRenderer(e,r){t.call(this,e,i.defaults(r,l))}return n(ColumnChartRenderer,t),ColumnChartRenderer.prototype.hitTest=function(){var t=this._plotModel,e=t.graph,r=e.chart,n=r.axisX,i=r.axisY,a=e.isPrice?i.range:e.getRangeY(),l=t.getCurBar();if(!l)return!1;var c,h,u,d,p=r.crosshair.point,f=n.barWidth,m=r.height,y=this.style.histogramBase,g=this.style.scale||1,_=i.margin,v=p.x,b=p.y;return"number"==typeof y?(c=l[o.X]-f/2,h=i.getYByValue(l[o.VOLUME],a),u=c+f,d=i.getYByValue(y,a),s.isPointInRect(v,b,c,h,u,d)):"number"==typeof this.style.scale?(c=l[o.X]-f/2,h=~~(m-(m-i.getYByValue(l[o.VOLUME],a)-_)*g),u=c+f,d=m,s.isPointInRect(v,b,c,h,u,d)):(c=l[o.X]-f/2,h=~~i.getYByValue(l[o.VOLUME],a),u=c+f,d=m,s.isPointInRect(v,b,c,h,u,d))},ColumnChartRenderer.prototype.calcRangeY=function(){var t=this._plotModel.getVisibleBars();if(!t.length)return null;var e={max:-Number.MAX_VALUE,min:Number.MAX_VALUE};return t.reduce(function(t,e){var r=e;return r[o.VOLUME]>t.max&&(t.max=r[o.VOLUME]),r[o.VOLUME]<t.min&&(t.min=r[o.VOLUME]),t},e)},ColumnChartRenderer.prototype.draw=function(t){var e=this._plotModel,r=e.getVisibleBars();if(r.length){var n,i,a,s,l=e.graph,c=l.chart,h=c.axisY,u=c.height,d=~~c.axisX.barWidth,p=l.isPrice?h.range:l.getRangeY(),f=this.style,m=h.margin,y=f.scale||1,g=f.histogramBase,_=0,v=0;t.lineWidth=1,t.globalAlpha=f.opacity,t.strokeStyle="black",t.translate(.5,.5),t.beginPath();for(var b=0,E=r.length;b<E;b++)s=r[b],n=~~s[o.X]-~~(d/2),a=~~h.getYByValue(s[o.VOLUME],p),"number"==typeof g?(i=a,a=~~h.getYByValue(g,p),t.fillStyle=i-a>0?f.colorDown:f.color,_>0?(t.fillRect(_,i,d+n-_,a-i),t.moveTo(_,v),t.lineTo(_,i)):(t.fillRect(n,i,d,a-i),t.moveTo(n,a),t.lineTo(n,i)),t.lineTo(n+d,i),t.lineTo(n+d,a)):"number"==typeof f.scale?(t.fillStyle=s[o.IS_DOWN]?f.colorDown:f.color,i=~~(u-(u-a-m)*y),_>0?(t.fillRect(_,i,d+n-_,u-i),t.moveTo(_,v),t.lineTo(_,i)):(t.fillRect(n,i,d,u-i),t.moveTo(n,u),t.lineTo(n,i)),t.lineTo(n+d,i),t.lineTo(n+d,u)):(t.fillStyle=s[o.IS_DOWN]?f.colorDown:f.color,i=a,_>0?(t.fillRect(_,i,d+n-_,u-i),t.moveTo(_,v),t.lineTo(_,i)):(t.fillRect(n,i,d,u-i),t.moveTo(n,u),t.lineTo(n,i)),t.lineTo(n+d,i),t.lineTo(n+d,u)),_=n+d,v=i;t.stroke()}},ColumnChartRenderer.prototype.getSelectionYByBar=function(t){var e=this._plotModel,r=e.graph,n=r.chart,i=n.axisY,a=n.height,s=r.isPrice?i.range:r.getRangeY(),l=i.margin,c=this.style,h=c.scale||1;return"number"==typeof c.histogramBase?~~i.getYByValue(t[o.VOLUME],s):"number"==typeof c.scale?~~(a-(a-~~i.getYByValue(t[o.VOLUME],s)-l)*h):~~i.getYByValue(t[o.VOLUME],s)},ColumnChartRenderer}(a.BaseChartRenderer);e.ColumnChartRenderer=c},"6HmF":function(t,e){},"7B1/":function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("W60S"),r("Vq7t");var n=r("U7vG"),i=r("rdLu"),a=r("YSPl"),s=r("+vTI"),l=r("04Un"),c=r("n1sv"),h=r("QKig"),u=r("rBAp"),d=r("41LM"),p=r("NBiX"),f=function(t){function Navbar(e,r){t.call(this,e,r),this._chartLayout=r.chartLayout,this.updateView=this.updateView.bind(this),this.onShowAbout=this.onShowAbout.bind(this),this.onShowNewest=this.onShowNewest.bind(this)}return o(Navbar,t),Navbar.prototype.shouldComponentUpdate=function(t){return!i.isEqual(this.props,t)},Navbar.prototype.componentDidMount=function(){var t=this._chartLayout;t.addListener("resolution_change",this.updateView),t.addListener("symbol_change",this.updateView)},Navbar.prototype.componentWillUnmount=function(){var t=this._chartLayout;t.removeListener("resolution_change",this.updateView),t.removeListener("symbol_change",this.updateView)},Navbar.prototype.render=function(){var t=this._chartLayout,e=t.mainDatasource.resolution;return n.createElement("div",{className:"chart-navbar",style:{width:this.props.width+"px"}},n.createElement(s.default,{className:"chart-navbar-search",autofill:!0,onSelect:this.props.onSymbolChange}),n.createElement(a.default,{onResolutionChange:this.props.onResolutionChange}),n.createElement(h.default,{onFullScreen:this.props.onFullScreen}),n.createElement(l.default,{onAddComparison:this.props.onAddComparison,onRemoveComparison:this.props.onRemoveComparison}),n.createElement(c.default,{onAddStudy:this.props.onAddStudy}),e>"1"?n.createElement(d.default,{onStudyModified:this.props.onStudyModified}):null,"stock"===t.mainDatasource.symbolInfo.type?n.createElement(u.default,{onRightChange:this.props.onRightChange}):null,n.createElement("button",{className:"about btn",onClick:this.onShowAbout},"关于"),n.createElement("button",{className:"newest btn",onClick:this.onShowNewest},"最新功能"))},Navbar.prototype.onShowAbout=function(){this._chartLayout.toggleAbout(!0)},Navbar.prototype.onShowNewest=function(){this._chartLayout.showAnalysisSidebarTab()},Navbar.prototype.updateView=function(){this.forceUpdate()},Navbar.contextTypes={chartLayout:n.PropTypes.instanceOf(p.default)},Navbar}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=f},"7Oqy":function(t,e){},"85aO":function(t,e){},"8JFl":function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("DsaQ");var n=r("U7vG"),i=r("rdLu"),a=function(t){function CapitalBarChart(){t.apply(this,arguments)}return o(CapitalBarChart,t),CapitalBarChart.prototype.shouldComponentUpdate=function(t){return!i.isEqual(this.props,t)},CapitalBarChart.prototype.render=function(){var t=this.props.data,e=this.props.width,r=this.props.height,o=e/5,i=.4*o,a=Math.max.apply(Math,t),s=Math.min.apply(Math,t),l=a-s,c=[o/2,o/2*3,o/2*5,o/2*7,o/2*9],h=a>0?(r-40)*a/l:20;return n.createElement("div",{className:"chart-capital-flow-bar-chart"},n.createElement("h3",null,"最近5日主力流入"),n.createElement("svg",{width:e,height:r},n.createElement("g",{transform:"translate(0, "+h.toFixed(2)+")"},n.createElement("line",{x1:0,y1:0,x2:e,y2:0,stroke:"#999"}),c.map(function(e,o){return n.createElement("rect",{key:o,x:e-i/2,y:t[o]>0?-r*t[o]/l:0,width:i,height:Math.abs(r*t[o]/l),fill:t[o]>0?"#ff524f":"#15af3d"})}),c.map(function(e,r){return n.createElement("text",{key:r,x:e+"px",y:(t[r]>0?16:-8)+"px",fill:t[r]>0?"#ff524f":"#15af3d",textAnchor:"middle"},~~(t[r]+.5))}))))},CapitalBarChart}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},"9FmA":function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("BzvE"),i=function(t){function Datasource(e,r){void 0===r&&(r=0),t.call(this),this._hasMoreHistory=!0,this._pulseInterval=60,this._resolution=e,this._timeDiff=r}return o(Datasource,t),Object.defineProperty(Datasource.prototype,"timeDiff",{get:function(){return this._timeDiff},set:function(t){this._timeDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(Datasource.prototype,"pulseInterval",{get:function(){return this._pulseInterval},enumerable:!0,configurable:!0}),Object.defineProperty(Datasource.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!0,configurable:!0}),Datasource.prototype.clearCache=function(){this._hasMoreHistory=!0},Datasource.prototype.now=function(){return~~(Date.now()/1e3)-this._timeDiff},Object.defineProperty(Datasource.prototype,"hasMoreHistory",{get:function(){return this._hasMoreHistory},enumerable:!0,configurable:!0}),Datasource}(n);e.Datasource=i},ALsY:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("U7vG"),i=function(t){function AxisY(){t.call(this),this._dragMarginStart=!1,this.downHandler=this.downHandler.bind(this),this.mouseMoveHandler=this.mouseMoveHandler.bind(this),this.mouseUpHandler=this.mouseUpHandler.bind(this)}return o(AxisY,t),AxisY.prototype.componentDidMount=function(){var t=this.props.axis;t.ctx=this.refs.canvas.getContext("2d"),t.width=this.props.width,t.height=this.props.height,document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("touchmove",this.mouseMoveHandler),document.addEventListener("mouseup",this.mouseUpHandler),document.addEventListener("touchend",this.mouseUpHandler)},AxisY.prototype.componentWillUnmount=function(){document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("touchmove",this.mouseMoveHandler),document.removeEventListener("mouseup",this.mouseUpHandler),document.removeEventListener("touchend",this.mouseUpHandler)},AxisY.prototype.componentDidUpdate=function(){var t=this.props.axis,e=this.props.width,r=this.props.height,o=this.refs.canvas;t.width=e,t.height=r,o.width=e,o.height=r,o.getContext("2d")},AxisY.prototype.shouldComponentUpdate=function(t){var e=this.props;return e.width!==t.width||e.height!==t.height},AxisY.prototype.render=function(){var t=this.props.width,e=this.props.height;return n.createElement("div",{className:"chart-axisy",style:{height:e+"px",width:t+"px"}},n.createElement("canvas",{ref:"canvas",width:t,height:e,onMouseDown:this.downHandler,onTouchStart:this.downHandler}))},AxisY.prototype.downHandler=function(t){t.touches?(t.preventDefault(),1===t.touches.length&&(this._dragPosY=t.touches[0].pageY,this._dragMarginStart=!0)):(this._dragPosY=t.pageY,this._dragMarginStart=!0)},AxisY.prototype.mouseMoveHandler=function(t){if(this._dragMarginStart){var e=t.changedTouches?t.changedTouches[0].pageY:t.pageY,r=e-this._dragPosY,o=this.props.axis,n=o.margin,i=o.height,a=i-2*n,s=2*r/i;o.margin=(i-a*(1+s))/2,this._dragPosY=e}},AxisY.prototype.mouseUpHandler=function(){this._dragMarginStart=!1},AxisY}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},C1Kg:function(t,e,r){"use strict";var o=r("rdLu"),n=r("wRi7"),i=function(){function YTickMark(t){this._axisY=t}return YTickMark.prototype.clearTickmarks=function(){this._tickmarks=null},YTickMark.prototype.getTickMarksByTimeBars=function(){if(this._tickmarks)return this._tickmarks;var t=[],e=this._axisY;if(!e.range)return t;var r=e.range.min,n=e.range.max;if(!o.isFinite(r)||!o.isFinite(n))return t;r===n&&(n+=.1);var i=e.chart.height,a=n-r,s=a*i/(i-2*e.margin),l=(s-a)/2;r-=l,n+=l;var c=this.normalizeTickSpan(s/(i/30));for(r-=r%c;r<=n;)t.push({value:r,y:e.getYByValue(r)}),r+=c;return this._tickmarks=t,t},YTickMark.prototype.normalizeTickSpan=function(t){var e=t+"",r=0,o=[];t=+e;for(var i=0,a=e.length,s=void 0;i<a;i++)if("."===(s=e[i]))o.push(s);else{if(0!==(s=+s)){if(s<5){if(s<3){o.push(s+1);break}o.push(5);break}i-1>=0?("."===o[i-1]?o[i-2]+=1:o[i-1]+=1,o.push(0)):(o.push(1),o.push(0),r=1);break}o.push(s)}for(var l=+o.join(""),c=1;t>=10;)c++,t/=10;return l<1/Math.pow(10,2)&&(l=1/Math.pow(10,2)),+n.padRight(l+"",c+r)},YTickMark}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},CPKi:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("U7vG"),i=r("NBiX"),a=function(t){function Provider(e,r){t.call(this,e,r),this.chartLayout=e.chartLayout}return o(Provider,t),Provider.prototype.getChildContext=function(){return{chartLayout:this.chartLayout}},Provider.prototype.render=function(){return n.Children.only(this.props.children)},Provider.childContextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},Provider}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},Ck02:function(t,e,r){"use strict";var o,n=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=r("rdLu"),a=r("Lv/5");!function(t){t[t.X=0]="X",t[t.TIME=1]="TIME",t[t.UP=2]="UP",t[t.DOWN=3]="DOWN"}(o||(o={}));var s={color:"#000080",opacity:.3},l=function(t){function BandRenderer(e,r){t.call(this,e,i.defaults(r,s))}return n(BandRenderer,t),BandRenderer.prototype.hitTest=function(){return!1},BandRenderer.prototype.draw=function(t){var e=this._plotModel,r=e.getVisibleBars();if(r.length){var n=e.graph,i=n.chart,a=i.axisY,s=n.isPrice?a.range:n.getRangeY();t.globalAlpha=this.style.opacity,t.fillStyle=this.style.color,t.beginPath();var l=r.length;if(l){var c=r[0];t.moveTo(c[o.X],a.getYByValue(c[o.UP],s))}for(var h=1;h<l;h++){var c=r[h];t.lineTo(c[o.X],a.getYByValue(c[o.UP],s))}for(var h=l-1;h>=0;h--){var c=r[h];t.lineTo(c[o.X],a.getYByValue(c[o.DOWN],s))}t.closePath(),t.fill()}},BandRenderer.prototype.calcRangeY=function(){var t=this._plotModel.getVisibleBars();if(!t.length)return null;var e={max:-Number.MAX_VALUE,min:Number.MAX_VALUE};return t.reduce(function(t,e){var r=e;return r[o.UP]<t.min&&(t.min=r[o.UP]),r[o.DOWN]>t.max&&(t.max=r[o.DOWN]),t},e)},BandRenderer.prototype.getSelectionYByBar=function(t){return null},BandRenderer}(a.BaseChartRenderer);e.BandRenderer=l},Cqed:function(t,e,r){"use strict";function __export(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}__export(r("bYF0")),__export(r("uYdA"))},DsaQ:function(t,e){},EL4d:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("6HmF");var n=r("U7vG"),i=r("rdLu"),a=["散户流入","主力流入","主力流出","散户流出"],s=["#ff524f","#ff7d42","#68ce3c","#15af3d"],l=function(t){function CapitalDonutChart(){t.call(this),this.mouseMoveHandler=this.mouseMoveHandler.bind(this),this.mouseLeaveHandler=this.mouseLeaveHandler.bind(this)}return o(CapitalDonutChart,t),CapitalDonutChart.prototype.shouldComponentUpdate=function(t){return i.isEqual(this.props,t)},CapitalDonutChart.prototype.render=function(){var t=this,e=this.props.data,r=this.props,o=r.width,i=r.height,a=o/2,l=a-5,c=[];c.push("M"+-l+",0"),c.push("A"+l+","+l+",0,0,1,"+l+",0"),l=a-65,c.push("L"+l+",0"),c.push("A"+l+","+l+",0,0,0,"+-l+",0Z");var h=this.getSectors(e,a),u=this.getLabels(e,a),d=~~(e[1]-e[2]+.5);return n.createElement("div",{className:"chart-capital-flow-donut"},n.createElement("p",null,"单位：万元"),n.createElement("div",{className:"legend clearfix"},n.createElement("div",{className:"color-desc-1"},n.createElement("div",{className:"color-block"}),n.createElement("p",null,"散户流入")),n.createElement("div",{className:"color-desc-2"},n.createElement("div",{className:"color-block"}),n.createElement("p",null,"主力流入")),n.createElement("div",{className:"color-desc-4"},n.createElement("div",{className:"color-block"}),n.createElement("p",null,"散户流出")),n.createElement("div",{className:"color-desc-3"},n.createElement("div",{className:"color-block"}),n.createElement("p",null,"主力流出"))),n.createElement("svg",{width:o,height:i},n.createElement("g",{transform:"translate("+a+","+i+")"},n.createElement("path",{fill:"#f1f3f6",d:c.join("")}),h.map(function(e,r){var o=u[r];return n.createElement("g",{key:r,className:"sector",onMouseMove:t.mouseMoveHandler(r),onMouseLeave:t.mouseLeaveHandler},n.createElement("path",{fill:s[r],d:e}),parseInt(o.text)>5?n.createElement("text",{x:o.x,y:o.y,fontSize:12,textAnchor:"middle",fill:"#fff"},o.text):null)}),n.createElement("text",{x:0,y:-32,textAnchor:"middle",fontSize:14,fill:"#999999"},"主力资金"),n.createElement("text",{x:0,y:-6,textAnchor:"middle",fontSize:26,fill:d>0?"#ff524f":"#15af3d"},d>0?"+"+d:d))),n.createElement("div",{className:"clearfix"},n.createElement("p",{className:"capital-in"},"流入",n.createElement("i",{className:"capital-in-num"},e?~~(e[1]+.5):"N/A")),n.createElement("p",{className:"capital-out"},"流出",n.createElement("i",{className:"capital-out-num"},e?~~(e[2]+.5):"N/A"))))},CapitalDonutChart.prototype.getSectors=function(t,e){for(var r,o,n,i=t.reduce(function(t,e){return t+e},0),a=[],s=e-10,l=e-60,c=0,h=0,u=0;u<4;u++)n=[],h=c,c+=t[u]/i*Math.PI,r=(-Math.cos(h)*s).toFixed(2),o=(-Math.sin(h)*s).toFixed(2),n.push("M"+r+","+o),r=(-Math.cos(c)*s).toFixed(2),o=(-Math.sin(c)*s).toFixed(2),n.push("A"+s+","+s+",0,0,1,"+r+","+o),r=(-Math.cos(c)*l).toFixed(2),o=(-Math.sin(c)*l).toFixed(2),n.push("L"+r+","+o),r=(-Math.cos(h)*l).toFixed(2),o=(-Math.sin(h)*l).toFixed(2),n.push("A"+l+","+l+",0,0,0,"+r+","+o+"Z"),a.push(n.join(""));return a},CapitalDonutChart.prototype.getLabels=function(t,e){for(var r,o,n,i=t.reduce(function(t,e){return t+e},0),a=[],s=e-35,l=0,c=0,h=0;h<4;h++)r=~~(t[h]/i*100+.5)+"%",l=t[h]/i*Math.PI,o=(-Math.cos(c+l/2)*s).toFixed(2),n=(-Math.sin(c+l/2)*s+6).toFixed(2),a.push({text:r,x:o,y:n}),c+=l;return a},CapitalDonutChart.prototype.mouseMoveHandler=function(t){return function(e){this.props.onSectorMouseMove&&this.props.onSectorMouseMove({pageX:e.pageX,pageY:e.pageY,label:a[t],color:s[t],value:~~(this.props.data[t]+.5)})}.bind(this)},CapitalDonutChart.prototype.mouseLeaveHandler=function(){this.props.onSectorMouseLeave&&this.props.onSectorMouseLeave()},CapitalDonutChart}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=l},EVIZ:function(t,e,r){"use strict";var o=function(){function BasePatternRenderer(t){this._chart=t}return BasePatternRenderer}();e.BasePatternRenderer=o},FHs6:function(t,e,r){"use strict";var o=r("wRi7"),n=function(){function XTickMark(t){this._axis=t}return XTickMark.prototype.clearTickmarks=function(){this._tickmarks=null},XTickMark.prototype.getTickMarksByTimeBars=function(t){if(this._tickmarks)return this._tickmarks;var e=[];if(!t.length)return e;var r=this._axis.datasource.resolution,n=this._axis.barWidth,i="1";switch(r){case"1":i=n>=50?"1":5*n>=50?"5":10*n>=50?"10":15*n>=50?"15":30*n>=50?"30":60*n>=50?"60":24*n*60>=50?"D":30*n*24*60>=50?"M":"Y";break;case"5":i=n>=50?"5":6*n>=50?"30":12*n>=50?"60":24*n*12>=50?"D":30*n*24*12>=50?"M":"Y";break;case"15":i=n>=50?"15":2*n>=50?"30":4*n>=50?"60":24*n*60/15>=50?"D":30*n*24*60/15>=50?"M":"Y";break;case"30":i=n>=50?"30":2*n>=50?"60":24*n*2>=50?"D":30*n*24*2>=50?"M":"Y";break;case"60":i=n>=50?"60":24*n>=50?"D":30*n*24>=50?"M":"Y";break;case"D":i=n>=50?"D":30*n>=50?"M":"Y";break;case"W":i=n>=50?"D":4*n>=50?"M":"Y";break;case"M":i=n>=50?"M":"Y";break;default:throw"unsupported resolution"}for(var a=50,s=1,l=t.length;s<l;s++){var c=t[s],h=function(t){return[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours()]}(new Date(1e3*t[s-1].time)),u=h[0],d=h[1],p=h[2],f=h[3],m=function(t){return[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes()]}(new Date(1e3*t[s].time)),y=m[0],g=m[1],_=m[2],v=m[3],b=m[4];a+=n;var E=e[e.length-1];if(u!==y)a<50&&E.type<"Y"&&(e.pop(),a=50),(i<"Y"||a>=50)&&(e.push({bold:!0,time:y.toString(),type:"Y",x:c.x}),a=0);else if(d!==g)a<50&&E.type<"M"&&(e.pop(),a=50),(i<"M"||a>=50)&&(e.push({bold:!0,time:g+"月",type:"M",x:c.x}),a=0);else if(p!==_)a<50&&E.type<"D"&&(e.pop(),a=50),(i<"D"||a>=50)&&(e.push({bold:!0,time:_.toString(),type:"D",x:c.x}),a=0);else if(f!==v||30===b||b%15==0||b%10==0||b%5==0){var x=1;f!==v?x=60:30===b?x=30:b%15==0?x=15:b%10==0?x=10:b%5==0&&(x=5),a<50&&+E.type<x&&(e.pop(),a=50),a>=50&&(e.push({bold:!1,time:o.pad(v.toString(),2)+":"+o.pad(b.toString(),2),type:x.toString(),x:c.x}),a=0)}}return this._tickmarks=e,e},XTickMark}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},Fi2k:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("un2I"),r("Vq7t");var n=r("U7vG"),i=r("rdLu"),a=r("NBiX"),s=r("wRi7"),l=function(t){function Legend(e){t.call(this),this._studyInSetting=null,this.state={showSettingDialog:!1},this.cursorMoveHandler=this.cursorMoveHandler.bind(this),this.studySettingsDialogOpenHandler=this.studySettingsDialogOpenHandler.bind(this),this.studySettingDialogCloseHanlder=this.studySettingDialogCloseHanlder.bind(this),this.removeStudyHandler=this.removeStudyHandler.bind(this),this.removeCompareHandler=this.removeCompareHandler.bind(this),this.confirmBtnClickHanler=this.confirmBtnClickHanler.bind(this),this.privateSubmitForm=this.privateSubmitForm.bind(this),this.updateView=this.updateView.bind(this)}return o(Legend,t),Legend.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.state,e)},Legend.prototype.componentDidMount=function(){var t=this.context.chartLayout;t.addListener("cursor_move",this.cursorMoveHandler),t.addListener("graph_hover",this.updateView),t.addListener("graph_select",this.updateView),t.addListener("resolution_change",this.updateView),t.addListener("symbol_change",this.updateView),t.addListener("graph_add",this.updateView),t.addListener("graph_remove",this.updateView),t.addListener("graph_modify",this.updateView)},Legend.prototype.componentWillUnmount=function(){var t=this.context.chartLayout;t.removeListener("cursor_move",this.cursorMoveHandler),t.removeListener("graph_hover",this.updateView),t.removeListener("graph_select",this.updateView),t.removeListener("resolution_change",this.updateView),t.removeListener("symbol_change",this.updateView),t.removeListener("graph_add",this.updateView),t.removeListener("graph_remove",this.updateView),t.removeListener("graph_modify",this.updateView)},Legend.prototype.render=function(){var t=this,e=this.props.chart,r=e.mainGraph,o=e.compares,i=e.studies,a=i.filter(function(t){return"MA"===t.studyType&&t.isVisible}),l=i.filter(function(t){return"MA"!==t.studyType&&t.isVisible});return n.createElement("div",{className:"chart-legend"},[r].map(function(t){if(!t)return null;var e=t.getCurBar(),r=t.getPrevBar(),o=t.datasource,i=e?o.barAt(o.search(e[0][1])):o.last(),a=e&&r?o.barAt(o.search(r[0][1])):o.barAt(o.loaded()-2),l=!!a&&!!i,c=o.resolution;return n.createElement("div",{key:t.id,className:"chart-legend-line",style:{fontWeight:t.hover||t.selected?600:"normal"}},n.createElement("div",{className:"chart-legend-item"},n.createElement("span",{className:"symbol-name"},o.symbolInfo?o.symbolInfo.description:"加载中"),n.createElement("span",{className:"symbol-code"},o.symbolInfo.symbol,".",o.symbolInfo.exchange)),"1"===c?n.createElement("div",{className:"chart-legend-item",style:{color:i?i.changerate>0?"#d32f2f":i.changerate<0?"#00796b":"inherit":"inherit"}},"现 ",i?i.close.toFixed(2):"N/A"):[n.createElement("div",{key:"open",className:"chart-legend-item",style:{color:l?i.open>a.close?"#d32f2f":i.open<a.close?"#00796b":"inherit":"inherit"}},"开 ",i?i.open.toFixed(2):"N/A"),n.createElement("div",{key:"high",className:"chart-legend-item",style:{color:l?i.high>a.close?"#d32f2f":i.high<a.close?"#00796b":"inherit":"inherit",display:c>"1"?"":"none"}},"高 ",i?i.high.toFixed(2):"N/A"),n.createElement("div",{key:"low",className:"chart-legend-item",style:{color:l?i.low>a.close?"#d32f2f":i.low<a.close?"#00796b":"inherit":"inherit",display:c>"1"?"":"none"}},"低 ",i?i.low.toFixed(2):"N/A"),n.createElement("div",{key:"close",className:"chart-legend-item",style:{color:l?i.close>a.close?"#d32f2f":i.close<a.close?"#00796b":"inherit":"inherit",display:c>"1"?"":"none"}},"收 ",i?i.close.toFixed(2):"N/A")],n.createElement("div",{className:"chart-legend-item",style:{color:i?i.changerate>0?"#d32f2f":i.changerate<0?"#00796b":"inherit":"inherit"}},"幅 ",i&&"number"==typeof i.changerate?(i.changerate>0?"+":"")+(100*i.changerate).toFixed(2)+"%":"N/A"),i&&"string"==typeof i.turnover?n.createElement("div",{className:"chart-legend-item"},"换 ",(100*+i.turnover).toFixed(2)+"%"):null,n.createElement("div",{className:"chart-legend-item"},"量 ",i?s.formatNumber(i.volume,2)+"手":"N/A"),n.createElement("div",{className:"chart-legend-item"},"额 ",i?s.formatNumber(i.amount,2):"N/A"))}),o.map(function(e){var o=e.datasource,i=e.styles[0].color,a=r.getCurBar(),s=a?o.barAt(o.search(a[0][1])):null;return n.createElement("div",{key:e.id,className:"chart-legend-line",style:{fontWeight:e.hover||e.selected?600:"normal"}},n.createElement("div",{className:"chart-legend-item"},o.symbolInfo?o.symbolInfo.description:"加载中"),n.createElement("div",{className:"chart-legend-item",style:{color:i}},s?s.close.toFixed(2):"N/A"),n.createElement("a",{className:"chart-legend-btn",href:"javascript:;","data-id":e.id,onClick:t.removeCompareHandler},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2.4 120.9 14 14",width:"14",height:"14"},n.createElement("path",{d:"M-2.4 120.9v14h14v-14zm3.34 2.123l3.66 3.66 3.66-3.66 1.217 1.22-3.66 3.658 3.66 3.66-1.22 1.22-3.658-3.66-3.66 3.66-1.22-1.22 3.66-3.66-3.66-3.66z"}))))}),a.length?n.createElement("div",{className:"chart-legend-line"},a.map(function(t){var e=t.getCurBar(),r=e?e[0]:null,o=t.styles;return n.createElement("div",{key:t.id,className:"chart-legend-item",style:{color:o[0].color,fontWeight:t.hover||t.selected?600:"normal"}},t.studyType,t.input?t.input[0]:null,": ",r?r[2].toFixed(2):"N/A")})):null,l.map(function(e){if(!e.noLegend){var r=e.getCurBar();return n.createElement("div",{key:e.id,className:"chart-legend-line",style:{fontWeight:e.hover||e.selected?600:"normal"}},n.createElement("div",{className:"chart-legend-item"},e.studyType,e.input?"("+e.input.join(",")+")":""),e.plots.map(function(t,o){return e.styles[o].noLegend?null:n.createElement("div",{key:o,className:"chart-legend-item",style:{color:e.styles[o].color}},r&&r[o]&&r[o][2]?r[o][2].toFixed(4):"N/A")}),e.isRemovable?n.createElement("a",{className:"chart-legend-btn",href:"javascript:;","data-id":e.id,onClick:t.removeStudyHandler},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2.4 120.9 14 14",width:"14",height:"14"},n.createElement("path",{d:"M-2.4 120.9v14h14v-14zm3.34 2.123l3.66 3.66 3.66-3.66 1.217 1.22-3.66 3.658 3.66 3.66-1.22 1.22-3.658-3.66-3.66 3.66-1.22-1.22 3.66-3.66-3.66-3.66z"}))):null)}}))},Legend.prototype.studySettingsDialogOpenHandler=function(t){this._studyInSetting=i.findWhere(this.props.chart.studies,{id:+t.currentTarget.dataset.id}),this.setState({showSettingDialog:!0})},Legend.prototype.studySettingDialogCloseHanlder=function(){this._studyInSetting=null,this.setState({showSettingDialog:!1})},Legend.prototype.confirmBtnClickHanler=function(){var t=this.refs.settingForm,e=this._studyInSetting.input.map(function(e,r){return"INPUT"===t[r].tagName.toUpperCase()?+t[r].value:Boolean(t[r].value)});this.context.chartLayout.modifyGraph(this._studyInSetting,{input:e}),this.studySettingDialogCloseHanlder()},Legend.prototype.removeStudyHandler=function(t){var e=+t.currentTarget.dataset.id;this.context.chartLayout.removeStudy(this.props.chart,e)},Legend.prototype.removeCompareHandler=function(t){var e=+t.currentTarget.dataset.id;this.context.chartLayout.removeComparison(e)},Legend.prototype.cursorMoveHandler=function(t){t&&this.forceUpdate()},Legend.prototype.updateView=function(){this.forceUpdate()},Legend.prototype.privateSubmitForm=function(t){t.preventDefault()},Legend.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},Legend}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=l},FutI:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("oJNF"),i=r("Cqed"),a=r("wRi7"),s=function(t){function TrendLineToolRenderer(){t.apply(this,arguments)}return o(TrendLineToolRenderer,t),TrendLineToolRenderer.prototype.drawTool=function(t){var e,r,o=this._chart,n=o.axisX,i=o.axisY,a=this.getCursor(),s=this._vertexes[0],l=this._vertexes[1];t.strokeStyle="#000",t.lineWidth=1,t.beginPath(),this.isFinished()?(e=~~n.getXByTime(s.time),r=~~i.getYByValue(s.value),t.moveTo(e,r),e=~~n.getXByTime(l.time),r=~~i.getYByValue(l.value),t.lineTo(e,r)):(e=~~n.getXByTime(s.time),r=~~i.getYByValue(s.value),t.moveTo(e,r),t.lineTo(~~a.x,~~a.y)),t.stroke()},TrendLineToolRenderer.prototype.hitTestTool=function(){var t=this._chart,e=t.axisX,r=t.axisY,o=t.crosshair.point,n=this._vertexes[0],s=this._vertexes[1],l=o.x,c=o.y,h=e.getXByTime(n.time),u=r.getYByValue(n.value),d=e.getXByTime(s.time),p=r.getYByValue(s.value);return a.pointToSegDist(l,c,h,u,d,p)<i.HIT_TEST_TOLERANCE},TrendLineToolRenderer.prototype.isFinished=function(){return 2===this._vertexes.length},TrendLineToolRenderer}(n.BaseToolRenderer);e.TrendLineToolRenderer=s},G0ps:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("oJNF"),i=r("Cqed"),a=r("wRi7"),s=function(t){function HorzLineRenderer(){t.apply(this,arguments)}return o(HorzLineRenderer,t),HorzLineRenderer.prototype.isNowVisible=function(){var t=this._chart.axisY,e=this._vertexes[0];return e.value>t.minVal&&e.value<t.maxVal},Object.defineProperty(HorzLineRenderer.prototype,"vertexes",{get:function(){var t=this._chart.axisX;return this._vertexes.map(function(e){return{time:t.findTimeBarByX(t.width/2).time,value:e.value}})},enumerable:!0,configurable:!0}),HorzLineRenderer.prototype.drawTool=function(t){var e=this._chart,r=e.axisY,o=this._vertexes[0],n=~~r.getYByValue(o.value);t.strokeStyle="#000",t.lineWidth=1,t.translate(0,.5),t.beginPath(),t.moveTo(0,n),t.lineTo(e.width,n),t.stroke()},HorzLineRenderer.prototype.hitTestTool=function(){var t=this._chart,e=t.axisY,r=this.getCursor(),o=this._vertexes[0],n=r.x,s=r.y,l=t.width,c=e.getYByValue(o.value);return a.pointToSegDist(n,s,0,c,l,c)<i.HIT_TEST_TOLERANCE},HorzLineRenderer.prototype.isFinished=function(){return 1===this._vertexes.length},HorzLineRenderer}(n.BaseToolRenderer);e.HorzLineRenderer=s},GKYn:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("HCHE");var n=r("U7vG"),i=r("rdLu"),a=r("bHfy"),s=r("NBiX"),l=function(t){function Analyze(e,r){t.call(this,e,r);var o=r.chartLayout;this._chartLayout=o,this.state={showMA:!!o.readFromLS("chart.forceMA"),showPressureSupport:!!o.readFromLS("chart.showPressureSupport"),showGap:!!o.readFromLS("chart.showGap"),showWaveForm:!!o.readFromLS("chart.showWaveForm"),showReverseRelay:!!o.readFromLS("chart.showReverseRelay"),showInflection:!!o.readFromLS("chart.showInflection")},this.toggleHandler=this.toggleHandler.bind(this)}return o(Analyze,t),Analyze.prototype.componentDidMount=function(){this._scroller=new a(this.refs.scrollWrapper,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0})},Analyze.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.props,t)||!i.isEqual(this.state,e)},Analyze.prototype.render=function(){var t,e,r,o=this.props,i=o.stockInfo,a=o.analysisData,s=a?a.pressureInfo:null,l=a?a.gapInfo:null,c=this.state,h=c.showMA,u=c.showGap,d=c.showPressureSupport,p=c.showWaveForm,f=c.showReverseRelay,m=c.showInflection;return l&&i&&(r=+i.price,t=l.l1>l.l2?l.l2:l.l1,e=l.l1>l.l2?l.l1:l.l2,"up"in l||(l.up=r>t),l.up?r<=t?(a.gapInfo=null,l=null):r<e&&(e=r):r>=e?(a.gapInfo=null,l=null):r>t&&(t=r),l&&(l.l1=t,l.l2=e)),n.createElement("div",{className:"chart-analyze",ref:"scrollWrapper",style:{height:this.props.height+"px"}},n.createElement("div",null,n.createElement("h3",null,"分析功能"),n.createElement("div",{className:"feature-group ma clearfix"},n.createElement("div",{className:"description"},"分析时强制显示均线"),n.createElement("a",{href:"javascript:;",className:"toggle-btn "+(h?"on":""),"data-type":"ma",onClick:this.toggleHandler},n.createElement("div",{className:"toggle-tips"},"在左侧图中展示"))),n.createElement("div",{className:"feature-group inflection clearfix"},n.createElement("div",{className:"description"},"显示拐点"),n.createElement("a",{href:"javascript:;",className:"toggle-btn "+(m?"on":""),"data-type":"inflection",onClick:this.toggleHandler},n.createElement("div",{className:"toggle-tips"},"在左侧图中展示"))),n.createElement("h4",null,"支撑与压力"),n.createElement("div",{className:"feature-group support-pressure clearfix"},n.createElement("div",{className:"description"},n.createElement("div",{className:"pressure"},n.createElement("label",null,"压力："),n.createElement("span",null,s&&s.upper_price?(+s.upper_price).toFixed(2):"--")),n.createElement("hr",null),n.createElement("div",{className:"support"},n.createElement("label",null,"支撑："),n.createElement("span",null,s&&s.upper_price?(+s.lower_price).toFixed(2):"--"))),n.createElement("a",{href:"javascript:;",className:"toggle-btn "+(d?"on":""),"data-type":"pressure-support",onClick:this.toggleHandler},n.createElement("div",{className:"toggle-tips"},"在左侧图中展示"))),n.createElement("h4",null,"跳空与缺口"),n.createElement("div",{className:"feature-group gap clearfix"},n.createElement("div",{className:"description"},l&&i?n.createElement("p",null,n.createElement("label",null,l.dt),"  ",n.createElement("span",{className:l.up?"positive":"negative"},t,"-",e)):n.createElement("p",null,"--"),l&&i?n.createElement("p",{className:"position"},"当前价格位于缺口",l.up?"上方":"下方"):null),n.createElement("a",{href:"javascript:;",className:"toggle-btn "+(u?"on":""),"data-type":"gap",onClick:this.toggleHandler},n.createElement("div",{className:"toggle-tips"},"在左侧图中展示"))),n.createElement("h4",null,"形态技术分析"),n.createElement("div",{className:"feature-group form-analyze clearfix"},n.createElement("div",{className:"description"},n.createElement("p",{className:"form-title"},"波浪形态"),n.createElement("p",null,"根据艾略特波段理论自动构建的形态，方便确定当前的波浪")),n.createElement("a",{href:"javascript:;",className:"toggle-btn "+(p?"on":""),"data-type":"wave-form",onClick:this.toggleHandler},n.createElement("div",{className:"toggle-tips"},"在左侧图中展示"))),n.createElement("hr",null),n.createElement("div",{className:"feature-group form-analyze clearfix"},n.createElement("div",{className:"description"},n.createElement("p",{className:"form-title"},"反转、中继形态"),n.createElement("p",null,"自动构建常见的形态，如头肩顶，W底，上升三角形等")),n.createElement("a",{href:"javascript:;",className:"toggle-btn "+(f?"on":""),"data-type":"reverse-relay-form",onClick:this.toggleHandler},n.createElement("div",{className:"toggle-tips"},"在左侧图中展示")))))},Analyze.prototype.toggleHandler=function(t){var e=this._chartLayout,r=t.currentTarget.dataset.type,o=!1,n=null;switch(r){case"ma":o=!this.state.showMA,e.saveToLS("chart.forceMA",o),o?"D"===e.mainDatasource.resolution&&e.maProps.forEach(function(t,r){return e.modifyGraph(e.maStudies[r],{isVisible:t.isVisible})}):(this.state.showWaveForm||this.state.showReverseRelay)&&"D"===e.mainDatasource.resolution&&e.maStudies.forEach(function(t){return e.modifyGraph(t,{isVisible:!1})}),this.setState({showMA:o});break;case"inflection":o=!this.state.showInflection,e.saveToLS("chart.showInflection",o),n=e.mainChart.studies.filter(function(t){return"inflection"===t.studyType})[0],n?e.removeStudy(e.mainChart,n.id):e.addStudy("inflection"),this.setState({showInflection:o});break;case"pressure-support":o=!this.state.showPressureSupport,e.saveToLS("chart.showPressureSupport",o),n=e.mainChart.studies.filter(function(t){return"压力支撑"===t.studyType})[0],n?e.removeStudy(e.mainChart,n.id):e.addStudy("压力支撑"),this.setState({showPressureSupport:o});break;case"gap":o=!this.state.showGap,e.setGapVisibility(o),this.setState({showGap:o});break;case"wave-form":o=!this.state.showWaveForm,e.setWaveVisibility(o),this.setState({showWaveForm:o});break;case"reverse-relay-form":o=!this.state.showReverseRelay,e.setReverseRelayVisibility(o),this.setState({showReverseRelay:o})}},Analyze.contextTypes={chartLayout:n.PropTypes.instanceOf(s.default)},Analyze}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=l},GYzC:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("Ww5v");var n=r("U7vG"),i=r("orX9"),a=r("rdLu"),s=r("wRi7"),l=function(t){function ColorPicker(){t.call(this),this.state={showColorPicker:!1},this.openColorPickerHandler=this.openColorPickerHandler.bind(this),this.colorChangeHandler=this.colorChangeHandler.bind(this),this.clickOutsideHandler=this.clickOutsideHandler.bind(this)}return o(ColorPicker,t),ColorPicker.prototype.shouldComponentUpdate=function(t,e){return!a.isEqual(this.props,t)||!a.isEqual(this.state,e)},ColorPicker.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.clickOutsideHandler),document.addEventListener("touchstart",this.clickOutsideHandler)},ColorPicker.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.clickOutsideHandler),document.removeEventListener("touchstart",this.clickOutsideHandler)},ColorPicker.prototype.render=function(){var t=this.state.color||this.props.defaultColor;return n.createElement("div",null,n.createElement("div",{className:"chart-color-picker"},n.createElement("span",{className:"chart-color-picker-btn",style:{backgroundColor:t,border:"1px solid "+s.darkenRGB(t)},onClick:this.openColorPickerHandler}),this.state.showColorPicker?n.createElement("div",{ref:"container",className:"chart-color-picker-positioning"},n.createElement(i.SketchPicker,{width:"240px",disableAlpha:!0,color:t,presetColors:[],onChangeComplete:this.colorChangeHandler})):null))},ColorPicker.prototype.openColorPickerHandler=function(t){this.setState({showColorPicker:!0})},ColorPicker.prototype.colorChangeHandler=function(t){var e=t.rgb,r="rgb("+e.r+","+e.g+","+e.b+")";this.props.onChangeComplete(r),this.setState({color:r})},ColorPicker.prototype.clickOutsideHandler=function(t){var e=this.refs.container,r=t.target;e&&r!==e&&!e.contains(r)&&this.setState({showColorPicker:!1})},ColorPicker}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=l},GawB:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("rdLu"),i=r("UALi"),a=r("PxPp"),s=r("254b"),l={line:function(t){var e=t;return[0,e.time,e.close]},candle:function(t){var e=t;return[0,e.time,e.open,e.close,e.high,e.low]},mountain:function(t){var e=t;return[0,e.time,e.close]},column:function(t){var e=t;return[0,e.time,e.close,e.open>e.close]}},c=function(t){function StockModel(e,r,o,a,c,h,u){t.call(this,e,r,a?99999:1,o,!!c,a,c,!0,u?[u]:null,l[h],function(t){return[t]}),this._plots.push(new i.default(this,0,h,n.extend({},u||{}))),a&&(this._showGap=!!r.chartLayout.readFromLS("chart.showGap"),this._gapRenderer=new s.default(this))}return o(StockModel,t),Object.defineProperty(StockModel.prototype,"showGap",{get:function(){return this._showGap},set:function(t){this._showGap!==t&&(this._showGap=t,this._isValid=!1)},enumerable:!0,configurable:!0}),StockModel.prototype.setShape=function(t){this._adapter=l[t]},StockModel.prototype.draw=function(){var e=this._chart.ctx;t.prototype.draw.call(this,e),this._isMain&&this._showGap&&this._datasource.resolution>"1"&&this._gapRenderer.draw(e)},StockModel.prototype.clearCache=function(){t.prototype.clearCache.call(this),this._isMain&&this._gapRenderer.clearCache()},StockModel}(a.default);Object.defineProperty(e,"__esModule",{value:!0}),e.default=c},H9vw:function(t,e,r){"use strict";function __export(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}__export(r("9FmA")),__export(r("RR/l")),__export(r("tc6X")),__export(r("tF+H")),__export(r("MjKS")),__export(r("NIhD")),__export(r("uRx8"))},HCHE:function(t,e){},HG4G:function(t,e){},HJCg:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("WE1R");var n=r("U7vG"),i=r("rdLu"),a=r("NBiX"),s=r("cxcC"),l=[[["chart-tools-crosshair","十字指针"],["chart-tools-pointer","箭头"]],[["chart-tools-trend-line","趋势线"],["chart-tools-trend-angle","角度趋势线"],["chart-tools-vert-line","垂直线"],["chart-tools-horz-line","水平线"]],[["chart-tools-date-range","日期范围"]],[["chart-tools-eraser","删除画线"]]],c=function(t){function ToolBox(e,r){t.call(this,e,r),this._clickCanceled=!1,this._chartLayout=r.chartLayout,this.resetTool=this.resetTool.bind(this),this.downHandler=this.downHandler.bind(this),this.upHandler=this.upHandler.bind(this),this.moveHandler=this.moveHandler.bind(this),this.selectToolHandler=this.selectToolHandler.bind(this),this.hideMoreTools=this.hideMoreTools.bind(this),this.showMoreTools=this.showMoreTools.bind(this),this.state={selectedIndex:0,selectedIndex2:[0,0,0,0],showMoreTools:!1}}return o(ToolBox,t),ToolBox.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.state,e)},ToolBox.prototype.componentDidMount=function(){this._chartLayout.addListener("drawingtool_begin",this.resetTool),document.addEventListener("mousedown",this.hideMoreTools),document.addEventListener("touchstart",this.hideMoreTools)},ToolBox.prototype.componentWillUnmount=function(){this._chartLayout.removeListener("drawingtool_begin",this.resetTool),document.removeEventListener("mousedown",this.hideMoreTools),document.removeEventListener("touchstart",this.hideMoreTools)},ToolBox.prototype.render=function(){var t=this;return n.createElement("div",{className:"chart-tools"},n.createElement("ul",{className:"chart-tools-group"},l.map(function(e,r){return n.createElement("li",{key:r,className:t.state.selectedIndex===r?"selected":""},n.createElement("span",{className:"chart-tools-btn"},n.createElement("span",{className:"chart-tools-btn-main "+e[t.state.selectedIndex2[r]][0],title:e[t.state.selectedIndex2[r]][1],"data-index":r,onMouseDown:t.downHandler,onTouchStart:t.downHandler,onMouseUp:t.upHandler,onTouchEnd:t.upHandler,onMouseMove:t.moveHandler,onTouchMove:t.moveHandler}),e.length>1?n.createElement("span",{className:"chart-tools-btn-more","data-index":r,onClick:t.showMoreTools}):null),t.state.showMoreTools&&t.state.showMoreIndex===r?n.createElement("div",{className:"chart-tools-more"},l[r].map(function(e,o){return n.createElement("a",{href:"javascript:;",key:e[0],"data-index1":r,"data-index2":o,onMouseDown:t.selectToolHandler,onTouchStart:t.selectToolHandler},n.createElement("span",{className:e[0]}),e[1])})):null)})))},ToolBox.prototype.downHandler=function(t){var e=this;t.touches&&t.preventDefault();var r=+t.target.dataset.index;this._clickCanceled=!1,l[r].length>1&&(this._longTapDetectTimeout=setTimeout(function(){return e.showMoreTools(r)},300))},ToolBox.prototype.moveHandler=function(){this._clickCanceled=!0,clearInterval(this._longTapDetectTimeout)},ToolBox.prototype.upHandler=function(t){var e=+t.target.dataset.index,r=this.state.selectedIndex2;this.state.showMoreTools||this._clickCanceled||(clearInterval(this._longTapDetectTimeout),this.selectTool(e,r[e],!!t.touches))},ToolBox.prototype.selectToolHandler=function(t){t.touches&&t.preventDefault(),this.selectTool(+t.currentTarget.dataset.index1,+t.currentTarget.dataset.index2,!!t.touches)},ToolBox.prototype.showMoreTools=function(t){this.setState({showMoreIndex:"object"==typeof t?+t.target.dataset.index:t,showMoreTools:!0})},ToolBox.prototype.hideMoreTools=function(t){this.state.showMoreTools&&(t.touches&&t.preventDefault(),this.setState({showMoreTools:!1}))},ToolBox.prototype.selectTool=function(t,e,r){var o=this._chartLayout,n=this.state.selectedIndex2;if(n[t]=e,o.willEraseDrawingTool=!1,0===t){switch(l[t][e][0]){case"chart-tools-crosshair":o.setDefaultCursor("crosshair");break;case"chart-tools-pointer":o.setDefaultCursor("default")}o.isEditMode=!1,this.resetTool()}else t===l.length-1?(o.willEraseDrawingTool=!0,this.setState({selectedIndex:t,showMoreTools:!1}),o.selectedDrawingTool=null,o.isEditMode=!1):(o.selectedDrawingTool=this.getDrawingToolByName(l[t][e][0]),r&&(o.isEditMode=!0),this.setState({selectedIndex:t,selectedIndex2:n,showMoreTools:!1}))},ToolBox.prototype.getDrawingToolByName=function(t){switch(t){case"chart-tools-trend-line":return new s.TrendLineToolRenderer;case"chart-tools-trend-angle":return new s.TrendAngleToolRenderer;case"chart-tools-vert-line":return new s.VertLineRenderer;case"chart-tools-horz-line":return new s.HorzLineRenderer;case"chart-tools-date-range":return new s.DateRangeRenderer(this._chartLayout.mainDatasource);default:throw"Can't find any drawing tool match name "+t}},ToolBox.prototype.resetTool=function(){var t=this._chartLayout;this.setState({selectedIndex:0}),t.willEraseDrawingTool=!1,t.selectedDrawingTool=null},ToolBox.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},ToolBox}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=c},HUhp:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("1k0e");var n=r("U7vG"),i=r("bHfy"),a=r("NBiX"),s=r("H9vw"),l=function(t){function MainBoard(e,r){t.call(this,e,r),this.state={},this._chartLayout=r.chartLayout,this.selectHandler=this.selectHandler.bind(this),this.setSymbolHandler=this.setSymbolHandler.bind(this),this.loadRankList=this.loadRankList.bind(this),this.loadIndexList=this.loadIndexList.bind(this)}return o(MainBoard,t),MainBoard.prototype.shouldComponentUpdate=function(t,e){var r=this.state;return r.indexes!==e.indexes||r.rising_rank!==e.rising_rank||r.declining_rank!==e.declining_rank},MainBoard.prototype.componentWillReceiveProps=function(t){t.width!==this.props.width&&(this._wrapperScroller.refresh(),this._indexesListScroller.refresh(),this._descListScroller.refresh(),this._ascListScroller.refresh())},MainBoard.prototype.componentDidMount=function(){var t=this;this._isMounted=!0,this._wrapperScroller=new i(this.refs.wrapper,{scrollbars:!0,hScrollbar:!0,scrollX:!0,scrollY:!1,eventPassthrough:!0,fadeScrollbars:!0}),this._indexesListScroller=new i(this.refs.indexesList,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this._descListScroller=new i(this.refs.descList,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this._ascListScroller=new i(this.refs.ascList,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this.loadIndexList().then(function(){return t.state.indexes?t.loadRankList(t.state.indexes[0].index_id):null})},MainBoard.prototype.componentDidUpdate=function(){this._wrapperScroller.refresh(),this._indexesListScroller.refresh(),this._descListScroller.refresh(),this._ascListScroller.refresh()},MainBoard.prototype.componentWillUnmount=function(){this._isMounted=!1,this._wrapperScroller.destroy(),this._indexesListScroller.destroy(),this._descListScroller.destroy(),this._ascListScroller.destroy(),clearTimeout(this._pollIndexListTimer),clearTimeout(this._pollRankListTimer)},MainBoard.prototype.render=function(){var t=this,e=this.state.indexes,r=this.state.rising_rank,o=this.state.declining_rank;return n.createElement("div",{ref:"wrapper",className:"chart-main-board"},n.createElement("div",{className:"wrapper"},n.createElement("div",{className:"indexes-list"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"38%"},"指数名称"),n.createElement("th",{width:"31%"},"涨跌幅"),n.createElement("th",{width:"31%"},"涨跌点数")))),n.createElement("div",{className:"body",ref:"indexesList"},n.createElement("table",{className:"s-table top-header"},n.createElement("tbody",null,e&&e.map(function(e,r){return n.createElement("tr",{key:r,className:t.state.activeIndexId===e.index_id?"active":"","data-id":e.index_id,onClick:t.selectHandler},n.createElement("td",{width:"38%"},e.name),n.createElement("td",{width:"31%"},(100*e.p_change).toFixed(2),"%"),n.createElement("td",{width:"31%"},(+e.price_change).toFixed(2)))}))))),n.createElement("div",{className:"separator"}),n.createElement("div",{className:"desc-list"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"38%"},"股票名称"),n.createElement("th",{width:"31%"},"最新价"),n.createElement("th",{width:"31%"},"涨跌幅")))),n.createElement("div",{className:"body",ref:"descList"},n.createElement("table",{className:"s-table stripe even top-header"},n.createElement("tbody",null,r&&r.map(function(e,r){return n.createElement("tr",{key:r,"data-symbol":e[0],onClick:t.setSymbolHandler},n.createElement("td",{width:"38%"},e[1]),n.createElement("td",{width:"31%"},(+e[3]).toFixed(2)),n.createElement("td",{width:"31%"},(100*e[2]).toFixed(2),"%"))}))))),n.createElement("div",{className:"separator"}),n.createElement("div",{className:"asc-list"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"38%"},"股票名称"),n.createElement("th",{width:"31%"},"最新价"),n.createElement("th",{width:"31%"},"涨跌幅")))),n.createElement("div",{className:"body",ref:"ascList"},n.createElement("table",{className:"s-table stripe even top-header"},n.createElement("tbody",null,o&&o.map(function(e,r){return n.createElement("tr",{key:r,"data-symbol":e[0],onClick:t.setSymbolHandler},n.createElement("td",{width:"38%"},e[1]),n.createElement("td",{width:"31%"},(+e[3]).toFixed(2)),n.createElement("td",{width:"31%"},(100*e[2]).toFixed(2),"%"))})))))))},MainBoard.prototype.selectHandler=function(t){var e=t.currentTarget.dataset.id;this.loadRankList(e)},MainBoard.prototype.setSymbolHandler=function(t){this.context.chartLayout.setSymbol(t.currentTarget.dataset.symbol)},MainBoard.prototype.loadIndexList=function(){var t=this;return s.getIndexesInfo().then(function(e){if(t._isMounted){var r=1e3*e.data.intver;t.setState({indexes:e.data.list}),t._pollIndexListTimer=r?setTimeout(t.loadIndexList,r):-1}}).catch(function(e){return t._pollIndexListTimer=setTimeout(t.loadIndexList,1e4)})},MainBoard.prototype.loadRankList=function(t){var e=this;clearTimeout(this._pollRankListTimer),s.getStockListByIndexId(t).then(function(r){if(e._isMounted){var o=1e3*r.data.intver;e.setState({activeIndexId:t,rising_rank:r.data.up,declining_rank:r.data.down}),e._pollRankListTimer=o?setTimeout(function(){return e.loadRankList(t)},o):-1}}).catch(function(r){return e._pollRankListTimer=setTimeout(function(){return e.loadRankList(t)},1e4)})},MainBoard.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},MainBoard}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=l},Htct:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("rBG8"),r("bpF5");var n=r("U7vG"),i=r("bHfy"),a=function(t){function Financing(){t.apply(this,arguments)}return o(Financing,t),Financing.prototype.componentDidMount=function(){this._financingScroll=new i(this.refs.financing,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0})},Financing.prototype.componentWillUnmount=function(){this._financingScroll.destroy()},Financing.prototype.componentDidUpdate=function(){this._financingScroll.refresh()},Financing.prototype.shouldComponentUpdate=function(t,e){return this.props.financingInfo!==t.financingInfo},Financing.prototype.render=function(){var t=this.props.financingInfo;return t?n.createElement("div",{className:"financing",ref:"financing",style:{height:this.props.height+"px"}},n.createElement("div",null,n.createElement("h3",null,"财务信息"),n.createElement("table",{className:"indexes-display s-table stripe even left-header"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{width:"133"},"每股收益"),n.createElement("td",{width:"134"},t.earning_per_Share,"元")),n.createElement("tr",null,n.createElement("th",null,"净利润"),n.createElement("td",null,t.net_income,"亿元")),n.createElement("tr",null,n.createElement("th",null,"净利润增长率"),n.createElement("td",null,t.net_income_growth_rate,"%")),n.createElement("tr",null,n.createElement("th",null,"营业总收入"),n.createElement("td",null,t.revenue,"亿元")),n.createElement("tr",null,n.createElement("th",null,"总收入增长率"),n.createElement("td",null,t.revenue_growth_rate,"%")),n.createElement("tr",null,n.createElement("th",null,"每股净资产"),n.createElement("td",null,t.book_value_per_share,"元")),n.createElement("tr",null,n.createElement("th",null,"净资产收益率"),n.createElement("td",null,t.return_on_Equity,"%")),n.createElement("tr",null,n.createElement("th",null,"净资产收益率摊薄"),n.createElement("td",null,t.return_on_equity_diluted,"%")),n.createElement("tr",null,n.createElement("th",null,"资产负债比率"),n.createElement("td",null,t.asset_liability_ratio,"%")),n.createElement("tr",null,n.createElement("th",null,"每股资本公积金"),n.createElement("td",null,t.capital_surplus_per_share,"元")),n.createElement("tr",null,n.createElement("th",null,"每股未分配利润"),n.createElement("td",null,t.retained_earning_per_share,"元")),n.createElement("tr",null,n.createElement("th",null,"每股经营现金流"),n.createElement("td",null,t.operating_cash_flow_per_share,"元")),n.createElement("tr",null,n.createElement("th",null,"经营现金流入"),n.createElement("td",null,t.operating_cashflow_in,"亿元")),n.createElement("tr",null,n.createElement("th",null,"经营现金流出"),n.createElement("td",null,t.operating_cashflow_out,"亿元")),n.createElement("tr",null,n.createElement("th",null,"经营现金流量净额"),n.createElement("td",null,t.net_operating_cashflow,"亿元")),n.createElement("tr",null,n.createElement("th",null,"流动比率"),n.createElement("td",null,t.currentRatio)),n.createElement("tr",null,n.createElement("th",null,"速动比率"),n.createElement("td",null,t.quickRatio)))))):n.createElement("div",{className:"financing",ref:"financing",style:{height:this.props.height+"px"}},n.createElement("div",{className:"no-financing-info"},"非个股无财务信息"))},Financing}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},Hu7R:function(t,e){},HuvF:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("WOwf");var n=r("U7vG"),i=function(t){function Briefing(){t.apply(this,arguments)}return o(Briefing,t),Briefing.prototype.shouldComponentUpdate=function(t,e){return this.props.stockInfo!==t.stockInfo},Briefing.prototype.render=function(){var t=this.props.stockInfo,e=+t.price,r=+t.changePrice,o=+t.changeRate;return n.createElement("div",{className:"chart-sidebar-briefing"},0!==e?n.createElement("div",{className:r>0?"stock-data positive":r<0?"stock-data negtive":"stock-data"},n.createElement("span",{className:"price"},e.toFixed(2),0!==r?n.createElement("svg",{viewBox:"0 0 10 12"},n.createElement("g",null,n.createElement("path",{d:"M9.6,4.4c0.3,0.3,0.3,0.8,0,1.1C9.5,5.7,9.3,5.7,9.1,5.7S8.7,5.7,8.5,5.5L5.7,2.7v8.5c0,0.4-0.4,0.8-0.8,0.8c-0.4,0-0.8-0.4-0.8-0.8V2.7L1.4,5.5c-0.3,0.3-0.8,0.3-1.1,0s-0.3-0.8,0-1.1l4.1-4.1C4.5,0.1,4.7,0,4.9,0c0.2,0,0.4,0.1,0.6,0.2L9.6,4.4z"}))):null),"  ",r>0?"+"+r.toFixed(2):r.toFixed(2),"  (",o>0?"+"+(100*o).toFixed(2)+"%":(100*o).toFixed(2)+"%",")"):n.createElement("div",{className:"stock-data"},n.createElement("span",{className:"price"},"停牌")))},Briefing}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},I282:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("oJNF"),i=r("Cqed"),a=r("wRi7"),s=function(t){function TrendAngleToolRenderer(){t.apply(this,arguments)}return o(TrendAngleToolRenderer,t),TrendAngleToolRenderer.prototype.drawTool=function(t){var e=this._chart,r=e.axisX,o=e.axisY,n=e.axisY.range,i=this.getCursor(),a=this._vertexes.map(function(t){return{x:~~r.getXByTime(t.time),y:~~o.getYByValue(t.value,n)}});this.isFinished()||a.push({x:i.x,y:i.y}),t.strokeStyle="#000",t.lineWidth=1,t.beginPath(),a.forEach(function(e,r){if(0===r)t.moveTo(e.x,e.y);else if(1===r){t.lineTo(e.x,e.y),t.stroke();var o=a[0],n=e.y>=o.y,i=Math.atan((e.y-o.y)/(e.x-o.x));i=0===i?e.x>=o.x?0:Math.PI:n?i>0?i:Math.PI+i:i<0?2*Math.PI+i:Math.PI+i;var s=~~(i/2/Math.PI*360);s=n?-s:360-s,t.setLineDash&&t.setLineDash([3,3]),t.moveTo(o.x,o.y),t.lineTo(o.x+60,o.y),t.stroke(),t.beginPath(),n?t.arc(o.x,o.y,60,0,i):t.arc(o.x,o.y,60,i,2*Math.PI),t.font="12px ans-serif",t.fillStyle="black",t.fillText(s+"°",o.x+65,o.y+6),t.stroke()}})},TrendAngleToolRenderer.prototype.hitTestTool=function(){var t=this._chart,e=t.axisX,r=t.axisY,o=t.crosshair.point,n=this._vertexes[0],s=this._vertexes[1],l=o.x,c=o.y,h=e.getXByTime(n.time),u=r.getYByValue(n.value),d=e.getXByTime(s.time),p=r.getYByValue(s.value);return a.pointToSegDist(l,c,h,u,d,p)<i.HIT_TEST_TOLERANCE},TrendAngleToolRenderer.prototype.isFinished=function(){return 2===this._vertexes.length},TrendAngleToolRenderer}(n.BaseToolRenderer);e.TrendAngleToolRenderer=s},IlEz:function(t,e,r){"use strict";var o,n=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=r("Lv/5");!function(t){t[t.X=0]="X",t[t.TIME=1]="TIME",t[t.TYPE=2]="TYPE",t[t.VAL=3]="VAL",t[t.PROB=4]="PROB"}(o||(o={}));var a=function(t){function InflectionRenderer(e){t.call(this,e,null)}return n(InflectionRenderer,t),InflectionRenderer.prototype.hitTest=function(){return!1},InflectionRenderer.prototype.draw=function(t){var e=this._plotModel,r=e.getVisibleBars();if(r.length){var n=e.graph,i=n.chart,a=i.axisY,s=r.length;t.textAlign="center";for(var l=0;l<s;l++){var c=r[l];switch(c[o.TYPE]){case 0:t.font="48px Verdana, Arial, sans-serif",t.fillStyle="#FF3333",t.fillText("↑",c[o.X],~~a.getYByValue(c[o.VAL])-16),t.font="12px Verdana, Arial, sans-serif",t.fillStyle="#000000",t.fillText(c[o.PROB],c[o.X],~~a.getYByValue(c[o.VAL])-60);break;case 1:t.font="48px Verdana, Arial, sans-serif",t.fillStyle="#99FF33",t.fillText("↓",c[o.X],40+~~a.getYByValue(c[o.VAL])),t.font="12px Verdana, Arial, sans-serif",t.fillStyle="#000000",t.fillText(c[o.PROB],c[o.X],72+~~a.getYByValue(c[o.VAL]))}}}},InflectionRenderer.prototype.calcRangeY=function(){return this._plotModel.getVisibleBars().length?{max:-Number.MAX_VALUE,min:Number.MAX_VALUE}:null},InflectionRenderer.prototype.getSelectionYByBar=function(t){return null},InflectionRenderer}(i.BaseChartRenderer);e.InflectionRenderer=a},IloD:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("b5Rr");var n=r("U7vG"),i=r("rdLu"),a=function(t){function Dialog(){t.call(this),this._dragStart=!1,this._dragPosX=0,this._dragPosY=0,this.closeHandler=this.closeHandler.bind(this),this.clickOutsideHandler=this.clickOutsideHandler.bind(this),this.dragStartHandler=this.dragStartHandler.bind(this),this.dragMoveHandler=this.dragMoveHandler.bind(this),this.dragEndHandler=this.dragEndHandler.bind(this)}return o(Dialog,t),Dialog.prototype.shouldComponentUpdate=function(t){return!i.isEqual(this.props,t)},Dialog.prototype.componentDidMount=function(){var t=this.refs.container,e=document.documentElement.clientHeight,r=document.documentElement.clientWidth,o=this.refs.container.style,n=this.props,i=n.width||t.clientWidth,a=n.height||t.clientHeight;o.width=n.width+"px",o.height=n.height+"px",o.top=.382*e-a/2+"px",o.left=.5*r-i/2+"px",document.addEventListener("mousedown",this.clickOutsideHandler),document.addEventListener("touchstart",this.clickOutsideHandler),document.addEventListener("mousemove",this.dragMoveHandler),document.addEventListener("touchmove",this.dragMoveHandler),document.addEventListener("mouseup",this.dragEndHandler),document.addEventListener("touchend",this.dragEndHandler)},Dialog.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.clickOutsideHandler),document.removeEventListener("touchstart",this.clickOutsideHandler),document.removeEventListener("mousemove",this.dragMoveHandler),document.removeEventListener("touchmove",this.dragMoveHandler),document.removeEventListener("mouseup",this.dragEndHandler),document.removeEventListener("touchend",this.dragEndHandler)},Dialog.prototype.render=function(){return n.createElement("div",{ref:"container",className:this.props.className+" chart-dialog"},n.createElement("h3",{onMouseDown:this.dragStartHandler,onTouchStart:this.dragStartHandler},this.props.title),n.createElement("a",{href:"javascript:;",className:"close",onClick:this.closeHandler}),n.createElement("div",{className:"chart-dialog-body"},this.props.children))},Dialog.prototype.closeHandler=function(){var t=this.props.onClose;"function"==typeof t&&t()},Dialog.prototype.clickOutsideHandler=function(t){var e=this.refs.container,r=t.target;r===e||e.contains(r)||this.closeHandler()},Dialog.prototype.dragStartHandler=function(t){t.touches&&t.preventDefault();var e=t.touches&&1===t.touches.length;this._dragStart=!0,this._dragPosX=e?t.touches[0].pageX:t.pageX,this._dragPosY=e?t.touches[0].pageY:t.pageY},Dialog.prototype.dragMoveHandler=function(t){if(this._dragStart){var e=this.refs.container.style,r=t.touches&&1===t.touches.length,o=r?t.touches[0].pageX:t.pageX,n=r?t.touches[0].pageY:t.pageY,i=o-this._dragPosX,a=n-this._dragPosY;e.left=parseFloat(e.left)+i+"px",e.top=parseFloat(e.top)+a+"px",this._dragPosX=o,this._dragPosY=n}},Dialog.prototype.dragEndHandler=function(){this._dragStart=!1},Dialog.defaultProps={className:""},Dialog}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},KTML:function(t,e,r){"use strict";function __export(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}__export(r("Lv/5")),__export(r("Ck02")),__export(r("oVxw")),__export(r("5cZ6")),__export(r("oifU")),__export(r("qbbe")),__export(r("/5Qm")),__export(r("IlEz"))},KVhT:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("BzvE"),i=r("m297"),a=function(t){function CrosshairModel(e){t.call(this),this._chartLayout=e,this._graphic=new i.default(this)}return o(CrosshairModel,t),Object.defineProperty(CrosshairModel.prototype,"point",{get:function(){return this._point},set:function(t){this._point&&t&&t.x===this._point.x&&t.y===this._point.y||(this._point=t)},enumerable:!0,configurable:!0}),Object.defineProperty(CrosshairModel.prototype,"graphic",{get:function(){return this._graphic},enumerable:!0,configurable:!0}),Object.defineProperty(CrosshairModel.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t},enumerable:!0,configurable:!0}),CrosshairModel.prototype.draw=function(){this.graphic.draw()},CrosshairModel}(n);Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},Lk2d:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("7Oqy");var n=r("U7vG"),i=r("rdLu"),a=r("svHs"),s=r("MVOY"),l=r("P2GU"),c=r("HUhp"),h=["自选股","最近访问","板块列表","大盘综合"],u=function(t){function FooterPanel(e,r){t.call(this,e,r),this.selectTabHandler=this.selectTabHandler.bind(this),this.toggleHandler=this.toggleHandler.bind(this)}return o(FooterPanel,t),FooterPanel.prototype.shouldComponentUpdate=function(t){return!i.isEqual(this.props,t)},FooterPanel.prototype.render=function(){var t=this,e=this.props.activeIndex,r=this.props.width;return n.createElement("div",{className:"chart-footer-panel",style:{width:r+"px"}},n.createElement("div",{className:"btn-group "+(this.props.folded?"folded":"")},h.map(function(r,o){return n.createElement("button",{key:o,className:t.props.folded||e!==o?"":"active","data-index":o,onClick:t.selectTabHandler},r)}),n.createElement("a",{href:"javascript:;",className:"toggle-btn",onClick:this.toggleHandler},n.createElement("svg",{viewBox:"0 0 10.35 16"},n.createElement("g",null,n.createElement("path",{d:"M0,14.42,1.57,16l3.6-3.6L8.78,16l1.58-1.58L5.18,9.25ZM10.35,1.58,8.78,0,5.18,3.6,1.58,0,0,1.58,5.18,6.75Z"}))))),this.props.folded?null:n.createElement("div",{className:"panel-board"},0===e?n.createElement(a.default,{width:r}):null,1===e?n.createElement(s.default,{width:r}):null,2===e?n.createElement(l.default,{width:r}):null,3===e?n.createElement(c.default,{width:r}):null))},FooterPanel.prototype.toggleHandler=function(){this.props.folded?this.props.onChange(!1,this.props.activeIndex):this.props.onChange(!0,this.props.activeIndex)},FooterPanel.prototype.selectTabHandler=function(t){var e=+t.target.dataset.index;if(!this.props.folded&&this.props.activeIndex===e)return void(this.props.onChange&&this.props.onChange(!0,e));this.props.onChange&&this.props.onChange(!1,e)},FooterPanel}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=u},"Lv/5":function(t,e,r){"use strict";var o;!function(t){t[t.X=0]="X",t[t.TIME=1]="TIME",t[t.VALUE=2]="VALUE"}(o||(o={}));var n=function(){function BaseChartRenderer(t,e){this._plotModel=t,this._style=e}return Object.defineProperty(BaseChartRenderer.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t},enumerable:!0,configurable:!0}),BaseChartRenderer.prototype.drawSelection=function(){var t=this._plotModel,e=t.graph,r=e.datasource,n=e.chart,i=n.ctx,a=n.axisX,s=~~(60/a.barWidth+.5),l=t.getVisibleBars();if(l.length)for(var c=(r.loaded()-r.search(l[0][o.TIME]))%s,h=c,u=l.length,d=void 0,p=void 0;h<u;h+=s){if(d=l[h],!(p=this.getSelectionYByBar(d)))return;i.beginPath(),i.arc(d[o.X],p,3,0,2*Math.PI),i.closePath(),i.fillStyle="#D6D6D6",i.strokeStyle="#6B6B6B",i.fill(),i.stroke()}},BaseChartRenderer}();e.BaseChartRenderer=n},MVOY:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("/QIH"),r("bpF5");var n=r("U7vG"),i=r("rdLu"),a=r("bHfy"),s=r("wRi7"),l=r("NBiX"),c=r("H9vw"),h=function(t){function RecentList(e,r){t.call(this,e,r),this.state={sortKey:"zdf",order:"desc"},this._chartLayout=r.chartLayout,this.loadStocks=this.loadStocks.bind(this),this.sortHandler=this.sortHandler.bind(this),this.setSymbolHandler=this.setSymbolHandler.bind(this)}return o(RecentList,t),RecentList.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.state,e)},RecentList.prototype.componentDidMount=function(){this._isMounted=!0,this._wrapperScroller=new a(this.refs.wrapper,{scrollbars:!0,hScrollbar:!0,scrollX:!0,scrollY:!1,eventPassthrough:!0,fadeScrollbars:!0}),this._scroller=new a(this.refs.body,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this._chartLayout.addListener("self_select_add",this.loadStocks),this._chartLayout.addListener("self_select_delete",this.loadStocks),this.loadStocks(this.state.sortKey,this.state.order)},RecentList.prototype.componentWillReceiveProps=function(t){t.width!==this.props.width&&(this._wrapperScroller.refresh(),this._scroller.refresh())},RecentList.prototype.componentDidUpdate=function(){this._scroller.refresh()},RecentList.prototype.componentWillUnmount=function(){this._isMounted=!1,this._wrapperScroller.destroy(),this._scroller.destroy(),this._chartLayout.removeListener("self_select_add",this.loadStocks),this._chartLayout.removeListener("self_select_delete",this.loadStocks),clearTimeout(this._pollStocksTimer)},RecentList.prototype.render=function(){var t=this,e=this.state.stocks;return n.createElement("div",{className:"chart-recent-list",ref:"wrapper"},n.createElement("div",{className:"wrapper"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"18%"},"股票"),n.createElement("th",{width:"14%","data-key":"price",onClick:this.sortHandler},"最新价","price"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"14%","data-key":"zdf",onClick:this.sortHandler},"涨跌幅","zdf"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"16%","data-key":"sz",onClick:this.sortHandler},"总市值","sz"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"20%","data-key":"lt_sz",onClick:this.sortHandler},"实际流通市值","lt_sz"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"18%","data-key":"hy",onClick:this.sortHandler},"所属行业","hy"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":"")))),n.createElement("div",{ref:"body",className:"body"},n.createElement("table",{className:"s-table stripe even top-header"},n.createElement("tbody",null,e&&e.map(function(e,r){return n.createElement("tr",{key:r,"data-symbol":e.code,onClick:t.setSymbolHandler},n.createElement("td",{width:"18%"},e.name),n.createElement("td",{width:"14%"},(+e.price).toFixed(2)),n.createElement("td",{width:"14%"},(100*e.zdf).toFixed(2),"%"),n.createElement("td",{width:"16%"},"--"!==e.sz?s.formatNumber(+e.sz,2):"--"),n.createElement("td",{width:"20%"},"--"!==e.lt_sz?s.formatNumber(+e.lt_sz,2):"--"),n.createElement("td",{width:"18%"},e.hy))}))))))},RecentList.prototype.loadStocks=function(t,e){var r=this,o=i.pluck(this._chartLayout.readFromLS("chart.recentlist")||[],"symbol");c.getStockListByCodes(o,t,e).then(function(o){if(r._isMounted){var n=1e3*o.data.intver;r.setState({sortKey:t,order:e,stocks:o.data.list}),r._pollStocksTimer=n?setTimeout(function(){return r.loadStocks},n):-1}}).catch(function(t){return r._pollStocksTimer=setTimeout(function(){return r.loadStocks},1e4)})},RecentList.prototype.sortHandler=function(t){var e=t.target.dataset.key,r="desc";e===this.state.sortKey&&(r="desc"===this.state.order?"asc":"desc"),this.loadStocks(e,r)},RecentList.prototype.setSymbolHandler=function(t){this.context.chartLayout.setSymbol(t.currentTarget.dataset.symbol)},RecentList.contextTypes={chartLayout:n.PropTypes.instanceOf(l.default)},RecentList}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=h},MjKS:function(t,e,r){"use strict";var o=r("NIhD"),n=["1","5","15","30","60","D","W","M"];e.studyConfig={inflection:{adapter:function(t){return[0,t.time,t.type,t.val,t.prob]},output:function(t,e,r){return[[0,t[1],t[2],t[3],t[4]]]},supportResolutions:["D"],priority:1,isPrice:!0,isRemovable:!0,noLegend:!0,datasourceType:"remote",plots:[{shape:"inflection"}]},"压力支撑":{adapter:function(t){return[0,t.time,t.pressure,t.support]},output:function(t,e,r){var o=t[1];return[[0,o,t[2]],[0,o,t[3]]]},supportResolutions:["1","5","15","30","60","D"],priority:998,isPrice:!0,isRemovable:!1,noLegend:!1,datasourceType:"remote",plots:[{shape:"line",style:{color:"#ff9c00",lineWidth:1}},{shape:"line",style:{color:"#2b89cc",lineWidth:1}}]},"均价":{adapter:function(t){return[0,t.time,t.amount,t.volume]},output:function(t,e,r){var n=o.$MA(e);return null!==n?[[0,t[1],n]]:null},supportResolutions:["1"],priority:999,isPrice:!0,isRemovable:!1,noLegend:!1,datasourceType:"local",plots:[{shape:"line",style:{color:"orange",lineWidth:1}}]},MA:{adapter:function(t){return[0,t.time,t.close]},input:[5],inputLabels:["长度"],supportResolutions:["5","15","30","60","D","W","M"],priority:999,isPrice:!0,isRemovable:!1,noLegend:!1,datasourceType:"local",output:function(t,e,r){var n=r[0],i=o.MA(e,n,o.C);return null!==i?[[0,t[1],i]]:null},plots:[{shape:"line",style:{color:"#000000",lineWidth:1}}]},VOLUME:{adapter:function(t){return[0,t.time,t.volume,t.close<t.open]},input:[],inputLabels:[],supportResolutions:n,priority:999,isPrice:!1,isRemovable:!1,noLegend:!0,datasourceType:"local",output:function(t){return[t]},plots:[{shape:"column",style:{color:"#ff524f",colorDown:"#2bbe65",scale:.25,opacity:.2}}]},BOLL:{adapter:function(t){return[0,t.time,t.close]},input:[20,2],inputLabels:[],supportResolutions:n,priority:1,isPrice:!0,isRemovable:!0,noLegend:!1,datasourceType:"local",output:function(t,e,r){if(e-r[0]<0)return null;var n=r[0],i=o.MA(e,n,o.C),a=o.STD(e,n,o.C),s=t[1],l=i+r[1]*a,c=i-r[1]*a;return[[0,s,i],[0,s,l],[0,s,c],[0,s,l,c]]},plots:[{shape:"line",style:{color:"#FF0000",lineWidth:1}},{shape:"line",style:{color:"#0000FF",lineWidth:1}},{shape:"line",style:{color:"#0000FF",lineWidth:1}},{shape:"band",style:{color:"#000080",noLegend:!0,opacity:.1}}]},MACD:{adapter:function(t){return[0,t.time,t.close]},input:[12,26,9],inputLabels:[],supportResolutions:n,priority:1,isPrice:!1,isRemovable:!0,noLegend:!1,datasourceType:"local",output:function(t,e,r){var n=r[0],i=r[1],a=r[2],s=t[1],l=o.EMA(e,n,o.C)-o.EMA(e,i,o.C),c=function(t){return o.EMA(t,n,o.C)-o.EMA(t,i,o.C)},h=o.EMA(e,a,c);return[[0,s,2*(l-h)],[0,s,l],[0,s,h]]},plots:[{shape:"histogram",style:{color:"rgb(255, 0, 110)",colorDown:"rgb(255, 0, 110)",histogramBase:0}},{shape:"line",style:{color:"rgb(0, 148, 255)"}},{shape:"line",style:{color:"rgb(255, 106, 0)"}}]},KDJ:{adapter:function(t){return[0,t.time,t.close,t.high,t.low]},input:[9,3,3],inputLabels:[],supportResolutions:n,priority:1,isPrice:!1,isRemovable:!0,noLegend:!1,datasourceType:"local",output:function(t,e,r){var n=r[0],i=r[1],a=r[2],s=function(t){return(o.C(t)-o.LLV(t,n,o.L))/(o.HHV(t,n,o.H)-o.LLV(t,n,o.L))*100},l=function(t){return o.SMA(t,i,1,s)},c=l(e),h=o.SMA(e,a,1,l),u=3*c-2*h,d=t[1];return[[0,d,c],[0,d,h],[0,d,u]]},plots:[{shape:"line",style:{color:"#0000FF"}},{shape:"line",style:{color:"#FFA600"}},{shape:"line",style:{color:"#FF00FF"}}]},RSI:{adapter:function(t){return[0,t.time,t.close]},input:[6,12,24],inputLabels:[],supportResolutions:n,priority:1,isPrice:!1,isRemovable:!0,noLegend:!1,datasourceType:"local",output:function(t,e,r){if(e-Math.max.apply(Math,r)<0)return null;var n=r[0],i=r[1],a=r[2],s=t[1],l=function(t){return Math.max(o.C(t)-o.LC(t),0)},c=function(t){return Math.abs(o.C(t)-o.LC(t))};return[[0,s,o.SMA(e,n,1,l)/o.SMA(e,n,1,c)*100],[0,s,o.SMA(e,i,1,l)/o.SMA(e,i,1,c)*100],[0,s,o.SMA(e,a,1,l)/o.SMA(e,a,1,c)*100]]},plots:[{shape:"line",style:{color:"#f8b439"}},{shape:"line",style:{color:"#1b96ff"}},{shape:"line",style:{color:"#ea45b3"}}]},CCI:{adapter:function(t){return[0,t.time,t.close,t.high,t.low]},input:[14],inputLabels:[],supportResolutions:n,priority:1,isPrice:!1,isRemovable:!0,noLegend:!1,datasourceType:"local",output:function(t,e,r){var n=r[0];if(e-n<0)return null;var i=t[1],a=function(t){return(o.C(t)+o.H(t)+o.L(t))/3};return[[0,i,(a(e)-o.MA(e,n,a))/(.015*o.AVEDEV(e,n,a))]]},plots:[{shape:"line",style:{color:"rgba(60, 120, 216, 1)"}}]},CR:{adapter:function(t){return[0,t.time,t.close,t.high,t.low]},input:[26,5,10,20],inputLabels:[],supportResolutions:n,priority:1,isPrice:!1,isRemovable:!0,noLegend:!1,datasourceType:"local",output:function(t,e,r){var n=r[0],i=r[1],a=r[2],s=r[3];if(e-n<0)return null;var l=t[1],c=function(t){return(o.C(t)+o.H(t)+o.L(t))/3},h=function(t){return Math.max(0,o.H(t)-o.REF(t,1,c))},u=function(t){return Math.max(0,o.REF(t,1,c)-o.L(t))},d=function(t){var e=o.getContext().cacheObj,r="CR"+t;if(e[r])return e[r];var i=o.SUM(t,n,h)/o.SUM(t,n,u)*100;return e[r]=i,i},p=function(t){return o.MA(t,i,d)},f=function(t){return o.MA(t,a,d)},m=function(t){return o.MA(t,s,d)};return[[0,l,d(e)],e-n-i>0?[0,l,o.REF(e,i/2.5+1,p)]:null,e-n-a>0?[0,l,o.REF(e,a/2.5+1,f)]:null,e-n-s>0?[0,l,o.REF(e,s/2.5+1,m)]:null]},plots:[{shape:"line",style:{color:"#0000FF"}},{shape:"line",style:{color:"#ff9900"}},{shape:"line",style:{color:"#ff00ff"}},{shape:"line",style:{color:"#00ff00"}}]}}},NBiX:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("BzvE"),i=r("rdLu"),a=r("PJh5"),s=r("WybQ"),l=r("nbee"),c=r("GawB"),h=r("b2uV"),u=r("qYPw"),d=r("NpAc"),p=r("KVhT"),f=r("2OPA"),m=r("H9vw"),y=r("Cqed");e.preferredTimeRange=["1天","5天","1月","1年","全部"];var g=["1","5","30","D","M"];e.DEFAULT_MA_PROPS=[{length:5,color:"rgb(255,0,0)",isVisible:!0},{length:10,color:"rgb(0,0,255)",isVisible:!1},{length:20,color:"rgb(255,0,255)",isVisible:!0},{length:30,color:"rgb(0,255,0)",isVisible:!1},{length:60,color:"rgb(255,152,0)",isVisible:!1}];var _=function(t){function ChartLayoutModel(){t.call(this),this.willEraseDrawingTool=!1,this._isEditMode=!1,this._loading=!1,this._maStudies=[],this._charts=[],this.pulseUpdate=this.pulseUpdate.bind(this),this.fullUpdate=this.fullUpdate.bind(this),this.lightUpdate=this.lightUpdate.bind(this)}return o(ChartLayoutModel,t),Object.defineProperty(ChartLayoutModel.prototype,"component",{set:function(t){this._component=t},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"charts",{get:function(){return this._charts.slice(0)},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"axisx",{get:function(){return this._axisx},set:function(t){this._axisx=t},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"mainChart",{get:function(){return this._mainChart},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"mainDatasource",{get:function(){return this._mainDatasource},set:function(t){this._mainDatasource=t},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"hoverChart",{get:function(){return this._charts.filter(function(t){return t.hover})[0]||null},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"defaultCursor",{get:function(){return this._defaultCursor},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"maProps",{get:function(){return this.readFromLS("qchart.studies.props.ma["+this.mainDatasource.resolution+"]")||e.DEFAULT_MA_PROPS},set:function(t){this.saveToLS("qchart.studies.props.ma["+this.mainDatasource.resolution+"]",t)},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"maStudies",{get:function(){return this._maStudies},enumerable:!0,configurable:!0}),Object.defineProperty(ChartLayoutModel.prototype,"isEditMode",{get:function(){return this._isEditMode},set:function(t){var e=this._mainChart;this._isEditMode=t,t&&(this.setHoverChart(e),this.setCursorPoint({x:~~(e.width/2+.5),y:~~(e.height/2+.5)})),this.emit("editmode_change",t)},enumerable:!0,configurable:!0}),ChartLayoutModel.prototype.saveToLS=function(t,e){void 0!==e&&(localStorage[t]=JSON.stringify(e))},ChartLayoutModel.prototype.readFromLS=function(t){return localStorage.hasOwnProperty(t)?JSON.parse(localStorage[t]):null},ChartLayoutModel.prototype.deleteFromLS=function(t){delete localStorage[t]},ChartLayoutModel.prototype.setHoverChart=function(t){this.charts.forEach(function(t){t.hover=!1,t.graphs.forEach(function(t){return t.hover=!1}),t.tools.forEach(function(t){return t.hover=!1})}),t.hover=!0},ChartLayoutModel.prototype.cancelSelectedGraph=function(){this.charts.forEach(function(t){t.graphs.forEach(function(t){return t.selected=!1}),t.tools.forEach(function(t){return t.selected=!1})})},ChartLayoutModel.prototype.fullUpdate=function(){var t=this,e=this.axisx;this.needMoreData()&&this.loadHistory(),this._lastAnimationFrame&&cancelAnimationFrame(this._lastAnimationFrame),this._lastAnimationFrame=requestAnimationFrame(function(){e.draw(),t.charts.forEach(function(t){t.clearCache(),t.calcRangeY(),t.draw(),t.axisY.draw(),t.clearTopCanvas(),t.crosshair.draw()}),t._lastAnimationFrame=null})},ChartLayoutModel.prototype.lightUpdate=function(){var t=this;this._lastAnimationFrame||(this._lastAnimationFrame=requestAnimationFrame(function(){t.axisx.draw(!!t.axisx.isValid),t.charts.forEach(function(t){t.axisY.range||t.calcRangeY(),t.clearTopCanvas(),t.isValid||t.draw(),t.axisY.draw(!!t.axisY.isValid),t.creatingDrawingTool&&t.creatingDrawingTool.draw(),t.editingDrawingTool&&t.editingDrawingTool.draw(),t.crosshair.draw()}),t._lastAnimationFrame=null}))},ChartLayoutModel.prototype.getServerTime=function(){var t=this;return m.getServerTime().then(function(e){var r=~~(Date.now()/1e3)-+e,o=[];t.charts.forEach(function(t){t.graphs.forEach(function(t){o.push(t.datasource)})}),o.forEach(function(t){return t.timeDiff=r})})},ChartLayoutModel.prototype.addPatterns=function(){var t=this;return"D"===this.mainDatasource.resolution?m.getPatterns(this.mainDatasource.symbol).then(function(e){e.data.shape_list.forEach(function(e){if("wave"===e.shape_type){var r=e.shape_detail.f.map(function(t){return{time:~~(a(t.d).toDate().getTime()/1e3),value:t.v}}),o=e.shape_detail.s.map(function(t){return{time:~~(a(t.d).toDate().getTime()/1e3),value:t.v}});t.mainChart.addPattern(new d.default(t.mainChart,e.shape_type,{bwPoints:r,swPoints:o}))}else if("triangle"===e.shape_type){var n=[],i=null;e.shape_detail.xtd&&(n.push(e.shape_detail.xtd.l1),n.push(e.shape_detail.xtd.l2)),e.shape_detail.dtd&&(n.push(e.shape_detail.dtd.l1),n.push(e.shape_detail.dtd.l2)),n=n.filter(function(t){return!!t}).map(function(t){return[{time:~~(a(t.p1.d).toDate().getTime()/1e3),value:t.p1.v},{time:~~(a(t.p2.d).toDate().getTime()/1e3),value:t.p2.v}]}),t.mainChart.addPattern(new d.default(t.mainChart,e.shape_type,{points:i,trendLines:n}))}else{var n=[],i=null;i=e.shape_detail.st.map(function(t){return{time:~~(a(t.d).toDate().getTime()/1e3),value:t.v}}),n=[e.shape_detail.l1,e.shape_detail.l2].filter(function(t){return!!t}).map(function(t){return[{time:~~(a(t.p1.d).toDate().getTime()/1e3),value:t.p1.v},{time:~~(a(t.p2.d).toDate().getTime()/1e3),value:t.p2.v}]}),t.mainChart.addPattern(new d.default(t.mainChart,e.shape_type,{points:i,trendLines:n}))}}),t.emit("patterns_add")}):Promise.resolve()},ChartLayoutModel.prototype.stopPulseUpdate=function(){this._loading=!1,this.emit("loading_end"),clearTimeout(this._pulseUpdateTimer),this._pulseUpdateTimer=null},ChartLayoutModel.prototype.loadHistory=function(){var t=this,e=this.mainDatasource;if(!e.hasMoreHistory||this._loading)return Promise.resolve();this._loading=!0,this.emit("loading_start");var r=this.axisx,o=[],n=~~(1.5*r.width/r.barWidth);return this.charts.forEach(function(t){t.graphs.forEach(function(t){o.push(t.datasource)})}),new Promise(function(r,a){var s=e.first()?e.first().time:null;e.loadHistory(n).then(function(){return Promise.all(i.chain(o).without(e).unique().reduce(function(t,r){return t.push(r.loadTimeRange(e.first().time,s||e.last().time)),t},[]).value()).then(function(){t.fullUpdate(),"number"!=typeof t._pulseUpdateTimer&&t.pulseUpdate(),t._loading=!1,t.emit("loading_end"),r()}).catch(function(e){t._loading=!1,t.emit("loading_end")})}).catch(function(e){t._loading=!1,t.emit("loading_end")})})},ChartLayoutModel.prototype.pulseUpdate=function(){var t=this,e=this.mainDatasource,r=e.pulseInterval<10?10:e.pulseInterval,o=e.loaded()?e.last().time:e.now()-86400,n=o+86400,a=[],s=[];this.charts.forEach(function(t){t.graphs.forEach(function(t){a.push(t.datasource)})}),Promise.all(i.chain(a).unique().reduce(function(t,e){return t.push(e.loadTimeRange(o,n)),t},s).value()).then(function(){t.fullUpdate(),e.pulseInterval&&(t._pulseUpdateTimer=setTimeout(t.pulseUpdate,1e3*r))}).catch(function(){return t._pulseUpdateTimer=setTimeout(t.pulseUpdate,3e4)})},ChartLayoutModel.prototype.setResolution=function(t){var e=this._mainDatasource,r=e.resolution;if(e instanceof m.StockDatasource){var o=this.mainChart.mainGraph;"1"===t?(o.setShape("line"),o.plots[0].shape="line"):(o.setShape("candle"),o.plots[0].shape="candle")}i.unique(this._charts.reduce(function(t,e){return t.concat(e.graphs.map(function(t){return t.datasource}))},[])).forEach(function(e){return e.resolution=t}),this.clearCache(),this.switchStudies(r),this.removeAllTools(),"D"!==t?this.removeAllPatterns():this.addPatterns(),this.stopPulseUpdate(),this.loadHistory(),this._axisx.resetOffset(),this.emit("resolution_change",t)},ChartLayoutModel.prototype.setSymbol=function(t){var e=this,r=this._mainDatasource;r.resolveSymbol(t).then(function(){var o=r.symbolInfo,n=e.readFromLS("chart.recentlist")||[];i.unique(e._charts.reduce(function(t,e){return t.concat(e.graphs.map(function(t){return t.datasource}))},[])).forEach(function(e){return e.symbol=t}),e.clearCache(),e.switchStudies(),e.removeAllTools(),e.removeAllPatterns(),e.addPatterns(),e.stopPulseUpdate(),e.loadHistory(),e._axisx.resetOffset(),-1===i.findIndex(n,{symbol:o.symbol})&&(n.push(o),n.length>50&&n.shift(),e.saveToLS("chart.recentlist",n)),history.replaceState(null,document.title,"/?symbol="+t),e.emit("symbol_change",o)})},ChartLayoutModel.prototype.setRight=function(t){i.unique(this._charts.reduce(function(t,e){return t.concat(e.graphs.map(function(t){return t.datasource}))},[])).forEach(function(e){e instanceof m.StockDatasource&&(e.right=t)}),this.clearCache(),this.removeAllTools(),this.stopPulseUpdate(),this.loadHistory(),this._axisx.resetOffset(),this.emit("right_change",t)},ChartLayoutModel.prototype.setCursorPoint=function(t){var e=this.mainChart.crosshair.point;e&&t&&e.x===t.x&&e.y===t.y||(this.charts.forEach(function(e){return e.crosshair.point=t}),this.emit("cursor_move",t))},ChartLayoutModel.prototype.setDefaultCursor=function(t){this._defaultCursor=t,this.emit("cursor_change",t)},ChartLayoutModel.prototype.addChart=function(t){var e=this._mainChart?this._mainChart.crosshair.point:{x:0,y:0};if(t.isMain){if(this._mainChart)throw new Error("can only has one main chart");this._mainChart=t}t.crosshair.point=e?{x:e.x,y:e.y}:null,this._charts.push(t),this.emit("chart_add",t)},ChartLayoutModel.prototype.removeChart=function(t){this._charts.splice(this._charts.indexOf(t),1),this.emit("chart_remove",t)},ChartLayoutModel.prototype.resetStudies=function(){var t=this;this.removeAllStudies();var r=this._mainChart,o=r.datasource,n=this.maProps||e.DEFAULT_MA_PROPS,i=this._maStudies,a=!!this.readFromLS("chart.forceMA"),s=!!this.readFromLS("chart.showPressureSupport")||!!this.readFromLS("chart.showReverseRelay"),l=!!this.readFromLS("chart.showInflection"),c=!!this.readFromLS("chart.showPressureSupport");i.length=0,"1"===o.resolution?o instanceof m.StockDatasource&&o.symbolInfo&&"stock"===o.symbolInfo.type&&(i[0]=new u.default(r,"均价"),r.addGraph(i[0])):n.forEach(function(e,n){var i=new u.default(r,"MA",!(s&&!a&&"D"===o.resolution)&&e.isVisible,[e.length],[{color:e.color,lineWidth:1}]);t._maStudies.push(i),r.addGraph(i)}),o.resolution<="D"&&c&&r.addGraph(new u.default(r,"压力支撑")),"D"===o.resolution&&l&&r.addGraph(new u.default(r,"inflection")),r.addGraph(new u.default(r,"VOLUME"))},ChartLayoutModel.prototype.switchStudies=function(t){var r=this,o=this._mainChart,n=this._mainDatasource,i=n.resolution,a=n.symbolInfo,s=this._maStudies,l=this.maProps||e.DEFAULT_MA_PROPS,c=+("1"===t)^+("1"===i),h=!!this.readFromLS("chart.showPressureSupport"),d=!!this.readFromLS("chart.showInflection"),p=!!this.readFromLS("chart.forceMA"),f=!!this.readFromLS("chart.showPressureSupport")||!!this.readFromLS("chart.showReverseRelay");if(c)return this.resetStudies();this.maStudies.forEach(function(t){return r.removeStudy(o,t.id)}),h&&(t>"D"&&i<="D"?o.addGraph(new u.default(o,"压力支撑")):t<="D"&&i>"D"&&o.graphs.filter(function(t){return t instanceof u.default&&"压力支撑"===t.studyType}).forEach(function(t){return o.removeGraph(t)})),d&&("D"!==t&&"D"===i?o.addGraph(new u.default(o,"inflection")):"D"===t&&"D"!==i&&o.graphs.filter(function(t){return t instanceof u.default&&"inflection"===t.studyType}).forEach(function(t){return o.removeGraph(t)})),"1"===i?"stock"===a.type&&(s.length=0,s[0]=new u.default(o,"均价"),o.addGraph(s[0])):(s.length=0,l.forEach(function(t,e){var r=new u.default(o,"MA",!(f&&!p&&"D"===n.resolution)&&t.isVisible,[t.length],[{color:t.color,lineWidth:1}]);s.push(r),o.addGraph(r)}))},ChartLayoutModel.prototype.addStudy=function(t){var e=this,r=m.studyConfig[t],o=this._mainChart,n=this.mainDatasource;if(r.isPrice){var i=new u.default(o,t);"local"===i.datasourceType?(this._mainChart.addGraph(i),this.emit("graph_add",i)):n.first()&&(this._mainChart.addGraph(i),i.datasource.loadTimeRange(n.first().time,n.last().time).then(function(){e.emit("graph_add",i)}))}else{var a=new p.default(this),s=this.axisx,c=new f.default(n,a),h=new l.default(this,n,s,c,a,r.isPrice),d=new u.default(h,t);c.chart=h,a.chart=h,"local"===d.datasourceType?(h.addGraph(d),this.addChart(h),this.emit("graph_add",d)):n.first()&&d.datasource.loadTimeRange(n.first().time,n.last().time).then(function(){h.addGraph(d),e.addChart(h)})}},ChartLayoutModel.prototype.removeStudy=function(t,e){var r=this;t.graphs.some(function(o){return o instanceof u.default&&o.id===e&&(t.removeGraph(o),r.emit("graph_remove",o),!0)})&&(t.graphs.length||this.removeChart(t))},ChartLayoutModel.prototype.modifyGraph=function(t,e){t.clearCache(),Object.keys(e).forEach(function(r){return t[r]=e[r]}),this.emit("graph_modify")},ChartLayoutModel.prototype.hideMA=function(){var t=this;this._maStudies.forEach(function(e){return t.modifyGraph(e,{isVisible:!1})})},ChartLayoutModel.prototype.showMA=function(){var t=this;this._maStudies.forEach(function(e,r){return t.modifyGraph(e,{isVisible:t.maProps[r].isVisible})})},ChartLayoutModel.prototype.addComparison=function(t){var e=this,r=this.mainDatasource,o=this._mainChart,n=new m.StockDatasource(r.defaultSymbol,r.resolution,r.right,r.timeDiff),i=new c.default(n,o,!1,!1,!0,"line",{color:s({luminosity:"bright",hue:"random"}),lineWidth:1});return n.resolveSymbol(t).then(function(){n.loadTimeRange(r.first().time,r.last().time+86400).then(function(){o.addGraph(i),e.emit("graph_add",i)})}),i.id},ChartLayoutModel.prototype.removeComparison=function(t){var e=this;this._mainChart.graphs.some(function(r){return!(!r.isComparison||r.id!==t)&&(e._mainChart.removeGraph(r),e.emit("graph_remove",r),!0)})},ChartLayoutModel.prototype.goToDate=function(t){var e=this,r=this._mainDatasource,o=this._axisx;if(0!==r.loaded()){var n=t<r.last().time?r.search(t):r.loaded()-1;if(-1!==n||r.hasMoreHistory||(n=0),-1!==n)o.offset=(r.loaded()-1.5-n)*o.barWidth;else{var a=[];this.charts.forEach(function(t){t.graphs.forEach(function(t){a.push(t.datasource)})}),Promise.all(i.chain(a).unique().reduce(function(e,o){return e.push(o.loadTimeRange(t,r.first().time)),e},[]).value()).then(function(){return e.goToDate(r.first().time)})}}},ChartLayoutModel.prototype.setTimeRange=function(t){var r=g[e.preferredTimeRange.indexOf(t)],o=this.mainDatasource,n=this.axisx,i=a(1e3*o.now()),s=a({hour:y.OPEN_HOUR,minute:y.OPEN_MINUTE}),l=a({hour:y.CLOSE_HOUR,minute:y.CLOSE_MINUTE}),c=~~(i.toDate().getTime()/1e3+86400),u=~~(function(){switch(t){case"1天":return i.isAfter(l)?s.toDate().getTime():s.subtract(1,"days").toDate().getTime();case"5天":for(var e=i.isAfter(l)?s:s.subtract(1,"days"),r=4;r--;)e.subtract(1,"days"),-1===y.OPEN_DAYS.indexOf(e.day())&&r++;return e.toDate().getTime();case"1月":return s.subtract(1,"months").toDate().getTime();case"1年":return s.subtract(1,"years").toDate().getTime();case"全部":return a("2000-01-01").toDate().getTime();default:throw"unsupport range type"}}()/1e3);r!==this.mainDatasource.resolution&&this.setResolution(r);var d=o.search(u);-1===d?o.loadTimeRange(u,c).then(function(t){t.length&&(n.barWidth=(n.width-h.INITIAL_OFFSET)/t.length)}):n.barWidth=(n.width-h.INITIAL_OFFSET)/(o.loaded()-d),n.resetOffset()},ChartLayoutModel.prototype.addSelfSelect=function(t){var e=this.readFromLS("qchart.selfselectlist")||[];e.push(t),this.saveToLS("qchart.selfselectlist",e),this.emit("self_select_add")},ChartLayoutModel.prototype.deleteSelfSelect=function(t){var e=this.readFromLS("qchart.selfselectlist")||[];this.saveToLS("qchart.selfselectlist",i.reject(e,function(e){return e.symbol===t.symbol})),this.emit("self_select_delete")},ChartLayoutModel.prototype.toggleAbout=function(t){this._component.setState({showAbout:t})},ChartLayoutModel.prototype.showAnalysisSidebarTab=function(){this._component.setState({sidebarFolded:!1,sidebarActiveIndex:4})},ChartLayoutModel.prototype.toggleGoToDate=function(t){this._component.setState({showGoToDate:t})},ChartLayoutModel.prototype.setContextMenu=function(t){this._component.setState({contextMenuConfig:t})},ChartLayoutModel.prototype.setGapVisibility=function(t){this.saveToLS("chart.showGap",t),this.mainChart.mainGraph.showGap=t,this.emit("gap_visibility_change",t)},ChartLayoutModel.prototype.setWaveVisibility=function(t){var e=this.mainChart.patterns,r=this.readFromLS("chart.forceMA"),o=this.readFromLS("chart.showReverseRelay");this.saveToLS("chart.showWaveForm",t),t?(e.length?(this.mainChart.setPatternVisibility(!0,t),this.emit("pattern_modify",t)):this.addPatterns(),r||"D"!==this.mainDatasource.resolution||this.hideMA()):(this.mainChart.setPatternVisibility(!0,t),this.emit("pattern_modify",t),o||this.showMA())},ChartLayoutModel.prototype.setReverseRelayVisibility=function(t){var e=this.mainChart.patterns,r=this.readFromLS("chart.forceMA"),o=this.readFromLS("chart.showWaveForm");this.saveToLS("chart.showReverseRelay",t),t?(e.length?(this.mainChart.setPatternVisibility(!1,t),this.emit("pattern_modify")):this.addPatterns(),r||"D"!==this.mainDatasource.resolution||this.hideMA()):(this.mainChart.setPatternVisibility(!1,t),this.emit("pattern_modify"),o||this.showMA())},ChartLayoutModel.prototype.clearCache=function(){this._charts.forEach(function(t){t.graphs.forEach(function(t){t.clearCache(),t.datasource.clearCache()})})},ChartLayoutModel.prototype.removeAllStudies=function(){var t=this;this.charts.reverse().forEach(function(e){e.graphs.filter(function(t){return t instanceof u.default}).forEach(function(r){return t.removeStudy(e,r.id)})})},ChartLayoutModel.prototype.removeAllTools=function(){this._charts.forEach(function(t){t.removeAllTools()})},ChartLayoutModel.prototype.removeAllPatterns=function(){this.mainChart.removeAllPatterns(),this.emit("patterns_remove")},ChartLayoutModel.prototype.needMoreData=function(){var t=this.axisx,e=this.mainDatasource.loaded()*t.barWidth,r=t.width;return e-r-t.offset<r},ChartLayoutModel}(n);Object.defineProperty(e,"__esModule",{value:!0}),e.default=_},NIhD:function(t,e,r){"use strict";function setContext(t,e){i={datasource:t,adapter:e,cacheObj:{}}}function clearContext(){i=null}function getContext(){return i}function getLastOpenIndex(t){var e=o(1e3*t.last().time).hour(n.OPEN_HOUR).minute(n.OPEN_MINUTE);return t.search(~~(e.toDate().getTime()/1e3))}function $MA(t){var e=i.datasource,r=i.adapter,o=i.cacheObj,n=o.$ma_openIndex||getLastOpenIndex(e);if(o.$ma_openIndex=n,t<n||-1===n)return null;for(var a=0,s=0,l=n,c=void 0;l<=t;l++)c=r(e.barAt(l)),a+=c[2],s+=100*c[3];return a/s}function MA(t,e,r){var o=(i.datasource,i.adapter,t-e+1),n=t+1,a=0;if(o<0)return null;for(var s=o;s<n;s++)a+=r(s);return a/(n-o)}function LLV(t,e,r){for(var o=t-e+1<0?0:t-e+1,n=t+1,i=Number.MAX_VALUE,a=o,s=void 0;a<n;a++)(s=r(a))<i&&(i=s);return i}function HHV(t,e,r){for(var o=t-e+1<0?0:t-e+1,n=t+1,i=-Number.MAX_VALUE,a=o,s=void 0;a<n;a++)(s=r(a))>i&&(i=s);return i}function REF(t,e,r){return t-1<0?null:r(t-e)}function SUM(t,e,r){for(var o=t-e+1<0?0:t-e+1,n=t+1,i=0,a=o;a<n;a++)i+=r(a);return i}function STD(t,e,r){var o=t-e+1,n=t+1;if(o<0)return null;for(var i=0,a=o;a<n;a++)i+=r(a);i/=n-o;for(var s=0,a=o;a<n;a++)s+=Math.pow(r(a)-i,2);return Math.sqrt(s/(n-o))}function AVEDEV(t,e,r){var o=t-e+1,n=t+1;if(o<0)return null;for(var i=0,a=o;a<n;a++)i+=r(a);i/=n-o;for(var s=0,a=o;a<n;a++)s+=Math.abs(r(a)-i);return s/(n-o)}function EMA(t,e,r){var o=i.cacheObj,n=r.toString(),a="ema"+n+e+"_"+t,s="ema"+n+e+"_"+(t-1);if("number"==typeof o[a])return o[a];if("number"==typeof o[s])return o[a]=2/(e+1)*(r(t)-o[s])+o[s];for(var l=t-5*e<0?0:t-5*e,c=t+1,h=0,u=l+1;u<c;u++)h=2/(e+1)*(r(u)-h)+h;return o[a]=h,h}function SMA(t,e,r,o){var n=i.cacheObj,a=o.toString(),s="sma"+a+e+"_"+t,l="sma"+a+e+"_"+(t-1);if("number"==typeof n[s])return n[s];if(n[l])return n[s]=(r*o(t)+(e-r)*n[l])/e;for(var c=t-8*e<0?0:t-8*e,h=t+1,u=50,d=c+1;d<h;d++)u=(r*o(d)+(e-r)*u)/e;return n[s]=u,u}var o=r("PJh5"),n=r("Cqed"),i=null;e.setContext=setContext,e.clearContext=clearContext,e.getContext=getContext,e.H=function(t){var e=i.datasource;return(0,i.adapter)(e.barAt(t))[3]},e.L=function(t){var e=i.datasource;return(0,i.adapter)(e.barAt(t))[4]},e.C=function(t){var e=i.datasource;return(0,i.adapter)(e.barAt(t))[2]},e.LC=function(t){return REF(t,1,e.C)},e.$MA=$MA,e.MA=MA,e.LLV=LLV,e.HHV=HHV,e.REF=REF,e.SUM=SUM,e.STD=STD,e.AVEDEV=AVEDEV,e.EMA=EMA,e.SMA=SMA},NpAc:function(t,e,r){"use strict";var o=r("/bDT"),n=function(){function Pattern(t,e,r){var n=r.bwPoints,i=r.swPoints,a=r.trendLines,s=r.points;switch(this._isValid=!0,this._type=e,e){case"wave":this._renderer=new o.WavePatternRenderer(t,n,i),this._isVisible=!!t.chartLayout.readFromLS("chart.showWaveForm");break;case"mhead":case"whead":case"hsp":case"hsb":case"triangle":this._renderer=new o.ShapePatternRenderer(t,s,a),this._isVisible=!!t.chartLayout.readFromLS("chart.showReverseRelay")}}return Object.defineProperty(Pattern.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){this._isVisible!==t&&(this._isVisible=t,this._isValid=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(Pattern.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(Pattern.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),Pattern.prototype.draw=function(t){this._renderer.draw(t),this._isValid=!0},Pattern.prototype.isNowVisible=function(){return this._renderer.isNowVisible()},Pattern}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},NvYq:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("mZpQ");var n=r("U7vG"),i=r("rdLu"),a=r("wRi7"),s=r("NBiX"),l=function(t){function Welcome(e,r){t.call(this,e,r),this._chartLayout=r.chartLayout,this.clickHandler=this.clickHandler.bind(this),this.state={animateStep:0}}return o(Welcome,t),Welcome.prototype.componentDidMount=function(){var t=this;a.animationQueue().delay(500).enqueue(function(){return t.setState({animateStep:1})}).delay(300).enqueue(function(){return t.setState({animateStep:2})}).delay(120).enqueue(function(){return t.setState({animateStep:4})}).delay(300).enqueue(function(){return t.setState({animateStep:5})})},Welcome.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.state,e)},Welcome.prototype.render=function(){var t="";switch(this.state.animateStep){case 0:break;case 1:t="ani-step-1";break;case 2:t="ani-step-2";break;case 3:t="ani-step-3";break;case 4:t="ani-step-4";break;case 5:t="ani-step-5"}return n.createElement("div",{className:"chart-welcome "+t},n.createElement("div",{className:"blocker"}),n.createElement("div",{className:"content cd-intro-content"},n.createElement("div",{className:"logo"}),n.createElement("h1",null,"趣看盘"),n.createElement("h2",null,"更智能， 更高效， 更及时， 更全面"),n.createElement("p",null,"看盘软件在十几年间都没有发生过重要的变化，应该这样吗?"),n.createElement("p",null,"我们走访了数百家专业机构，发现他们",n.createElement("em",null,"看盘的方式"),"和",n.createElement("em",null,"主流看盘工具提供的功能"),"有非常",n.createElement("em",null,"巨大的信息鸿沟"),"。"),n.createElement("p",null,n.createElement("em",null,"几个IT工程师"),"，尝试做些创新， 试图帮您具备",n.createElement("em",null,"专业的看盘视角和能力"),"。"),n.createElement("a",{href:"javascript:;",className:"proceed-btn",onClick:this.clickHandler}),n.createElement("a",{href:"/forums/",target:"_blank",className:"feedback-btn"},"建议/反馈")))},Welcome.prototype.clickHandler=function(){var t=this;a.animationQueue().enqueue(function(){return t.setState({animateStep:3})}).delay(300).enqueue(function(){return t.setState({animateStep:0})}).delay(300).enqueue(function(){return t._chartLayout.toggleAbout(!1)})},Welcome.contextTypes={chartLayout:n.PropTypes.instanceOf(s.default)},Welcome}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=l},P2GU:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("4VlZ"),r("bpF5");var n=r("U7vG"),i=r("bHfy"),a=r("NBiX"),s=r("wRi7"),l=r("H9vw"),c=function(t){function PlateList(e,r){t.call(this,e,r),this.state={sortKey:"zdf",order:"desc",startIndex:0},this._chartLayout=r.chartLayout,this.onScrollEnd=this.onScrollEnd.bind(this),this.sortHandler=this.sortHandler.bind(this),this.selectHandler=this.selectHandler.bind(this),this.setSymbolHandler=this.setSymbolHandler.bind(this),this.loadPlates=this.loadPlates.bind(this),this.loadStocks=this.loadStocks.bind(this)}return o(PlateList,t),PlateList.prototype.shouldComponentUpdate=function(t,e){var r=this.state;return r.plates!==e.plates||r.stocks!==e.stocks||r.activePlateId!==e.activePlateId||r.sortKey!==e.sortKey||r.order!==e.order},PlateList.prototype.componentWillReceiveProps=function(t){t.width!==this.props.width&&(this._platelistScroller.refresh(),this._stockListScroller.refresh(),this._wrapperScroller.refresh())},PlateList.prototype.componentDidMount=function(){this._isMounted=!0,this._wrapperScroller=new i(this.refs.wrapper,{scrollbars:!0,hScrollbar:!0,scrollX:!0,scrollY:!1,fadeScrollbars:!0}),this._platelistScroller=new i(this.refs.plateListBody,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this._stockListScroller=new i(this.refs.stockListBody,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this._platelistScroller.on("scrollEnd",this.onScrollEnd),this.loadPlates(this.state.sortKey,this.state.order,this.state.startIndex)},PlateList.prototype.componentDidUpdate=function(){this._platelistScroller.refresh(),this._stockListScroller.refresh(),this._wrapperScroller.refresh()},PlateList.prototype.componentWillUnmount=function(){this._isMounted=!1,this._platelistScroller.destroy(),this._stockListScroller.destroy(),this._wrapperScroller.destroy(),clearTimeout(this._pollPlateListTimer),clearTimeout(this._pollStockListTimer)},PlateList.prototype.render=function(){var t=this,e=this.state.total,r=this.state.startIndex,o=this.state.plates,i=30*r,a=30*(e-r-9-1);return n.createElement("div",{className:"chart-plate",ref:"wrapper"},n.createElement("div",{className:"wrapper"},n.createElement("div",{className:"plate-list"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"18%"},"板块名称"),n.createElement("th",{width:"16%","data-key":"zdf",onClick:this.sortHandler},"涨跌幅","zdf"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"18%","data-key":"big_rate",onClick:this.sortHandler},"大单净比","big_rate"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"18%","data-key":"big_amount",onClick:this.sortHandler},"主力资金","big_amount"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"12%"},"上涨数"),n.createElement("th",{width:"12%"},"下跌数"),n.createElement("th",{width:"6%"})))),n.createElement("div",{className:"body",ref:"plateListBody"},n.createElement("table",{className:"s-table stripe "+(this.state.startIndex%2==0?"even":"odd")+" top-header"},n.createElement("tbody",null,n.createElement("tr",{key:"paddingTop"},n.createElement("td",{style:{height:i+"px"}})),o&&o.map(function(e,r){return n.createElement("tr",{key:r,className:e.bk_id===t.state.activePlateId?"selected":"","data-id":e.bk_id,onClick:t.selectHandler},n.createElement("td",{width:"18%"},e.name),n.createElement("td",{width:"16%"},(100*e.zdf).toFixed(2),"%"),n.createElement("td",{width:"18%"},(100*e.big_rate).toFixed(2),"%"),n.createElement("td",{width:"18%"},s.formatNumber(+e.big_amount,2)),n.createElement("td",{width:"12%"},e.z_num),n.createElement("td",{width:"12%"},e.d_num),n.createElement("td",{width:"6%"}))}),n.createElement("tr",{key:"paddingBottom"},n.createElement("td",{style:{height:a+"px"}})))))),n.createElement("div",{className:"separator"}),n.createElement("div",{className:"stock-list"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"40%"},"股票名称"),n.createElement("th",{width:"30%"},"最新价"),n.createElement("th",{width:"30%"},"涨跌幅")))),n.createElement("div",{className:"body",ref:"stockListBody"},n.createElement("table",{className:"s-table stripe even top-header"},n.createElement("tbody",null,this.state.stocks&&this.state.stocks.map(function(e,r){return n.createElement("tr",{key:r,"data-symbol":e.c,onClick:t.setSymbolHandler},n.createElement("td",{width:"40%"},e.n),n.createElement("td",{width:"30%"},(+e.price).toFixed(2)),n.createElement("td",{width:"30%"},(100*e.p_change).toFixed(2),"%"))})))))))},PlateList.prototype.onScrollEnd=function(){var t=~~(-this._platelistScroller.y/30);this.loadPlates(this.state.sortKey,this.state.order,t)},PlateList.prototype.sortHandler=function(t){var e=t.target.dataset.key,r="desc";e===this.state.sortKey&&(r="desc"===this.state.order?"asc":"desc"),this.loadPlates(e,r,this.state.startIndex)},PlateList.prototype.selectHandler=function(t){var e=t.currentTarget.dataset.id;this.loadStocks(e)},PlateList.prototype.setSymbolHandler=function(t){this.context.chartLayout.setSymbol(t.currentTarget.dataset.symbol)},PlateList.prototype.loadPlates=function(t,e,r){var o=this;clearTimeout(this._pollPlateListTimer),l.getAllPlates(t,e,r,9).then(function(n){if(o._isMounted){var i=1e3*n.data.intver;o.setState({sortKey:t,order:e,startIndex:r,plates:n.data.list,total:n.data.total_count}),o._pollPlateListTimer=i?setTimeout(function(){return o.loadPlates(t,e,r)},i):-1}}).catch(function(n){return o._pollPlateListTimer=setTimeout(function(){return o.loadPlates(t,e,r)},1e4)})},PlateList.prototype.loadStocks=function(t){var e=this;clearTimeout(this._pollStockListTimer),l.getStockListByPlateId(t).then(function(r){if(e._isMounted){var o=1e3*r.data.intver;e.setState({activePlateId:t,stocks:r.data.list}),e._pollStockListTimer=o?setTimeout(function(){return e.loadStocks(t)},o):-1}}).catch(function(r){return e._pollStockListTimer=setTimeout(function(){return e.loadStocks(t)},1e4)})},PlateList.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},PlateList}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=c},PcI6:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("RCQf");var n=r("U7vG"),i=r("m1l+"),a=r("XErX"),s=r("f1k0"),l=r("5A/R"),c=function(t){function Realtime(){t.call(this),this.state={tabIndex:0}}return o(Realtime,t),Realtime.prototype.shouldComponentUpdate=function(t,e){var r=this.props,o=this.state;return r.stockInfo!==t.stockInfo||r.capitalFlowInfo!==t.capitalFlowInfo||r.height!==t.height||o.tabIndex!==e.tabIndex},Realtime.prototype.render=function(){var t=this.props.height,e=this.props.stockInfo,r=this.props.capitalFlowInfo,o=e.selling&&e.buying,c=e.ticks.length,h=0,u=0,d=0;return o?c?(h=.3,u=.25,d=.45):(h=.5,u=.5):c?(u=.5,d=.5):u=1,n.createElement("div",{className:"realtime-info"},o?n.createElement(i.default,{stockInfo:e,maxHeight:t*h}):null,n.createElement(a.default,{stockInfo:e,maxHeight:t*u})," : null",c?n.createElement("div",{className:"tab-wrapper",style:{height:t*d+"px"}},n.createElement("ul",{className:"tab-btn-group",onClick:this.switchTabPage.bind(this),onTouchStart:this.switchTabPage.bind(this)},n.createElement("li",{className:0===this.state.tabIndex?"on":"","data-index":"0"},"明细"),n.createElement("li",{className:1===this.state.tabIndex?"on":"","data-index":"1"},"资金")),n.createElement("div",{className:"tab-container"},0===this.state.tabIndex?n.createElement(s.default,{stockInfo:e,maxHeight:t*d-35}):null,1===this.state.tabIndex?n.createElement(l.default,{capitalFlowInfo:r,maxHeight:t*d-35}):null)):null)},Realtime.prototype.switchTabPage=function(t){var e=+t.target.dataset.index;this.setState({tabIndex:e})},Realtime}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=c},PjwK:function(t,e){},PxPp:function(t,e,r){"use strict";var o=r("H9vw"),n=1,i=function(){function GraphModel(t,e,r,o,i,a,s,l,c,h,u,d){void 0===d&&(d=null),this._isValid=!0,this._hover=!1,this._selected=!1,this._datasource=t,this._chart=e,this._priority=r,this._isPrice=o,this._isRemovable=i,this._isMain=a,this._isComparison=s,this._isVisible=l,this._styles=c,this._adapter=h,this._calc=u,this._input=d,this._id=n++,this._plots=[],this._cache={}}return Object.defineProperty(GraphModel.prototype,"input",{get:function(){return this._input},set:function(t){this._input=t,this._isValid=!1},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"styles",{get:function(){return this._styles},set:function(t){this._styles=t,this._plots.forEach(function(e,r){return e.style=t[r]}),this._isValid=!1},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"isPrice",{get:function(){return this._isPrice},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"isRemovable",{get:function(){return this._isRemovable},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"isMain",{get:function(){return this._isMain},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"isComparison",{get:function(){return this._isComparison},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected!==t&&(this._selected=t,this._isValid=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){this._isVisible=t,this._isValid=!1},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"hover",{get:function(){return this._hover},set:function(t){this._hover!==t&&(this._hover=t,this._isValid=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"plots",{get:function(){return this._plots.slice(0)},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"datasource",{get:function(){return this._datasource},enumerable:!0,configurable:!0}),Object.defineProperty(GraphModel.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),GraphModel.prototype.draw=function(t){this._plots.forEach(function(e){return e.draw(t)}),this._isValid=!0},GraphModel.prototype.getPrevBar=function(){var t=this._chart.crosshair.point;if(!t)return null;var e=this._chart.axisX,r=e.findTimeBarByX(t.x-e.barWidth);return r?this._cache[r.time]:null},GraphModel.prototype.getCurBar=function(){var t=this._chart.crosshair.point;if(!t)return null;var e=this._chart.axisX.findTimeBarByX(t.x);return e?this._cache[e.time]:null},GraphModel.prototype.getNextBar=function(){var t=this._chart.crosshair.point;if(!t)return null;var e=this._chart.axisX,r=e.findTimeBarByX(t.x+e.barWidth);return r?this._cache[r.time]:null},GraphModel.prototype.getRangeY=function(){return this._plots.reduce(function(t,e){var r=e.graphic.calcRangeY();return r?t?(r.max>t.max&&(t.max=r.max),r.min<t.min&&(t.min=r.min),t):{max:r.max,min:r.min}:t},null)},GraphModel.prototype.hitTest=function(t){void 0===t&&(t=!1);for(var e=this._plots.length-1;e>=0;e--)if(this._plots[e].hitTest())return t&&(this.selected=!0),this.hover=!0;return t&&(this.selected=!1),this.hover=!1},GraphModel.prototype.getVisibleBars=function(){if(this._visibleBarCache)return this._visibleBarCache;var t=this._datasource,e=this._chart.axisX.getVisibleTimeBars(),r=e[0],n=e[e.length-1];if(!r||!n)return[];var i=t.range(r.time,n.time);if(!i.length)return[];var a=[];o.setContext(t,this._adapter);for(var s=0,l=i.length,c=void 0,h=t.search(i[0].time),u=void 0;s<l;s++,h++)c=i[s],u=this._cache[c.time],u=this._calc(this._adapter(c),h,this._input),this._cache[c.time]=u,a.push(u);o.clearContext();for(var d,p,f,m=[],y=0,g=0,_=e.length,v=a.length;y<_&&g<v;)if(d=a[g],p=d?d[0]:null,f=e[y],p)if(p[1]===f.time){for(var b=0,E=d,x=E.length;b<x;b++)E[b]&&(E[b][0]=f.x);m.push(d),y++,g++}else p[1]>f.time?y++:g++;else y++,g++;return this._visibleBarCache=m},GraphModel.prototype.clearCache=function(){this._visibleBarCache=null,this._cache={}},GraphModel}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},QKig:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("gd6M");var n=r("U7vG"),i=function(t){function FullScreen(){t.apply(this,arguments)}return o(FullScreen,t),FullScreen.prototype.shouldComponentUpdate=function(){return!1},FullScreen.prototype.render=function(){return n.createElement("a",{ref:"btn",className:"full-screen",title:"全屏/取消",onClick:this.mouseclickhandler.bind(this)})},FullScreen.prototype.mouseclickhandler=function(t){this.props.onFullScreen()},FullScreen}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},RCQf:function(t,e){},"RR/l":function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("rdLu"),i=r("PJh5"),a=r("uRx8"),s=r("+d7d"),l=r("Cqed"),c=r("9FmA"),h=function(t){function StockDatasource(e,r,o,n){void 0===n&&(n=0),t.call(this,r,n),this._defaultSymbol=e,this._right=o,this._symbolInfo=null,this._plotList=new s.default}return o(StockDatasource,t),Object.defineProperty(StockDatasource.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t},enumerable:!0,configurable:!0}),Object.defineProperty(StockDatasource.prototype,"symbol",{get:function(){return this._symbol},set:function(t){this._symbol=t},enumerable:!0,configurable:!0}),Object.defineProperty(StockDatasource.prototype,"defaultSymbol",{get:function(){return this._defaultSymbol},enumerable:!0,configurable:!0}),Object.defineProperty(StockDatasource.prototype,"symbolInfo",{get:function(){return this._symbolInfo},set:function(t){this._symbol=t.symbol,this._symbolInfo=t},enumerable:!0,configurable:!0}),StockDatasource.prototype.barAt=function(t){return this._plotList.get(t)},StockDatasource.prototype.first=function(){return this._plotList.first()},StockDatasource.prototype.last=function(){return this._plotList.last()},StockDatasource.prototype.slice=function(t,e){return this._plotList.slice(t,e)},StockDatasource.prototype.range=function(t,e){return this._plotList.range(t,e)},StockDatasource.prototype.loaded=function(){return this._plotList.size()},StockDatasource.prototype.search=function(t){return this._plotList.search(t)},StockDatasource.prototype.max=function(t,e){void 0===e&&(e=this.loaded());var r=this.slice(t,e),o=-Number.MAX_VALUE;return r.forEach(function(t){return o=t.high>o?t.high:o}),o},StockDatasource.prototype.min=function(t,e){void 0===e&&(e=this.loaded());var r=this.slice(t,e),o=Number.MAX_VALUE;return r.forEach(function(t){return o=t.low<o?t.low:o}),o},StockDatasource.prototype.loadTimeRange=function(t,e){var r=this,o=this._symbol,i=this._resolution,s=this._right;return t>e?Promise.resolve([]):new Promise(function(l,c){return a.getStockBars(o,i,s,t,e).then(function(t){var e=[];t.t.forEach(function(o,n){var i={amount:t.a[n],close:t.c[n],high:t.h[n],low:t.l[n],open:t.o[n],time:t.t[n],volume:t.v[n]};r._pulseInterval=t.interval,t.tr&&(i.turnover=t.tr[n]),t.zd&&(i.changerate=t.zd[n]),e.push(i)}),e=n.unique(e,function(t){return t.time}),o.toUpperCase()===r._symbol.toUpperCase()&&i===r._resolution?(r._plotList.merge(e),l(e)):c("response expired")}).catch(c)})},StockDatasource.prototype.loadHistory=function(t,e,r){var o=this;if(void 0===e&&(e=0),!this._hasMoreHistory)return Promise.resolve();var n=r||(this._plotList.first()?this._plotList.first().time:this.now()+86400),a=0,s=0;switch(this._resolution){case"1":a=n-24*~~(t/l.OPEN_MINITES_COUNT+1)*3600,s=864e3;break;case"5":a=n-24*~~(t/l.OPEN_MINITES_COUNT*5+1)*3600,s=1728e3;break;case"15":a=n-24*~~(t/l.OPEN_MINITES_COUNT*15+1)*3600,s=3888e3;break;case"30":a=n-24*~~(t/l.OPEN_MINITES_COUNT*30+1)*3600,s=7776e3;break;case"60":a=n-24*~~(t/l.OPEN_MINITES_COUNT*60+1)*3600,s=15552e3;break;case"D":a=n-2*t*24*3600,s=31104e3;break;case"W":a=n-1.5*t*7*24*3600,s=31104e3;break;case"M":a=n-1.2*t*30*24*3600,s=31104e3;break;default:throw new Error("unsupport resolution")}for(var c=i(1e3*a);-1===l.OPEN_DAYS.indexOf(c.day());)c.subtract(1,"days");return a=~~(c.toDate().getTime()/1e3),new Promise(function(r,i){return o.loadTimeRange(a,n).then(function(n){var l=o._plotList.first()?o._plotList.first().time:o.now(),c=n.length;e+=c,e>=t?r():l-a>=s?(o._hasMoreHistory=!1,r()):o.loadHistory(t,e,a).then(r).catch(i)}).catch(i)})},StockDatasource.prototype.resolveSymbol=function(t){var e=this;return a.resolveSymbol(t).then(function(t){if(!t.description)return e.resolveSymbol(e._defaultSymbol);e._symbolInfo={description:t.description,exchange:t["exchange-listed"],symbol:t.symbol,type:t.type},e._symbol=t.symbol})},StockDatasource.prototype.searchSymbols=function(t){return new Promise(function(e){return a.searchSymbols(t).then(function(t){return e(t.map(function(t){return{description:t.description,exchange:t.exchange,symbol:t.symbol,type:t.type}}))})})},StockDatasource.prototype.clearCache=function(){t.prototype.clearCache.call(this),this._plotList.clear()},StockDatasource}(c.Datasource);e.StockDatasource=h},SjNc:function(t,e){},TsRb:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("U7vG"),i=r("NBiX"),a=function(t){function AxisX(e,r){t.call(this,e,r),this._axisX=r.chartLayout.axisx,this.moveHandler=this.moveHandler.bind(this),this.startHandler=this.startHandler.bind(this),this.endHandler=this.endHandler.bind(this)}return o(AxisX,t),AxisX.prototype.componentDidMount=function(){var t=this._axisX;t.ctx=this.refs.canvas.getContext("2d"),t.width=this.props.width,t.height=this.props.height,document.addEventListener("mousemove",this.moveHandler),document.addEventListener("touchmove",this.moveHandler),document.addEventListener("mouseup",this.endHandler),document.addEventListener("touchend",this.endHandler)},AxisX.prototype.componentWillUnmount=function(){document.removeEventListener("mousemove",this.moveHandler),document.removeEventListener("touchmove",this.moveHandler),document.removeEventListener("mouseup",this.endHandler),document.removeEventListener("touchend",this.endHandler)},AxisX.prototype.componentDidUpdate=function(){var t=this._axisX,e=this.refs.canvas,r=this.props.width,o=this.props.height;t.width=r,t.height=o,e.width=r,e.height=o,e.getContext("2d")},AxisX.prototype.shouldComponentUpdate=function(t){var e=this.props;return e.width!==t.width||e.height!==t.height},AxisX.prototype.render=function(){var t=this.props.width,e=this.props.height;return n.createElement("div",{className:"chart-line"},n.createElement("div",{className:"chart-axisx",style:{height:e,width:t}},n.createElement("canvas",{ref:"canvas",width:t,height:e,onMouseDown:this.startHandler,onTouchStart:this.startHandler})))},AxisX.prototype.moveHandler=function(t){if(this._dragBarWidthStart){var e=this._axisX,r=e.width,o=t.changedTouches?t.changedTouches[0].pageX:t.pageX,n=e.barWidth,i=r<=this._dragPosX?1:1+(this._dragPosX-o)/r;e.barWidth=n*i,i=e.barWidth/n,e.offset*=i,this._dragPosX=o}},AxisX.prototype.startHandler=function(t){t.touches?(t.preventDefault(),1===t.touches.length&&(this._dragPosX=t.touches[0].pageX,this._dragBarWidthStart=!0)):(this._dragPosX=t.pageX,this._dragBarWidthStart=!0)},AxisX.prototype.endHandler=function(){this._dragBarWidthStart=!1},AxisX.contextTypes={chartLayout:n.PropTypes.instanceOf(i.default)},AxisX}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},UALi:function(t,e,r){"use strict";var o=r("KTML"),n=function(){function PlotModel(t,e,r,o){this.priceLabels=[],this._graph=t,this._index=e,this._style=o,this._originalShape=r,this.shape=r}return Object.defineProperty(PlotModel.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t,this._graphic.style=t},enumerable:!0,configurable:!0}),Object.defineProperty(PlotModel.prototype,"shape",{get:function(){return this._shape},set:function(t){var e=t===this._originalShape?this._style:{};switch(this._shape=t,t){case"line":this._graphic=new o.LineChartRenderer(this,e);break;case"mountain":this._graphic=new o.MountainChartRenderer(this,e);break;case"column":this._graphic=new o.ColumnChartRenderer(this,e);break;case"candle":this._graphic=new o.CandleChartRenderer(this,e);break;case"histogram":this._graphic=new o.HistogramChartRenderer(this,e);break;case"band":this._graphic=new o.BandRenderer(this,e);break;case"inflection":this._graphic=new o.InflectionRenderer(this);break;default:throw"unsupported chart shape"}},enumerable:!0,configurable:!0}),Object.defineProperty(PlotModel.prototype,"graphic",{get:function(){return this._graphic},enumerable:!0,configurable:!0}),Object.defineProperty(PlotModel.prototype,"graph",{get:function(){return this._graph},enumerable:!0,configurable:!0}),PlotModel.prototype.draw=function(t){t.save(),this._graphic.draw(t),t.restore(),this._graph.selected&&this._graphic.drawSelection()},PlotModel.prototype.hitTest=function(){return this._graphic.hitTest()},PlotModel.prototype.getVisibleBars=function(){for(var t=this._graph.isVisible?this._graph.getVisibleBars():[],e=[],r=0,o=t.length,n=this._index,i=void 0;r<o;r++)(i=t[r][n])&&e.push(i);return e},PlotModel.prototype.getPrevBar=function(){var t=this._graph.getPrevBar();return t?t[this._index]:null},PlotModel.prototype.getCurBar=function(){var t=this._graph.getCurBar();return t?t[this._index]:null},PlotModel.prototype.getNextBar=function(){var t=this._graph.getNextBar();return t?t[this._index]:null},PlotModel}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},UYip:function(t,e){},"Uu/m":function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("rdLu"),i=r("EVIZ"),a=function(t){function WavePatternRenderer(e,r,o){t.call(this,e),this._bwPoints=r,this._swPoints=o}return o(WavePatternRenderer,t),WavePatternRenderer.prototype.draw=function(t){var e,r,o=this._bwPoints,n=this._swPoints,i=this._chart,a=i.axisX,s=i.axisY,l=o.length,c=null;t.save(),t.lineWidth=3,t.strokeStyle="rgba( 60, 120, 216, 1)",t.setLineDash([6,6]),t.beginPath(),l&&(c=o[0],e=~~a.getXByTime(c.time),r=~~s.getYByValue(c.value),t.moveTo(e,r));for(var h=1;h<l;h++)c=o[h],e=~~a.getXByTime(c.time),r=~~s.getYByValue(c.value),t.lineTo(e,r);t.stroke(),t.lineWidth=3,t.beginPath(),(l=n.length)&&(c=n[0],e=~~a.getXByTime(c.time),r=~~s.getYByValue(c.value),t.moveTo(e,r));for(var h=1;h<l;h++)c=n[h],e=~~a.getXByTime(c.time),r=~~s.getYByValue(c.value),t.lineTo(e,r);t.stroke(),t.restore()},WavePatternRenderer.prototype.hitTest=function(){return!1},WavePatternRenderer.prototype.isNowVisible=function(){var t=this._chart.axisX.getVisibleTimeBars(),e=t[0],r=t[t.length-1],o=n.pluck(this._bwPoints,"time"),i=n.pluck(this._swPoints,"time");return!(e.time>Math.max(n.max(o),n.max(i))||r.time<n.min(o))},WavePatternRenderer}(i.BasePatternRenderer);e.WavePatternRenderer=a},Vfj7:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("oJNF"),i=r("Cqed"),a=function(t){function VertLineRenderer(){t.apply(this,arguments)}return o(VertLineRenderer,t),Object.defineProperty(VertLineRenderer.prototype,"vertexes",{get:function(){var t=this._chart.axisY.range;return this._vertexes.map(function(e){return{time:e.time,value:(t.max+t.min)/2}})},enumerable:!0,configurable:!0}),VertLineRenderer.prototype.drawTool=function(t){var e=this._chart,r=e.axisX,o=this._vertexes[0],n=~~r.getXByTime(o.time);t.strokeStyle="#000",t.lineWidth=1,t.translate(.5,0),t.beginPath(),t.moveTo(n,0),t.lineTo(n,e.height),t.stroke()},VertLineRenderer.prototype.hitTestTool=function(){var t=this._chart.axisX,e=this.getCursor(),r=this._vertexes[0];return Math.abs(e.x-~~t.getXByTime(r.time))<i.HIT_TEST_TOLERANCE},VertLineRenderer.prototype.isFinished=function(){return 1===this._vertexes.length},VertLineRenderer}(n.BaseToolRenderer);e.VertLineRenderer=a},Vq7t:function(t,e){},VzTM:function(t,e){},W60S:function(t,e){},WE1R:function(t,e){},WOwf:function(t,e){},Ww5v:function(t,e){},XErX:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("dx9y");var n=r("U7vG"),i=r("bHfy"),a=r("wRi7"),s=function(t){function StockDetail(){t.apply(this,arguments)}return o(StockDetail,t),StockDetail.prototype.shouldComponentUpdate=function(t){var e=this.props;return e.stockInfo!==t.stockInfo||e.maxHeight!==t.maxHeight},StockDetail.prototype.componentDidMount=function(){this._stockInfoScroll=new i(this.refs.container,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0})},StockDetail.prototype.componentDidUpdate=function(){this._stockInfoScroll.refresh()},StockDetail.prototype.componentWillUnmount=function(){this._stockInfoScroll.destroy(),this._stockInfoScroll=null},StockDetail.prototype.render=function(){var t=this.props.stockInfo;return n.createElement("div",{className:"chart-stock-detail",ref:"container",style:{maxHeight:this.props.maxHeight+"px"}},n.createElement("table",null,n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{width:"42"},"昨收"),n.createElement("td",{width:"76"},t.preClose),n.createElement("th",{width:"46"},"成交量"),n.createElement("td",{width:"74"},a.formatNumber(1e4*t.volume,2),"手")),n.createElement("tr",null,n.createElement("th",null,"今开"),n.createElement("td",{className:t.open>t.preClose?"positive":"negtive"},t.open),n.createElement("th",null,"成交额"),n.createElement("td",null,a.formatNumber(1e8*t.amount,2))),n.createElement("tr",null,n.createElement("th",null,"最高"),n.createElement("td",{className:t.high>t.preClose?"positive":"negtive"},t.high),n.createElement("th",null,"振幅"),n.createElement("td",null,t.amplitude,"%")),n.createElement("tr",null,n.createElement("th",null,"最低"),n.createElement("td",{className:t.low>t.preClose?"positive":"negtive"},t.low),n.createElement("th",null,"换手率"),n.createElement("td",null,t.turnover?t.turnover+"%":"--")),n.createElement("tr",null,n.createElement("th",null,"涨停"),n.createElement("td",{className:"positive"},(1.1*t.preClose).toFixed(2)),n.createElement("th",null,"内盘"),n.createElement("td",{className:"positive"},t.inVol?t.inVol:"--")),n.createElement("tr",null,n.createElement("th",null,"跌停"),n.createElement("td",{className:"negtive"},(.9*t.preClose).toFixed(2)),n.createElement("th",null,"外盘"),n.createElement("td",{className:"negtive"},t.outVol?t.outVol:"--")))))},StockDetail}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=s},YSPl:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("85aO"),r("Vq7t"),r("unwN");var n=r("U7vG"),i=r("rdLu"),a=r("NBiX"),s=["5","15","30","60","D","W","M"],l={1:"分时",5:"5分钟",15:"15分钟",30:"30分钟",60:"60分钟",D:"日K",W:"周K",M:"月K"},c=function(t){function ResolutionOption(e,r){t.call(this,e,r),this._resolution="D",this._chartLayout=r.chartLayout,this.state={showMoreResolution:!1},this.updateView=this.updateView.bind(this),this.resolutionSelectHandler=this.resolutionSelectHandler.bind(this),this.showMoreResolutionHandler=this.showMoreResolutionHandler.bind(this),this.hideMoreResolutionHandler=this.hideMoreResolutionHandler.bind(this)}return o(ResolutionOption,t),ResolutionOption.prototype.componentDidMount=function(){this._chartLayout.addListener("resolution_change",this.updateView),document.addEventListener("mousedown",this.hideMoreResolutionHandler),document.addEventListener("touchstart",this.hideMoreResolutionHandler)},ResolutionOption.prototype.componentWillUnmount=function(){this._chartLayout.removeListener("resolution_change",this.updateView),document.removeEventListener("mousedown",this.hideMoreResolutionHandler),document.removeEventListener("touchstart",this.hideMoreResolutionHandler)},ResolutionOption.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.props,t)||!i.isEqual(this.state,e)},ResolutionOption.prototype.render=function(){var t=this,e=this._chartLayout.mainDatasource.resolution;return"1"!==e&&(this._resolution=e),n.createElement("div",{className:"chart-resolution chart-btn-group"},n.createElement("a",{href:"javascript:;",className:"btn "+("1"===e?"active":""),"data-value":1,onClick:this.resolutionSelectHandler},l[1]),n.createElement("a",{href:"javascript:;",className:"btn "+(this._resolution===e?"active":""),"data-value":this._resolution,onClick:this.resolutionSelectHandler},l[this._resolution]),n.createElement("a",{href:"javascript:;",className:"btn btn-more",onClick:this.showMoreResolutionHandler},n.createElement("i",null)),this.state.showMoreResolution?n.createElement("ul",{className:"popup-menu"},s.map(function(e){return n.createElement("li",{key:e,"data-value":e,onMouseDown:t.resolutionSelectHandler,onTouchStart:t.resolutionSelectHandler},l[e])})):null)},ResolutionOption.prototype.updateView=function(){this.forceUpdate()},ResolutionOption.prototype.resolutionSelectHandler=function(t){t.touches&&t.preventDefault();var e=this._chartLayout,r=t.target.dataset.value;e.mainDatasource.resolution!==r&&this.props.onResolutionChange(r)},ResolutionOption.prototype.showMoreResolutionHandler=function(){this.setState({showMoreResolution:!0})},ResolutionOption.prototype.hideMoreResolutionHandler=function(t){this.state.showMoreResolution&&(t.touches&&t.preventDefault(),this.setState({showMoreResolution:!1}))},ResolutionOption.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},ResolutionOption}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=c},Yd5c:function(t,e){},ZUoU:function(t,e){},aTSk:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("rdZE");var n=r("U7vG"),i=r("rdLu"),a=r("Cqed"),s=r("Fi2k"),l=r("NBiX"),c=r("dZHW"),h=r("ALsY"),u=function(t){function Chart(e,r){t.call(this,e),this._v=0,this.state={hover:!1,cursor:"crosshair",showEditModeToolTip:!1,pointX:0,pointY:0},this._chartLayout=r.chartLayout,this.dragMoveHandler=this.dragMoveHandler.bind(this),this.gestureMoveHandler=this.gestureMoveHandler.bind(this),this.mouseDownHandler=this.mouseDownHandler.bind(this),this.touchStartHandler=this.touchStartHandler.bind(this),this.mouseMoveHandler=this.mouseMoveHandler.bind(this),this.touchMoveHandler=this.touchMoveHandler.bind(this),this.touchEndHandler=this.touchEndHandler.bind(this),this.mouseUpPageHanlder=this.mouseUpPageHanlder.bind(this),this.touchEndPageHandler=this.touchEndPageHandler.bind(this),this.contextMenuHanlder=this.contextMenuHanlder.bind(this),this.mouseOver=this.mouseOver.bind(this),this.mouseOut=this.mouseOut.bind(this),this.toolTipHandler=this.toolTipHandler.bind(this),this.hitHandler=this.hitHandler.bind(this),this.defaultCursorChangeHandler=this.defaultCursorChangeHandler.bind(this)}return o(Chart,t),Chart.prototype.shouldComponentUpdate=function(t,e){var r=this.props;return t.chart!==r.chart||t.width!==r.width||t.height!==r.height||!i.isEqual(this.state,e)},Chart.prototype.componentDidMount=function(){var t=this._chartLayout,e=this.props.chart,r=~~this.props.width-a.AXIS_Y_WIDTH,o=~~this.props.height,n=this.refs.canvas,i=this.refs.topCanvas;e.width=r,e.height=o,e.ctx=n.getContext("2d"),e.topCtx=i.getContext("2d"),t.addListener("graph_hover",this.hitHandler),t.addListener("cursor_change",this.defaultCursorChangeHandler),t.addListener("cursor_move",this.toolTipHandler),t.addListener("drawingtool_end",this.toolTipHandler),t.addListener("editmode_change",this.toolTipHandler),document.addEventListener("mousemove",this.dragMoveHandler),document.addEventListener("touchmove",this.dragMoveHandler),document.addEventListener("touchmove",this.gestureMoveHandler),document.addEventListener("mouseup",this.mouseUpPageHanlder),document.addEventListener("touchend",this.touchEndPageHandler)},Chart.prototype.componentWillUnmount=function(){var t=this._chartLayout;t.removeListener("graph_hover",this.hitHandler),t.removeListener("cursor_change",this.defaultCursorChangeHandler),t.removeListener("cursor_move",this.toolTipHandler),t.removeListener("drawingtool_end",this.toolTipHandler),t.removeListener("editmode_change",this.toolTipHandler),document.removeEventListener("mousemove",this.dragMoveHandler),document.removeEventListener("touchmove",this.dragMoveHandler),document.removeEventListener("touchmove",this.gestureMoveHandler),document.removeEventListener("mouseup",this.mouseUpPageHanlder),document.removeEventListener("touchend",this.touchEndPageHandler)},Chart.prototype.componentDidUpdate=function(t){var e=this.props,r=this.props.chart,o=this.refs.canvas,n=this.refs.topCanvas;if(e.width!==t.width||e.height!==t.height){var i=~~this.props.width-a.AXIS_Y_WIDTH,s=~~this.props.height;o.width=i,o.height=s,n.width=i,n.height=s,o.getContext("2d"),n.getContext("2d"),r.width=i,r.height=s}},Chart.prototype.render=function(){var t=this.props.chart,e=this.props.width,r=this.props.width-a.AXIS_Y_WIDTH,o=this.props.height;return n.createElement("div",{className:"chart-line "+(t.isMain?"main":""),style:{width:e}},n.createElement("div",{className:"chart-plot",style:{height:o+"px",width:r+"px",cursor:this.state.cursor}},n.createElement(s.default,{chart:t}),n.createElement("canvas",{ref:"canvas",width:r,height:o}),n.createElement("canvas",{ref:"topCanvas",width:r,height:o,onContextMenu:this.contextMenuHanlder,onMouseDown:this.mouseDownHandler,onTouchStart:this.touchStartHandler,onMouseMove:this.mouseMoveHandler,onTouchMove:this.touchMoveHandler,onTouchEnd:this.touchEndHandler,onMouseOver:this.mouseOver,onMouseOut:this.mouseOut}),this.state.showEditModeToolTip?n.createElement("div",{className:"edit-mode-tooltip",style:{right:this.state.pointX+"px",bottom:this.state.pointY+"px"}},"1.拖动十字线定义第一点.",n.createElement("br",null),"2.点击任意位置确定第一个停止位置"):null,t.isMain?n.createElement(c.default,{chart:t}):null),n.createElement(h.default,{axis:t.axisY,height:o,width:a.AXIS_Y_WIDTH}))},Chart.prototype.momentumMove=function(t){var e=this,r=this._chartLayout.axisx;this._momentumTimer=setTimeout(function(){Math.abs(t)>10&&(r.offset+=30*t/1e3,t-=.3*t,e.momentumMove(t))},30)},Chart.prototype.stopMomentum=function(){clearTimeout(this._momentumTimer)},Chart.prototype.toolTipHandler=function(){var t=this._chartLayout,e=this.props.chart,r=e.crosshair.point;if(e.hover&&t.isEditMode){var o=~~this.props.width-a.AXIS_Y_WIDTH,n=~~this.props.height;this.setState({showEditModeToolTip:!0,pointX:o-r.x+8,pointY:n-r.y+8})}else this.setState({showEditModeToolTip:!1})},Chart.prototype.hitHandler=function(t){this._chartLayout.hoverChart===this.props.chart&&this.setState({cursor:t?"pointer":this._chartLayout.defaultCursor})},Chart.prototype.defaultCursorChangeHandler=function(t){this.setState({cursor:this.state.hover?"pointer":this._chartLayout.defaultCursor})},Chart.prototype.mouseOver=function(){this.props.chart.hover=!0},Chart.prototype.mouseOut=function(){this.props.chart.hover=!1,this.context.chartLayout.setCursorPoint(null)},Chart.prototype.mouseDownHandler=function(t){var e=this._chartLayout,r=this.props.chart,o=r.offset,n={x:t.pageX-o.left,y:t.pageY-o.top};if(0!==e.mainDatasource.loaded()){if(e.cancelSelectedGraph(),r.crosshair.point||e.setCursorPoint(n),e.selectedDrawingTool)return r.drawingToolBegin(),r.drawingToolSetVertex(n),void(r.creatingDrawingTool.isFinished()&&r.drawingToolEnd());if(r.creatingDrawingTool)return r.drawingToolSetVertex(n),void(r.creatingDrawingTool.isFinished()&&r.drawingToolEnd());r.hitTest(!0),r.editingDrawingTool?e.willEraseDrawingTool?r.removeDrawingTool(r.editingDrawingTool):(r.editingDrawingTool.isEditing=!0,this._dragDrawingToolStart=!0,this._dragPosX=n.x,this._dragPosY=n.y):(this._dragOffsetStart=!0,this._dragPosX=n.x,this._dragPosY=n.y)}},Chart.prototype.touchStartHandler=function(t){var e=this,r=1===t.touches.length,o=2===t.touches.length,n=this._chartLayout,i=this.props.chart;if(t.preventDefault(),0!==n.mainDatasource.loaded()){this._cancelClick=!1,n.cancelSelectedGraph(),i.hover||n.setHoverChart(i),this.stopMomentum();var a=i.offset,s={x:t.touches[0].pageX-a.left,y:t.touches[0].pageY-a.top};if(r){if(!n.isEditMode){if(n.setCursorPoint(s),n.selectedDrawingTool)return i.drawingToolBegin(),i.drawingToolSetVertex(s),void(i.creatingDrawingTool.isFinished()&&i.drawingToolEnd());if(i.creatingDrawingTool)return i.drawingToolSetVertex(s),void(i.creatingDrawingTool.isFinished()&&i.drawingToolEnd());this._longTapCounter=setTimeout(function(){e.contextMenuHanlder()},500)}i.hitTest(!0),i.editingDrawingTool?n.willEraseDrawingTool?i.removeDrawingTool(i.editingDrawingTool):(i.editingDrawingTool.isEditing=!0,this._dragDrawingToolStart=!0,this._dragPosX=s.x,this._dragPosY=s.y):(this._lastMovePosition=s.x,this._lastMoveTime=t.timeStamp,this._dragOffsetStart=!0,this._dragPosX=s.x,this._dragPosY=s.y)}else if(o){var l=Math.abs(t.touches[0].clientX-t.touches[1].clientX),c=Math.abs(t.touches[0].clientY-t.touches[1].clientY);return this._dragOffsetStart=!1,void(l>=c?(this._pinchHorzStart=!0,this._pinchOffset=l):(this._pinchVertStart=!0,this._pinchOffset=c))}}},Chart.prototype.touchEndHandler=function(t){var e=1===t.changedTouches.length,r=this._chartLayout,o=this.props.chart,n=o.crosshair.point;t.preventDefault(),clearTimeout(this._longTapCounter),r.isEditMode&&e&&!this._cancelClick&&(r.selectedDrawingTool?(o.drawingToolBegin(),o.drawingToolSetVertex({x:n.x,y:n.y}),o.creatingDrawingTool.isFinished()&&o.drawingToolEnd()):o.creatingDrawingTool&&(o.drawingToolSetVertex({x:n.x,y:n.y}),o.creatingDrawingTool.isFinished()&&o.drawingToolEnd()))},Chart.prototype.mouseUpPageHanlder=function(t){var e=this.props.chart;this._dragDrawingToolStart&&(e.editingDrawingTool.isEditing=!1,e.editingDrawingTool=null,this._dragDrawingToolStart=!1),this._dragOffsetStart=!1},Chart.prototype.touchEndPageHandler=function(t){var e=this.props.chart;this._dragOffsetStart&&t.timeStamp-this._lastMoveTime<60&&Math.abs(this._v)>100&&this.momentumMove(this._v),this._dragDrawingToolStart&&(e.editingDrawingTool.isEditing=!1,e.editingDrawingTool=null,this._dragDrawingToolStart=!1),this._dragOffsetStart=!1,this._pinchHorzStart=!1,this._pinchVertStart=!1,this._pinchOffset=0,this._v=0},Chart.prototype.mouseMoveHandler=function(t){var e=this._chartLayout,r=this.props.chart,o=r.offset,n={x:t.pageX-o.left,y:t.pageY-o.top};e.setCursorPoint(n),this._dragOffsetStart||this._dragDrawingToolStart||r.creatingDrawingTool||r.editingDrawingTool||r.hitTest()},Chart.prototype.touchMoveHandler=function(t){var e=this._chartLayout,r=this.props.chart,o=r.offset,n={x:t.touches[0].pageX-o.left,y:t.touches[0].pageY-o.top};clearTimeout(this._longTapCounter),this._pinchHorzStart||this._pinchVertStart||(this._cancelClick=!0,e.isEditMode||e.setCursorPoint(n))},Chart.prototype.dragMoveHandler=function(t){if(this._dragDrawingToolStart||this._dragOffsetStart){var e=!!t.touches,r=this.props.chart,o=this._chartLayout,n=r.axisX,i=r.axisY,a=r.offset,s=e?{x:t.touches[0].pageX-a.left,y:t.touches[0].pageY-a.top}:{x:t.pageX-a.left,y:t.pageY-a.top};if(this._dragDrawingToolStart){var l=n.findTimeBarByX(s.x).x,c=n.findTimeBarByX(this._dragPosX).x,h=l>=c?~~((l-c)/n.barWidth+.5):~~((l-c)/n.barWidth-.5),u=i.getValueByY(s.y-a.top)-i.getValueByY(this._dragPosY-a.top);r.editingDrawingTool.moveBy(h,u),this._dragPosX=s.x,this._dragPosY=s.y}else if(this._dragOffsetStart)if(o.isEditMode){var d=r.crosshair.point;o.setCursorPoint({x:d.x+s.x-this._dragPosX,y:d.y+s.y-this._dragPosY}),this._dragPosX=s.x,this._dragPosY=s.y}else{var p=n.offset,f=p+s.x-this._dragPosX,m=t.timeStamp;n.offset=f,this._dragPosX=s.x,e&&(this._v=(s.x-this._lastMovePosition)/(m-this._lastMoveTime)*1e3,this._lastMovePosition=s.x,this._lastMoveTime=m)}}},Chart.prototype.gestureMoveHandler=function(t){if(this._pinchHorzStart||this._pinchVertStart){var e=this.props.chart,r=e.axisX,o=e.axisY;if(this._pinchHorzStart){var n=Math.abs(t.touches[1].pageX-t.touches[0].pageX),i=r.barWidth,a=n/this._pinchOffset;r.barWidth=i*a,a=r.barWidth/i,r.offset*=a,this._pinchOffset=n}else if(this._pinchVertStart){var n=Math.abs(t.touches[1].pageY-t.touches[0].pageY),s=n-this._pinchOffset,l=o.height,c=o.margin,h=l-2*c,a=2*s/l;o.margin=(l-h*(1+a))/2,this._pinchOffset=n}}},Chart.prototype.contextMenuHanlder=function(t){t&&t.preventDefault();var e=this._chartLayout,r=this.props.chart.offset,o=t?parseInt(t.pageX):this._dragPosX+r.left,n=t?parseInt(t.pageY):this._dragPosY+r.top;e.setContextMenu({x:o,y:n,items:[{name:"定位时间",type:"gotodate"}],actions:function(t){"gotodate"===t&&e.toggleGoToDate(!0)}})},Chart.contextTypes={chartLayout:n.PropTypes.instanceOf(l.default)},Chart}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=u},b2uV:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("BzvE"),i=r("Cqed"),a=r("lKDe"),s=r("FHs6");e.INITIAL_OFFSET=50,e.MAX_BAR_WIDTH=30,e.MIN_BAR_WIDTH=2;var l=function(t){function AxisXModel(r,o){t.call(this),this._barWidth=8,this._offset=-e.INITIAL_OFFSET,this._isValid=!1,this._datasource=r,this._crosshair=o,this._tickmark=new s.default(this),this._graphic=new a.default(this)}return o(AxisXModel,t),Object.defineProperty(AxisXModel.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){t<e.MIN_BAR_WIDTH?this._barWidth=e.MIN_BAR_WIDTH:t>e.MAX_BAR_WIDTH?this._barWidth=e.MAX_BAR_WIDTH:this._barWidth=t,this._isValid=!1,this.emit("barwidth_change",this._barWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(AxisXModel.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),Object.defineProperty(AxisXModel.prototype,"offset",{get:function(){return this._offset},set:function(t){t<this.getMinOffset()?this._offset=this.getMinOffset():t>this.getMaxOffset()?this._offset=this.getMaxOffset():this._offset=t,this._isValid=!1,this.emit("offset_change",this._offset)},enumerable:!0,configurable:!0}),Object.defineProperty(AxisXModel.prototype,"datasource",{get:function(){return this._datasource},enumerable:!0,configurable:!0}),Object.defineProperty(AxisXModel.prototype,"graphic",{get:function(){return this._graphic},enumerable:!0,configurable:!0}),Object.defineProperty(AxisXModel.prototype,"tickmark",{get:function(){return this._tickmark},enumerable:!0,configurable:!0}),Object.defineProperty(AxisXModel.prototype,"crosshair",{get:function(){return this._crosshair},enumerable:!0,configurable:!0}),AxisXModel.prototype.getVisibleTimeBars=function(){if(this._visibleTimeBars)return this._visibleTimeBars;var t,e,r=[],o=this._datasource,n=o.resolution,i=this.width,a=this._barWidth,s=o.loaded(),l=this._offset,c=s-~~(l/a),h=i-a/2;if(c>s)c=s;else if(c<0)return r;h+=l>=0?l%a:l;var u=c-Math.ceil(h/a)-1;u<=0&&(u=0);var d=o.slice(u,c);if(!d.length)return r;t=h;for(var p=d.length-1;p>=0;p--,t-=a)r.unshift({time:d[p].time,x:t});for(e=r[0].time;t>=0;)e=this.getPrevTickTime(e,n),r.unshift({time:e,x:t}),t-=a;for(t=h,e=r[r.length-1].time;t<=i-a/2;)t+=a,e=this.getNextTickTime(e,n),r.push({time:e,x:t});return this._visibleTimeBars=r},AxisXModel.prototype.draw=function(t){void 0===t&&(t=!1);var e=this.ctx,r=this.width,o=this.height;t||(this._visibleTimeBars=null,this._tickmark.clearTickmarks()),e.save(),e.fillStyle="#ffffff",e.fillRect(0,0,r,o),this._graphic.draw(),e.restore(),this._isValid=!0},AxisXModel.prototype.findTimeBarByX=function(t){var e=this._barWidth,r=this.getVisibleTimeBars(),o=r[0],n=r[r.length-1],i=this._datasource.resolution;if(!r.length)return null;if(t>n.x){var a=n.x,s=~~((t-a+.5*e)/e),l=n.time;for(t=a+s*e;s--;)l=this.getNextTickTime(l,i);return{x:t,time:l}}if(t<o.x){var a=o.x,s=~~((a-t+.5*e)/e),l=o.time;for(t=a-s*e;s--;)l=this.getPrevTickTime(l,i);return{x:t,time:l}}var a=o.x,s=~~((t-a+.5*e)/e);return r[s]},AxisXModel.prototype.getXByTime=function(t){var e=this.getVisibleTimeBars(),r=this._barWidth,o=this._datasource,n=e[0],i=e[e.length-1];if(!e.length)return null;if(t>=n.time&&t<=i.time)return e[this.search(t)].x;for(var a=t<n.time?n.x:i.x,s=o.resolution,l=0,c=t<n.time?n.time:i.time;c!==t;)c<t?(c=this.getNextTickTime(c,s),l++):(t=this.getNextTickTime(t,s),l--);return a+l*r},AxisXModel.prototype.getNextTickTime=function(t,e){var r;switch(e){case"1":t+=60,r=new Date(1e3*t);break;case"5":t+=300,r=new Date(1e3*t);break;case"15":t+=900,r=new Date(1e3*t);break;case"30":t+=1800,r=new Date(1e3*t);break;case"60":t+=3600,r=new Date(1e3*t);break;case"D":t+=86400,r=new Date(1e3*t);break;case"W":for(t+=604800,r=new Date(1e3*t);5!==r.getDay();)r.setTime(r.getTime()+864e5);break;case"M":if(r=new Date(1e3*t),11===r.getMonth()?(r.setFullYear(r.getFullYear()+1),r.setDate(1),r.setMonth(1),r.setTime(r.getTime()-864e5)):10===r.getMonth()?(r.setFullYear(r.getFullYear()+1),r.setDate(1),r.setMonth(0),r.setTime(r.getTime()-864e5)):(r.setDate(1),r.setMonth(r.getMonth()+2),r.setTime(r.getTime()-864e5)),-1===i.OPEN_DAYS.indexOf(r.getDay())){for(var o=r.getDay(),n=0;-1===i.OPEN_DAYS.indexOf(o);)o=o-1<0?6:o-1,n++;r.setTime(r.getTime()-864e5*n)}}if(e<="60")for(var a=0,s=i.OPEN_TIME_RANGE.length,l=r.getHours(),c=r.getMinutes();a<s;a++){var h=i.OPEN_TIME_RANGE[a+1],u=i.OPEN_TIME_RANGE[a],d=u[1][0],p=u[1][1],f=void 0,m=void 0;if(h){if(f=h[0][0],m=h[0][1],(l>d||l===d&&c>p)&&(l<f||l===f&&c<m)){r.setHours(f+l-d),r.setMinutes(m+c-p);break}}else if(l>d||l===d&&c>p){h=i.OPEN_TIME_RANGE[0],f=h[0][0],m=h[0][1],r.setTime(r.getTime()+864e5),r.setHours(f+l-d),r.setMinutes(m+c-p);break}}if(-1===i.OPEN_DAYS.indexOf(r.getDay())){for(var o=r.getDay(),n=0;-1===i.OPEN_DAYS.indexOf(o%7);)n++,o++;r.setTime(r.getTime()+864e5*n)}return r.getTime()/1e3},AxisXModel.prototype.getPrevTickTime=function(t,e){var r;switch(e){case"1":t-=60,r=new Date(1e3*t);break;case"5":t-=300,r=new Date(1e3*t);break;case"15":t-=900,r=new Date(1e3*t);break;case"30":t-=1800,r=new Date(1e3*t);break;case"60":t-=3600,r=new Date(1e3*t);break;case"D":t-=86400,r=new Date(1e3*t);break;case"W":for(t-=604800,r=new Date(1e3*t);5!==r.getDay();)r.setTime(r.getTime()+864e5);break;case"M":if(r=new Date(1e3*t),r.setDate(1),r.setTime(r.getTime()-864e5),-1===i.OPEN_DAYS.indexOf(r.getDay())){for(var o=r.getDay(),n=0;-1===i.OPEN_DAYS.indexOf(o);)o=o-1<0?6:o-1,n++;r.setTime(r.getTime()-864e5*n)}}if(e<="60")for(var a=i.OPEN_TIME_RANGE.length-1,s=r.getHours(),l=r.getMinutes();a>=0;a--){var c=i.OPEN_TIME_RANGE[a-1],h=i.OPEN_TIME_RANGE[a],u=h[0][0],d=h[0][1],p=void 0,f=void 0;if(c){if(p=c[1][0],f=c[1][1],(s>p||s===p&&l>f)&&(s<u||s===u&&l<d)){r.setHours(p-(s-u)),r.setMinutes(f-(l-d));break}(s===p&&l===f||s===u&&l===d)&&(r.setHours(p),r.setMinutes(f))}else{if(s<u||s===u&&l<d){c=i.OPEN_TIME_RANGE[i.OPEN_TIME_RANGE.length-1],p=c[1][0],f=c[1][1],r.setTime(r.getTime()-864e5),r.setHours(p-(u-s)),r.setMinutes(f-(d-l));break}s===u&&l===d&&(c=i.OPEN_TIME_RANGE[i.OPEN_TIME_RANGE.length-1],p=c[1][0],f=c[1][1],r.setTime(r.getTime()-864e5),r.setHours(p),r.setMinutes(f))}}if(-1===i.OPEN_DAYS.indexOf(r.getDay())){for(var o=r.getDay(),n=0;-1===i.OPEN_DAYS.indexOf(o);)o=o-1<0?6:o-1,n++;r.setTime(r.getTime()-864e5*n)}return~~(r.getTime()/1e3)},AxisXModel.prototype.search=function(t){var e=this.getVisibleTimeBars();return e.length?t<e[0].time||t>e[e.length-1].time?-1:this.bsearch(t,0,e.length-1,e):-1},AxisXModel.prototype.resetOffset=function(){this._offset=-e.INITIAL_OFFSET},AxisXModel.prototype.getMaxOffset=function(){return(this._datasource.loaded()-10)*this._barWidth},AxisXModel.prototype.getMinOffset=function(){return 10*this._barWidth-this.width},AxisXModel.prototype.bsearch=function(t,e,r,o){var n=~~((e+r)/2),i=o[n].time;return e===r?t===i?n:-1:i===t?n:i>t?this.bsearch(t,e,n,o):this.bsearch(t,n+1,r,o)},AxisXModel}(n);Object.defineProperty(e,"__esModule",{value:!0}),e.default=l},b5Rr:function(t,e){},bIqt:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("unwN");var n=r("U7vG"),i=r("rdLu"),a=r("NBiX"),s=function(t){function ContextMenu(e,r){t.call(this,e),this._chartLayout=r.chartLayout,this.closeHandler=this.closeHandler.bind(this),this.clickOutsideHandler=this.clickOutsideHandler.bind(this),this.onSelectMenu=this.onSelectMenu.bind(this)}return o(ContextMenu,t),ContextMenu.prototype.shouldComponentUpdate=function(t){return!i.isEqual(this.props,t)},ContextMenu.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.clickOutsideHandler),document.addEventListener("touchstart",this.clickOutsideHandler)},ContextMenu.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.clickOutsideHandler),document.removeEventListener("touchstart",this.clickOutsideHandler)},ContextMenu.prototype.render=function(){var t=this,e=this.props,r=e.x,o=e.y,i=e.items;return n.createElement("ul",{ref:"container",className:"chart-contextmenu popup-menu",style:{left:r+"px",top:o+"px"}},i.map(function(e){return n.createElement("li",{key:e.type,"data-type":e.type,onMouseDown:t.onSelectMenu,onTouchStart:t.onSelectMenu},e.name)}))},ContextMenu.prototype.onSelectMenu=function(t){t.touches&&t.preventDefault();var e=t.target.dataset.type;this.props.actions(e),this.closeHandler()},ContextMenu.prototype.closeHandler=function(){this._chartLayout.setContextMenu(null)},ContextMenu.prototype.clickOutsideHandler=function(t){var e=this.refs.container,r=t.target;r===e||e.contains(r)||this.closeHandler()},ContextMenu.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},ContextMenu.defaultProps={},ContextMenu}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=s},bYF0:function(t,e,r){"use strict";e.OPEN_DAYS=[1,2,3,4,5],e.OPEN_TIME_RANGE=[[[9,30],[11,30]],[[13,0],[15,0]]],e.OPEN_HOUR=e.OPEN_TIME_RANGE[0][0][0],e.OPEN_MINUTE=e.OPEN_TIME_RANGE[0][0][1],e.CLOSE_HOUR=e.OPEN_TIME_RANGE[e.OPEN_TIME_RANGE.length-1][1][0],e.CLOSE_MINUTE=e.OPEN_TIME_RANGE[e.OPEN_TIME_RANGE.length-1][1][1],e.OPEN_MINITES_COUNT=e.OPEN_TIME_RANGE.reduce(function(t,e){return t+=60*(e[1][0]-e[0][0])+(e[1][1]-e[0][1])},0)},bpF5:function(t,e){},cxcC:function(t,e,r){"use strict";function __export(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}__export(r("oJNF")),__export(r("FutI")),__export(r("I282")),__export(r("Vfj7")),__export(r("G0ps")),__export(r("1JLH"))},dZHW:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("Yd5c");var n=r("U7vG"),i=r("rdLu"),a=r("NBiX"),s=r("Cqed"),l=function(t){function Indicator(e,r){t.call(this,e),this._chartLayout=r.chartLayout,this.state={isOpen:!1,isLoading:!1},this.loadingStartHandler=this.loadingStartHandler.bind(this),this.loadingEndHandler=this.loadingEndHandler.bind(this)}return o(Indicator,t),Indicator.prototype.shouldComponentUpdate=function(t,e){return this.props.chart!==t.chart||!i.isEqual(this.state,e)},Indicator.prototype.componentDidMount=function(){var t=this;this._intervalCheckStatus=setInterval(function(){var e=t.isOpen();t.state.isOpen!==e&&t.setState({isOpen:e})},1e4),this._chartLayout.addListener("loading_start",this.loadingStartHandler),this._chartLayout.addListener("loading_end",this.loadingEndHandler)},Indicator.prototype.componentWillUnmount=function(){clearInterval(this._intervalCheckStatus),this._chartLayout.removeListener("loading_start",this.loadingStartHandler),this._chartLayout.removeListener("loading_end",this.loadingEndHandler)},Indicator.prototype.render=function(){var t=this.state,e=t.isOpen,r=t.isLoading;return n.createElement("div",{className:"chart-indicator "+(r?"loading":e?"open":"")},r?"加载中...":e?"实时":"收盘")},Indicator.prototype.loadingStartHandler=function(){this.setState({isLoading:!0})},Indicator.prototype.loadingEndHandler=function(){this.setState({isLoading:!1})},Indicator.prototype.isOpen=function(){var t=1e3*this.props.chart.datasource.now(),e=new Date(t);return-1!==s.OPEN_DAYS.indexOf(e.getDay())&&s.OPEN_TIME_RANGE.some(function(r){var o=new Date(t);o.setHours(r[0][0]),o.setMinutes(r[0][1]),o.setSeconds(0),o.setMilliseconds(0);var n=new Date(t);return n.setHours(r[1][0]),n.setMinutes(r[1][1]),n.setSeconds(0),n.setMilliseconds(0),e.getTime()>=o.getTime()&&e.getTime()<=n.getTime()})},Indicator.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},Indicator}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=l},dx9y:function(t,e){},f1k0:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("Hu7R");var n=r("U7vG"),i=r("bHfy"),a=function(t){function StockDetail(){t.apply(this,arguments)}return o(StockDetail,t),StockDetail.prototype.shouldComponentUpdate=function(t){var e=this.props;return e.stockInfo!==t.stockInfo||e.maxHeight!==t.maxHeight},StockDetail.prototype.componentDidMount=function(){this._tickListScroll=new i(this.refs.container,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0})},StockDetail.prototype.componentDidUpdate=function(){this._tickListScroll.refresh()},StockDetail.prototype.componentWillUnmount=function(){this._tickListScroll.destroy(),this._tickListScroll=null},StockDetail.prototype.render=function(){var t=this.props.stockInfo;return n.createElement("div",{className:"chart-tick-list",ref:"container",style:{maxHeight:this.props.maxHeight+"px"}},n.createElement("table",null,n.createElement("tbody",null,t.ticks.map(function(t,e){return n.createElement("tr",{key:e},n.createElement("td",{width:"34%"},t.time.substring(0,2),":",t.time.substring(2,4),":",t.time.substring(4,6)),n.createElement("td",{width:"33%"},t.price),n.createElement("td",{width:"33%",className:"1"===t.type?"positive":"2"===t.type?"negative":""},+t.volume/100,n.createElement("svg",{viewBox:"0 0 10 12"},n.createElement("g",null,n.createElement("path",{d:"M9.6,4.4c0.3,0.3,0.3,0.8,0,1.1C9.5,5.7,9.3,5.7,9.1,5.7S8.7,5.7,8.5,5.5L5.7,2.7v8.5c0,0.4-0.4,0.8-0.8,0.8c-0.4,0-0.8-0.4-0.8-0.8V2.7L1.4,5.5c-0.3,0.3-0.8,0.3-1.1,0s-0.3-0.8,0-1.1l4.1-4.1C4.5,0.1,4.7,0,4.9,0c0.2,0,0.4,0.1,0.6,0.2L9.6,4.4z"})))))}))))},StockDetail}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},gd6M:function(t,e){},gi10:function(t,e){},h0hR:function(t,e){},kXGG:function(t,e){},lKDe:function(t,e,r){"use strict";var o=r("wRi7"),n=function(){function AxisXRenderer(t){this._axis=t}return AxisXRenderer.prototype.draw=function(){var t=this._axis,e=t.ctx,r=t.width,n=t.height,i=t.getVisibleTimeBars(),a=t.crosshair.point;e.strokeStyle="#999999",e.lineWidth=1,e.translate(.5,.5),e.beginPath(),e.moveTo(0,0),e.lineTo(r,0),e.stroke(),e.font="10px ans-serif",e.fillStyle="#999999",e.textAlign="center";for(var s=t.tickmark.getTickMarksByTimeBars(i),l=0,c=s.length;l<c;l++){var h=s[l];e.moveTo(~~h.x,0),e.lineTo(~~h.x,5),e.fillText(h.time,h.x,19)}if(e.stroke(),e.closePath(),a){var u=t.findTimeBarByX(a.x);if(u){var d=new Date(1e3*u.time),p="",f=null;p=t.datasource.resolution>="D"?d.getFullYear()+"-"+o.pad(d.getMonth()+1+"",2)+"-"+o.pad(d.getDate()+"",2):d.getFullYear()+"-"+o.pad(d.getMonth()+1+"",2)+"-"+o.pad(d.getDate()+"",2)+" "+o.pad(d.getHours()+"",2)+":"+o.pad(d.getMinutes()+"",2),f=e.measureText(p),e.fillStyle="#333333",e.fillRect(u.x-f.width/2-4,0,f.width+8,n),e.fillStyle="#999999",e.fillText(p,u.x,19)}}},AxisXRenderer}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},"m1l+":function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("tSRr");var n=r("U7vG"),i=r("bHfy"),a=function(t){function BidList(){t.apply(this,arguments)}return o(BidList,t),BidList.prototype.shouldComponentUpdate=function(t){var e=this.props;return e.stockInfo!==t.stockInfo||e.maxHeight!==t.maxHeight},BidList.prototype.componentDidMount=function(){this._bidListScroll=new i(this.refs.container,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0})},BidList.prototype.componentDidUpdate=function(){this._bidListScroll.refresh()},BidList.prototype.componentWillUnmount=function(){this._bidListScroll.destroy(),this._bidListScroll=null},BidList.prototype.render=function(){var t=this.props.stockInfo;return n.createElement("div",{className:"chart-bid-list",ref:"container",style:{maxHeight:this.props.maxHeight+"px"}},n.createElement("div",null,n.createElement("div",{className:"caption"},n.createElement("b",{className:"sold"},"卖",n.createElement("br",null),n.createElement("br",null),"盘"),n.createElement("b",{className:"buy"},"买",n.createElement("br",null),n.createElement("br",null),"盘")),n.createElement("div",{className:"bid"},n.createElement("table",null,n.createElement("tbody",null,t.selling.map(function(e,r){return n.createElement("tr",{key:r},n.createElement("td",{width:"33.33%"},5-r),n.createElement("td",{width:"33.33%",className:e[0]>t.preClose?"positive":"negtive"},e[0]),n.createElement("td",{width:"33.33%"},e[1]/100))}))),n.createElement("hr",null),n.createElement("table",null,n.createElement("tbody",null,t.buying.map(function(e,r){return n.createElement("tr",{key:r},n.createElement("td",{width:"33.33%"},r+1),n.createElement("td",{width:"33.33%",className:e[0]>t.preClose?"positive":"negtive"},e[0]),n.createElement("td",{width:"33.33%"},e[1]/100))}))))))},BidList}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},m297:function(t,e,r){"use strict";var o=function(){function CrosshairRenderer(t){this._model=t}return CrosshairRenderer.prototype.draw=function(){var t=this._model,e=t.chart,r=e.topCtx,o=t.point,n=e.height,i=e.width,a=e.chartLayout.isEditMode;if(o){var s=e.axisX.findTimeBarByX(o.x);r.save(),r.strokeStyle=a?"#a000a0":"#999999",r.translate(.5,.5),r.setLineDash&&r.setLineDash([2,4]),r.lineWidth=1,r.beginPath(),s&&(r.moveTo(~~s.x,0),r.lineTo(~~s.x,~~n),r.stroke()),e.hover&&e.axisY.range&&(r.moveTo(0,~~o.y),r.lineTo(~~i,~~o.y),r.stroke()),r.closePath(),a&&e.hover&&(r.fillStyle="#a000a0",r.beginPath(),r.arc(~~s.x,~~o.y,3,0,2*Math.PI),r.closePath(),r.fill()),r.restore()}},CrosshairRenderer}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},mZpQ:function(t,e){},mrgO:function(t,e){},n1sv:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("u75s"),r("Vq7t"),r("unwN");var n=r("U7vG"),i=r("rdLu"),a=r("NBiX"),s=["MACD","KDJ","RSI","BOLL","CCI","CR"],l=function(t){function StudySelector(e,r){t.call(this,e,r),this._chartLayout=r.chartLayout,this.state={showStudySelector:!1},this.showMoreIndicatorHandler=this.showMoreIndicatorHandler.bind(this),this.hideMoreIndicatorHandler=this.hideMoreIndicatorHandler.bind(this),this.indicatorSelectHandler=this.indicatorSelectHandler.bind(this)}return o(StudySelector,t),StudySelector.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.hideMoreIndicatorHandler),document.addEventListener("touchstart",this.hideMoreIndicatorHandler)},StudySelector.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.hideMoreIndicatorHandler),document.removeEventListener("touchstart",this.hideMoreIndicatorHandler)},StudySelector.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.props,t)||!i.isEqual(this.state,e)},StudySelector.prototype.render=function(){return n.createElement("div",{className:"chart-indicator-selector chart-btn-group"},n.createElement("button",{className:"btn",onClick:this.showMoreIndicatorHandler},"指标"),this.state.showStudySelector?n.createElement("ul",{className:"popup-menu",onMouseDown:this.indicatorSelectHandler,onTouchStart:this.indicatorSelectHandler},s.map(function(t){return n.createElement("li",{key:t,"data-value":t},t)})):null)},StudySelector.prototype.showMoreIndicatorHandler=function(){this.setState({showStudySelector:!0})},StudySelector.prototype.hideMoreIndicatorHandler=function(t){this.state.showStudySelector&&(t.touches&&t.preventDefault(),this.setState({showStudySelector:!1}))},StudySelector.prototype.indicatorSelectHandler=function(t){t.touches&&t.preventDefault(),this.props.onAddStudy(t.target.dataset.value)},StudySelector.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},StudySelector}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=l},nbee:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("BzvE"),i=r("qYPw"),a=r("58Xd"),s=r("wRi7"),l=1,c=function(t){function ChartModel(e,r,o,n,i,s,c){void 0===c&&(c=!1),t.call(this),this._isValid=!1,this._hover=!1,this._isHit=!1,this._id=0,this._id=l++,this._chartLayout=e,this._datasource=r,this._axisX=o,this._axisY=n,this._crosshair=i,this._isPrice=s,this._isMain=c,this._grid=new a.default(this),this._graphs=[],this._patterns=[],this._tools=[]}return o(ChartModel,t),Object.defineProperty(ChartModel.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"chartLayout",{get:function(){return this._chartLayout},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"graphs",{get:function(){return this._graphs.slice(0)},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"visibleGraphs",{get:function(){return this._graphs.filter(function(t){return t.isVisible}).sort(function(t,e){return e.priority-t.priority})},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"studies",{get:function(){return this.graphs.filter(function(t){return t instanceof i.default}).sort(function(t,e){return e.priority-t.priority})},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"compares",{get:function(){return this.graphs.filter(function(t){return t.isComparison})},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"mainGraph",{get:function(){return this.graphs.filter(function(t){return t.isMain})[0]},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"tools",{get:function(){return this._tools.slice(0)},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"visibleTools",{get:function(){return this._tools.filter(function(t){return t.isNowVisible()&&!t.isEditing})},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"patterns",{get:function(){return this._patterns.slice(0)},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"visiblePatterns",{get:function(){return this._patterns.filter(function(t){return t.isVisible&&t.isNowVisible()})},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"datasource",{get:function(){return this._datasource},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"crosshair",{get:function(){return this._crosshair},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"axisX",{get:function(){return this._axisX},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"axisY",{get:function(){return this._axisY},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"isPrice",{get:function(){return this._isPrice},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"isMain",{get:function(){return this._isMain},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"isHit",{get:function(){return this._isHit},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"hover",{get:function(){return this._hover},set:function(t){this._hover=t,this.ctx&&(this._offset=s.clientOffset(this.ctx.canvas))},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),Object.defineProperty(ChartModel.prototype,"isValid",{get:function(){return this._isValid&&this.graphs.every(function(t){return t.isValid})&&this.tools.every(function(t){return t.isValid})&&this.patterns.every(function(t){return t.isValid})&&this.axisY.isValid},enumerable:!0,configurable:!0}),ChartModel.prototype.addGraph=function(t){this._graphs.push(t),this._isValid=!1},ChartModel.prototype.removeGraph=function(t){this._graphs.splice(this._graphs.indexOf(t),1),this._isValid=!1},ChartModel.prototype.addDrawingTool=function(t){this._tools.push(t),this._isValid=!1},ChartModel.prototype.setPatternVisibility=function(t,e){this._patterns.filter(function(e){return t?"wave"===e.type:"wave"!==e.type}).forEach(function(t){return t.isVisible=e}),this._isValid=!1},ChartModel.prototype.removeDrawingTool=function(t){this.editingDrawingTool=null,this._tools.splice(this._tools.indexOf(t),1),this._isValid=!1,this._chartLayout.emit("drawingtool_remove")},ChartModel.prototype.removeAllTools=function(){this._tools.length=0},ChartModel.prototype.drawingToolBegin=function(){var t=this._chartLayout;this.creatingDrawingTool=t.selectedDrawingTool,this.creatingDrawingTool.chart=this,t.selectedDrawingTool=null,this._chartLayout.emit("drawingtool_begin")},ChartModel.prototype.drawingToolEnd=function(){this.addDrawingTool(this.creatingDrawingTool),this.creatingDrawingTool=null,this._chartLayout.isEditMode=!1,this._chartLayout.emit("drawingtool_end")},ChartModel.prototype.drawingToolSetVertex=function(t){var e=this.axisX.findTimeBarByX(t.x),r=e.time,o=this.axisY.getValueByY(t.y);this.creatingDrawingTool.addVertex({time:r,value:o}),this._chartLayout.emit("drawingtool_setvertex")},ChartModel.prototype.addPattern=function(t){this._patterns.push(t),this._isValid=!1},ChartModel.prototype.removeAllPatterns=function(){this._patterns.length=0,this._isValid=!1},ChartModel.prototype.calcRangeY=function(){var t=this,e=this._graphs.reduce(function(e,r){if(t.isPrice&&!r.isPrice)return e;var o=r.getRangeY();return o?e?(o.max>e.max&&(e.max=o.max),o.min<e.min&&(e.min=o.min),e):{max:o.max,min:o.min}:e},null);e&&e.max===e.min&&(e.max+=.01,e.min-=.01),this._axisY.range=e},ChartModel.prototype.hitTest=function(t){void 0===t&&(t=!1);var e=!1;return this.visibleTools.reverse().forEach(function(r){e?r.hover=!1:r.hitTest(t)&&(e=!0)}),this.visibleGraphs.reverse().forEach(function(r){e?r.hover=!1:r.hitTest(t)&&(e=!0)}),e!==this._isHit&&(this._isHit=e,this._chartLayout.emit("graph_hover",e)),t&&this._chartLayout.emit("graph_select",e),e},ChartModel.prototype.draw=function(){var t=this.visibleGraphs,e=this.ctx;this.datasource.loaded()&&(this.drawBg(e),this._grid.draw(e),t.filter(function(t){return!t.hover}).forEach(function(t){return t.draw(e)}),t.filter(function(t){return t.hover}).forEach(function(t){return t.draw(e)}),this.visibleTools.forEach(function(t){return t.draw()}),this.visiblePatterns.forEach(function(t){return t.draw(e)}),this._isValid=!0)},ChartModel.prototype.clearTopCanvas=function(){var t=this.topCtx,e=this.width,r=this.height;t.clearRect(0,0,e,r)},ChartModel.prototype.clearCache=function(){this.graphs.forEach(function(t){return t.clearCache()})},ChartModel.prototype.drawBg=function(t){t.clearRect(0,0,this.width,this.height)},ChartModel}(n);Object.defineProperty(e,"__esModule",{value:!0}),e.default=c},nyAH:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("HG4G"),r("bpF5");var n=r("U7vG"),i=r("rdLu"),a=r("bHfy"),s=r("NBiX"),l=function(t){function Indexes(e,r){t.call(this,e,r),this._chartLayout=r.chartLayout,this.state={highlightFinished:!0},this.selectIndex=this.selectIndex.bind(this)}return o(Indexes,t),Indexes.prototype.componentDidMount=function(){this._scroller=new a(this.refs.scrollWrapper,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0})},Indexes.prototype.componentWillUnmount=function(){clearTimeout(this._highLightTimeout),this._scroller.destroy()},Indexes.prototype.componentDidUpdate=function(){this._scroller.refresh()},Indexes.prototype.componentWillReceiveProps=function(t){var e=this;i.isEqual(t.indexesInfo,this.props.indexesInfo)||(this.state.highlightFinished=!1,this._highLightTimeout=setTimeout(function(){return e.setState({highlightFinished:!0})},500))},Indexes.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.props,t)||!i.isEqual(this.state,e)},Indexes.prototype.render=function(){var t=this,e=this.props.indexesInfo,r=this._oldIndexesInfo,o=this.props.realtimeTools,i=this.props.nonRealtimeTools,a={},s={};return r&&e.forEach(function(t,e){return a[t.code]=r[e].price!==t.price?"mutation":""}),this._oldIndexesInfo=e,e&&e.forEach(function(t){return s[t.code]=+t.price_change>0?"positive":+t.price_change<0?"negtive":""}),o&&Object.keys(o).forEach(function(t){return s[t]="red"===o[t][1]?"positive":"green"===o[t][1]?"negtive":""}),n.createElement("div",{className:"chart-market",ref:"scrollWrapper",style:{height:this.props.height+"px"}},n.createElement("div",null,e?n.createElement("div",null,n.createElement("h3",null,"股指"),n.createElement("table",{className:"index-table s-table stripe even left-header"},n.createElement("tbody",null,e.map(function(e){return n.createElement("tr",{key:e.code,"data-symbol":e.code,onClick:t.selectIndex},n.createElement("th",{width:"70"},e.name),n.createElement("td",{width:"70",className:s[e.code]+" "+(a[e.code]||"")},n.createElement("span",null,e.price)),n.createElement("td",{width:"127",className:s[e.code]},(e.price_change>0?"+":"")+(+e.price_change).toFixed(2),"(",(e.p_change>0?"+":"")+(100*e.p_change).toFixed(2),"%)"))})))):null,o?n.createElement("div",null,n.createElement("h3",null,"实时数据"),n.createElement("table",{className:"s-table stripe even left-header"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{width:"157"},"沪股通资金流入"),n.createElement("td",{width:"110",className:s.hugutong},o.hugutong[0])),n.createElement("tr",null,n.createElement("th",null,"涨跌幅超过5%个股数"),n.createElement("td",null,n.createElement("span",{className:"positive"},o.goUpStaying[0]),"/",n.createElement("span",{className:"negtive"},o.fallStaying[0]))),n.createElement("tr",null,n.createElement("th",null,"急涨急跌股数"),n.createElement("td",{className:s.shortTermMove},o.shortTermMove[0]))))):null,i?n.createElement("div",null,n.createElement("h3",null,"资金和人气"),n.createElement("table",{className:"s-table stripe even left-header nonrealtime-tabe"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{width:"130"},"上证压力支撑"),n.createElement("td",{width:"137"},n.createElement("span",{className:"positive"},i.pressure),"/",n.createElement("span",{className:"negtive"},i.support))),n.createElement("tr",null,n.createElement("th",null,"央行资金"),n.createElement("td",{className:"red"===i.bankCapital[1]?"positive":"negtive"},i.bankCapital[0])),n.createElement("tr",null,n.createElement("th",null,"解禁市值"),n.createElement("td",{className:"negtive"},i.liftBanCapitalisation)),n.createElement("tr",null,n.createElement("th",null,"融资余额"),n.createElement("td",{className:"financing-balance"},i.financingBalance," ",n.createElement("span",{className:"red"===i.financingBalanceChange[1]?"positive":"negtive"},i.financingBalanceChange[0],n.createElement("svg",{viewBox:"0 0 10 12"},n.createElement("g",null,n.createElement("path",{d:"M9.6,4.4c0.3,0.3,0.3,0.8,0,1.1C9.5,5.7,9.3,5.7,9.1,5.7S8.7,5.7,8.5,5.5L5.7,2.7v8.5c0,0.4-0.4,0.8-0.8,0.8c-0.4,0-0.8-0.4-0.8-0.8V2.7L1.4,5.5c-0.3,0.3-0.8,0.3-1.1,0s-0.3-0.8,0-1.1l4.1-4.1C4.5,0.1,4.7,0,4.9,0c0.2,0,0.4,0.1,0.6,0.2L9.6,4.4z"})))))),n.createElement("tr",null,n.createElement("th",null,"机构资金"),n.createElement("td",{className:"red"===i.institutionCapital[1]?"positive":"negtive"},i.institutionCapital[0])),n.createElement("tr",null,n.createElement("th",null,"投资者资金"),n.createElement("td",{className:"red"===i.investerCapital[1]?"positive":"negtive"},i.investerCapital[0])),n.createElement("tr",null,n.createElement("th",null,"新增投资者"),n.createElement("td",{className:"positive"},i.newInvester)),n.createElement("tr",null,n.createElement("th",null,"交易投资者"),n.createElement("td",{className:"positive"},i.tradingInvester)),n.createElement("tr",null,n.createElement("th",null,"搜索人气"),n.createElement("td",{className:"positive"},i.searchSentiment)),n.createElement("tr",null,n.createElement("th",null,"股吧人气"),n.createElement("td",{className:"positive"},i.stockForumSentiment))))):null))},Indexes.prototype.selectIndex=function(t){this._chartLayout.setSymbol(t.currentTarget.dataset.symbol)},Indexes.contextTypes={chartLayout:n.PropTypes.instanceOf(s.default)},Indexes}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=l},oJNF:function(t,e,r){"use strict";var o=r("rdLu"),n=r("Cqed"),i=function(){function BaseToolRenderer(){this._hitVertexIndex=-1,this._vertexes=[],this._isValid=!1,this._isEditing=!1,this._hover=!1,this._selected=!1}return Object.defineProperty(BaseToolRenderer.prototype,"hover",{get:function(){return this._hover},set:function(t){t!==this._hover&&(this._hover=t,this._isValid=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(BaseToolRenderer.prototype,"selected",{get:function(){return this._selected},set:function(t){t!==this._selected&&(this._selected=t,this._isValid=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(BaseToolRenderer.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),Object.defineProperty(BaseToolRenderer.prototype,"isEditing",{get:function(){return this._isEditing},set:function(t){t!==this._isEditing&&(this._isEditing=t,this._isValid=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(BaseToolRenderer.prototype,"vertexes",{get:function(){return this._vertexes},enumerable:!0,configurable:!0}),Object.defineProperty(BaseToolRenderer.prototype,"hitVertexIndex",{get:function(){return this._hitVertexIndex},enumerable:!0,configurable:!0}),Object.defineProperty(BaseToolRenderer.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t},enumerable:!0,configurable:!0}),BaseToolRenderer.prototype.isNowVisible=function(){var t=this._chart.axisX.getVisibleTimeBars(),e=t[0],r=t[t.length-1],n=o.pluck(this._vertexes,"time");return!(e.time>o.max(n)||r.time<o.min(n))},BaseToolRenderer.prototype.getContext=function(){return!this._isEditing&&this.isFinished()?this._chart.ctx:this._chart.topCtx},BaseToolRenderer.prototype.getCursor=function(){return this._lastCursorPoint=this._chart.hover?this._chart.crosshair.point||this._lastCursorPoint:this._lastCursorPoint},BaseToolRenderer.prototype.addVertex=function(t){this._vertexes.push(t),this._isValid=!1},BaseToolRenderer.prototype.drawVertex=function(){var t=this.getContext(),e=this._chart,r=e.axisX,o=e.axisY,n=this.vertexes;t.strokeStyle="rgba( 128, 128, 128, 1)",t.lineWidth=this._selected?4:2,t.fillStyle="#fff";for(var i=0,a=n.length;i<a;i++)t.beginPath(),t.arc(r.getXByTime(n[i].time),o.getYByValue(n[i].value),5,0,2*Math.PI),t.closePath(),t.fill(),t.stroke()},BaseToolRenderer.prototype.setVertex=function(t,e,r){var o=this._vertexes[t];o.time=e,o.value=r,this._isValid=!1},BaseToolRenderer.prototype.hitTest=function(t){var e=this,r=!1,o=-1,n=this._chart,i=n.crosshair.point;return this._hitVertexIndex=-1,r=this.vertexes.some(function(t,r){return!!e.hitTestVertex(t,i)&&(o=r,!0)}),r?this._hitVertexIndex=o:r=this.hitTestTool(),t?(r&&(n.editingDrawingTool=this),this.selected=r):this.hover=r},BaseToolRenderer.prototype.draw=function(){var t=this.getContext();t.save(),this.drawTool(t),t.restore(),(this._selected||this._hover||!this.isFinished())&&(t.save(),this.drawVertex(),t.restore()),this._isValid=!0},BaseToolRenderer.prototype.moveBy=function(t,e){-1===this.hitVertexIndex?this.moveAsWhole(t,e):this.moveVertex(this._hitVertexIndex,t,e)},BaseToolRenderer.prototype.moveAsWhole=function(t,e){var r=this;this._vertexes.forEach(function(o,n){r.moveVertex(n,t,e)})},BaseToolRenderer.prototype.moveVertex=function(t,e,r){var o=this._chart.datasource,n=this._chart.axisX,i=o.resolution,a=o.first(),s=o.last(),l=o.loaded(),c=this._vertexes[t];if(0!==e||0!==r){var h,u=e,d=c.time,p=o.search(d);if(-1===p)if(d<a.time)if(u>0)for(h=n.getPrevTickTime(a.time,i);u--;)h===d?d=a.time:(d=n.getNextTickTime(d,i))>a.time&&(u<l?(d=o.barAt(u+1).time,u=0):(d=s.time,u-=l));else for(;u++;)d=n.getPrevTickTime(d,i);else if(u>0)for(;u--;)d=n.getNextTickTime(d,i);else for(h=n.getNextTickTime(s.time,i);u++;)h===d?d=s.time:(d=n.getPrevTickTime(d,i))<s.time&&(u>-l?(d=o.barAt(l-2+u).time,u=0):(d=a.time,u+=l));else if(p+u<0)for(d=o.first().time,u+=p;u++;)d=n.getPrevTickTime(d,i);else if(p+u>o.loaded()-1)for(d=o.last().time,u-=o.loaded()-1-p;u--;)d=n.getNextTickTime(d,i);else d=o.barAt(p+u).time;this.setVertex(t,d,c.value+r)}},BaseToolRenderer.prototype.hitTestVertex=function(t,e){var r=this._chart,o=r.axisX,i=r.axisY,a=o.getXByTime(t.time),s=i.getYByValue(t.value);return Math.sqrt(Math.pow(a-e.x,2)+Math.pow(s-e.y,2))<n.HIT_TEST_TOLERANCE},BaseToolRenderer}();e.BaseToolRenderer=i},oVxw:function(t,e,r){"use strict";var o,n=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=r("rdLu"),a=r("Lv/5"),s=r("wRi7"),l=r("Cqed");!function(t){t[t.X=0]="X",t[t.TIME=1]="TIME",t[t.OPEN=2]="OPEN",t[t.CLOSE=3]="CLOSE",t[t.HIGH=4]="HIGH",t[t.LOW=5]="LOW"}(o||(o={}));var c={color:"rgb(215, 84, 66)",colorDown:"rgb(107, 165, 131)"},h=function(t){function CandleChartRenderer(e,r){t.call(this,e,i.defaults(r,c))}return n(CandleChartRenderer,t),CandleChartRenderer.prototype.hitTest=function(){var t=this._plotModel,e=t.graph,r=e.chart,n=r.axisX,i=r.axisY,a=e.isPrice?i.range:e.getRangeY(),c=t.getCurBar();if(!c)return!1;var h=r.crosshair.point,u=~~(.8*n.barWidth+.5)%2==0?~~(.8*n.barWidth+.5)-1:~~(.8*n.barWidth+.5),d=h.x,p=h.y,f=~~c[o.X]-~~(u/2)-l.HIT_TEST_TOLERANCE,m=~~i.getYByValue(c[o.HIGH],a)-l.HIT_TEST_TOLERANCE,y=f+u+l.HIT_TEST_TOLERANCE,g=~~i.getYByValue(c[o.LOW],a)+l.HIT_TEST_TOLERANCE;return s.isPointInRect(d,p,f,m,y,g)},CandleChartRenderer.prototype.calcRangeY=function(){var t=this._plotModel.getVisibleBars();if(!t.length)return null;var e={max:-Number.MAX_VALUE,min:Number.MAX_VALUE};return t.reduce(function(t,e){return e[o.HIGH]>t.max&&(t.max=e[o.HIGH]),e[o.LOW]<t.min&&(t.min=e[o.LOW]),t},e)},CandleChartRenderer.prototype.draw=function(t){var e=this._plotModel,r=e.getVisibleBars();if(r.length){var n=e.graph,i=n.chart,a=i.axisX,s=i.axisY,l=~~(.8*a.barWidth+.5)%2==0?~~(.8*a.barWidth+.5)-1:~~(.8*a.barWidth+.5),c=n.isPrice?s.range:n.getRangeY(),h=r.reduce(function(t,e){return e[o.HIGH]>t?e[o.HIGH]:t},-Number.MAX_VALUE),u=r.reduce(function(t,e){return e[o.LOW]<t?e[o.LOW]:t},Number.MAX_VALUE);e.priceLabels=[{val:h,color:this.style.color},{val:u,color:this.style.colorDown}];var d,p;t.translate(.5,.5),t.lineWidth=1;for(var f=0,m=void 0,y=r.length,g=void 0,_=void 0;f<y;f++)m=r[f],g=m[o.CLOSE]>=m[o.OPEN],_=g?this.style.color:this.style.colorDown,t.strokeStyle="#333333",t.beginPath(),t.moveTo(~~m[o.X],~~s.getYByValue(m[o.HIGH],c)),t.lineTo(~~m[o.X],~~s.getYByValue(m[o.LOW],c)),t.stroke();for(var f=0,m=void 0,y=r.length,g=void 0,_=void 0;f<y;f++)m=r[f],g=m[o.CLOSE]>=m[o.OPEN],_=g?this.style.color:this.style.colorDown,t.strokeStyle="#333333",t.lineWidth=1,t.fillStyle=_,d=~~m[o.X]-(l-1)/2,p=~~s.getYByValue(g?m[o.CLOSE]:m[o.OPEN],c),t.beginPath(),t.moveTo(d,p),t.lineTo(d+l-1,p),p=~~Math.ceil(s.getYByValue(g?m[o.OPEN]:m[o.CLOSE],c)),t.lineTo(d+l-1,p),t.lineTo(d,p),t.closePath(),t.fill(),t.stroke();t.setLineDash([2,4]),t.strokeStyle=this.style.color,t.beginPath(),p=~~s.getYByValue(h,c),t.moveTo(0,p),t.lineTo(a.width,p),t.stroke(),t.strokeStyle=this.style.colorDown,t.beginPath(),p=~~s.getYByValue(u,c),t.moveTo(0,p),t.lineTo(a.width,p),t.stroke()}},CandleChartRenderer.prototype.getSelectionYByBar=function(t){var e=this._plotModel,r=e.graph,n=r.chart,i=n.axisY,a=r.isPrice?i.range:r.getRangeY(),s=t[o.CLOSE],l=t[o.OPEN];return~~i.getYByValue(Math.abs(s-(s-l)/2),a)},CandleChartRenderer}(a.BaseChartRenderer);e.CandleChartRenderer=h},oifU:function(t,e,r){"use strict";var o,n=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=r("Lv/5"),a=r("Cqed"),s=r("wRi7");!function(t){t[t.X=0]="X",t[t.TIME=1]="TIME",t[t.VALUE=2]="VALUE"}(o||(o={}));var l=function(t){function HistogramChartRenderer(e,r){t.call(this,e,r)}return n(HistogramChartRenderer,t),HistogramChartRenderer.prototype.hitTest=function(){var t=this._plotModel,e=t.graph,r=e.chart,n=r.axisX,i=r.axisY,l=e.isPrice?i.range:e.getRangeY(),c=t.getCurBar();if(!c)return!1;var h=r.crosshair.point,u=~~(n.barWidth/2+.5)%2==0?~~(n.barWidth/2+.5)-1:~~(n.barWidth/2+.5),d=this.style,p=d.histogramBase,f=h.x,m=h.y,y=~~c[o.X]-~~(u/2)-a.HIT_TEST_TOLERANCE,g=~~i.getYByValue(c[o.VALUE],l)-a.HIT_TEST_TOLERANCE,_=y+u+a.HIT_TEST_TOLERANCE,v=~~i.getYByValue(p,l)+a.HIT_TEST_TOLERANCE;return s.isPointInRect(f,m,y,g,_,v)},HistogramChartRenderer.prototype.calcRangeY=function(){var t=this._plotModel.getVisibleBars();if(!t.length)return null;var e={max:-Number.MAX_VALUE,min:Number.MAX_VALUE};return t.reduce(function(t,e){var r=e;return r[o.VALUE]<t.min&&(t.min=r[o.VALUE]),r[o.VALUE]>t.max&&(t.max=r[o.VALUE]),t},e)},HistogramChartRenderer.prototype.draw=function(t){var e=this._plotModel,r=e.getVisibleBars();if(r.length)for(var n=e.graph,i=n.chart,a=i.axisY,s=i.axisX,l=~~(s.barWidth/2+.5)%2==0?~~(s.barWidth/2+.5)-1:~~(s.barWidth/2+.5),c=this.style,h=c.histogramBase,u=n.isPrice?a.range:n.getRangeY(),d=~~a.getYByValue(h,u),p=0,f=r.length,m=void 0,y=void 0,g=void 0;p<f;p++)m=r[p],y=~~m[o.X]-~~(l/2),g=~~a.getYByValue(m[o.VALUE],u),t.fillStyle=m[o.VALUE]>h?c.color:c.colorDown,t.fillRect(y,g,l,d-g)},HistogramChartRenderer.prototype.getSelectionYByBar=function(t){var e=this._plotModel,r=e.graph,n=r.chart,i=n.axisY,a=r.isPrice?i.range:r.getRangeY();return i.getYByValue(t[o.VALUE],a)},HistogramChartRenderer}(i.BaseChartRenderer);e.HistogramChartRenderer=l},pUaQ:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("BzvE"),i=r("H9vw"),a=function(t){function PollManager(e,r){void 0===r&&(r=0),t.call(this),this._timers={},this._data={},this._symbolInfo=e,this._tabIndex=r,this.pollStockInfo=this.pollStockInfo.bind(this),this.pollCapitalFlow=this.pollCapitalFlow.bind(this),this.pollIndexesInfo=this.pollIndexesInfo.bind(this),this.pollRealtimeTools=this.pollRealtimeTools.bind(this),this.getNonRealtimeTools=this.getNonRealtimeTools.bind(this),this.getAnalysisData=this.getAnalysisData.bind(this)}return o(PollManager,t),Object.defineProperty(PollManager.prototype,"symbolInfo",{get:function(){return this._symbolInfo},set:function(t){this._symbolInfo=t},enumerable:!0,configurable:!0}),Object.defineProperty(PollManager.prototype,"tabIndex",{set:function(t){if(t!==this._tabIndex){switch(this._tabIndex){case 0:clearTimeout(this._timers.capitalFlowInfo);break;case 1:clearTimeout(this._timers.indexesInfo),clearTimeout(this._timers.realtimeTools),clearTimeout(this._timers.nonrealtimeTools);break;case 2:clearTimeout(this._timers.financingInfo);break;case 3:clearTimeout(this._timers.plates);break;case 4:clearTimeout(this._timers.analysis)}switch(this._tabIndex=t,t){case 0:this._timers.capitalFlowInfo||"stock"===this.symbolInfo.type&&this.pollCapitalFlow();break;case 1:this._timers.indexesInfo||this.pollIndexesInfo(),this._timers.realtimeTools||this.pollRealtimeTools(),this._timers.nonrealtimeTools||this._data.nonRealtimeTools||this.getNonRealtimeTools();break;case 2:"stock"!==this._symbolInfo.type||this._data.financingInfo||this.getFinancingInfo();break;case 3:"stock"!==this._symbolInfo.type||this._data.plates||this.getPlates();break;case 4:this._timers.analysis||this.getAnalysisData()}}},enumerable:!0,configurable:!0}),PollManager.prototype.start=function(){switch(this.pollStockInfo(),this._tabIndex){case 0:"stock"===this.symbolInfo.type&&this.pollCapitalFlow();break;case 1:this.pollIndexesInfo(),this.pollRealtimeTools(),this.getNonRealtimeTools();break;case 2:this.getFinancingInfo();break;case 3:this.getPlates();break;case 4:this.getAnalysisData()}},PollManager.prototype.restart=function(){this.stop(),this.start()},PollManager.prototype.stop=function(){var t=this;Object.keys(this._timers).forEach(function(e){return clearTimeout(t._timers[e])}),this._data={},this._timers={}},PollManager.prototype.pollStockInfo=function(){var t=this;i.getStockInfo(this._symbolInfo.symbol).then(function(e){var r=e.data.stock_info,o={open:r.open,high:r.high,low:r.low,preClose:r.pre_close,price:r.price,changeRate:r.p_change,changePrice:r.price_change,amount:r.amount,volume:r.volume,turnover:r.turnover,amplitude:r.zf,inVol:r.invol,outVol:r.outvol,selling:r.a5_p?[[r.a5_p,r.a5_v],[r.a4_p,r.a4_v],[r.a3_p,r.a3_v],[r.a2_p,r.a2_v],[r.a1_p,r.a1_v]]:null,buying:r.b1_p?[[r.b1_p,r.b1_v],[r.b2_p,r.b2_v],[r.b3_p,r.b3_v],[r.b4_p,r.b4_v],[r.b5_p,r.b5_v]]:null,ticks:e.data.ticks_list};t._data.stockInfo=o,t._timers.stockInfo=e.data.reflush_time?setTimeout(t.pollStockInfo,1e3*e.data.reflush_time):-1,t.emit("data",t._data)}).catch(function(){return t._timers.stockInfo=setTimeout(t.pollStockInfo,1e4)})},PollManager.prototype.pollCapitalFlow=function(){var t=this;if("stock"!==this._symbolInfo.type||0!==this._tabIndex)return void(this._timers.capitalFlowInfo=null);i.getCapitalFlow(this._symbolInfo.symbol).then(function(e){e=e.data;var r=e.map(function(t){return(t.mainIn-t.mainOut)/1e4}).reverse();e=e[0];var o=e.retailIn/1e4,n=e.retailOut/1e4,i=e.mainIn/1e4,a=e.mainOut/1e4,s=[o,i,a,n],l={barChartData:r,donutChartData:s};t._data.capitalFlowInfo=l,t._timers.capitalFlowInfo=setTimeout(t.pollCapitalFlow,18e4),t.emit("data",t._data)}).catch(function(){t._timers.capitalFlowInfo=setTimeout(t.pollCapitalFlow,1e4)})},PollManager.prototype.pollIndexesInfo=function(){var t=this;if(1!==this._tabIndex)return void(this._timers.indexesInfo=null);i.getIndexesInfo().then(function(e){var r=1e3*e.data.intver,o=e.data.list;t._data.indexesInfo=o,t._timers.indexesInfo=r?setTimeout(t.pollIndexesInfo,r):-1,t.emit("data",t._data)}).catch(function(){t._timers.indexesInfo=setTimeout(t.pollIndexesInfo,1e4)})},PollManager.prototype.pollRealtimeTools=function(){var t=this;if(1!==this._tabIndex)return void(this._timers.realtimeTools=null);i.getRealtimeTools().then(function(e){e=e.data;var r=/class='(.*?)'/,o=/>(.*?)</,n=e.zhangdieting.split("/<"),i={hugutong:[o.exec(e.hugutong)[1],r.exec(e.hugutong)[1]],shortTermMove:[o.exec(e.jzjd)[1],r.exec(e.jzjd)[1]],goUpStaying:[o.exec(n[0])[1],r.exec(n[0])[1]],fallStaying:[o.exec(n[1])[1],r.exec(n[1])[1]]};t._data.realtimeTools=i,t._timers.realtimeTools=e.flush_time?setTimeout(t.pollRealtimeTools,1e3*e.flush_time):-1,t.emit("data",t._data)}).catch(function(){t._timers.realtimeTools=setTimeout(t.pollRealtimeTools,1e4)})},PollManager.prototype.getFinancingInfo=function(){var t=this;"stock"===this._symbolInfo.type&&i.getFinancingInfo(this._symbolInfo.symbol).then(function(e){t._data.financingInfo=e.data,t.emit("data",t._data)}).catch(function(){t._timers.financingInfo=setTimeout(t.getFinancingInfo,1e4)})},PollManager.prototype.getPlates=function(){var t=this;"stock"===this._symbolInfo.type&&i.getPlatesBySymbol(this._symbolInfo.symbol).then(function(e){t._data.plates=e.data.bk_list,t.emit("data",t._data)}).catch(function(){t._timers.plates=setTimeout(t.getPlates,1e4)})},PollManager.prototype.getNonRealtimeTools=function(){var t=this;i.getNonrealtimeTools().then(function(e){var r=/class="(.*?)"/,o=/<.*?>/g,n=e.data.pressure_str.split(/\/(?=\<)/),i=e.data.rzInfo_str.split("&nbsp;");e=e.data,t._data.nonRealtimeTools={bankCapital:[e.bankInfo_str.replace(o,""),r.exec(e.bankInfo_str)[1]],stockForumSentiment:e.guba_str.replace(o,""),searchSentiment:e.search_str.replace(o,""),institutionCapital:[e.jgInfo_str.replace(o,""),r.exec(e.jgInfo_str)[1]],investerCapital:[e.zijin_str.replace(o,""),r.exec(e.zijin_str)[1]],tradingInvester:e.jiaoyi_str.replace(o,""),liftBanCapitalisation:e.jiejingInfo_str.replace(o,""),support:n[1].replace(o,""),pressure:n[0].replace(o,""),financingBalance:i[0],financingBalanceChange:[i[1].replace(o,""),r.exec(i[1])[1]],newInvester:e.xinzeng_str.replace(o,"")},t.emit("data",t._data)}).catch(function(){t._timers.nonrealtimeTools=setTimeout(t.getNonRealtimeTools,1e4)})},PollManager.prototype.getAnalysisData=function(){var t=this;if(4!==this._tabIndex)return void(this._timers.analysis=null);i.getAnalysisData(this._symbolInfo.symbol).then(function(e){e=e.data,t._data.analysisData={pressureInfo:e.pressure_info,gapInfo:e.gap_info},t.emit("data",t._data)}).catch(function(){return t._timers.analysis=setTimeout(t.getAnalysisData,1e4)})},PollManager}(n);Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},pip8:function(t,e){},qMEF:function(t,e,r){"use strict";function renderChart(){n.render(o.createElement(i.default,{chartLayout:h},o.createElement(s.default,{symbol:u,defaultSymbol:"sh000001",height:document.documentElement.clientHeight,width:document.documentElement.clientWidth,shape:"candle",resolution:"1"})),c)}r("1z0p"),r("kXGG");var o=r("U7vG"),n=r("O27J"),i=r("CPKi"),a=r("wRi7"),s=r("xlyV"),l=r("NBiX"),c=document.getElementById("chart_container"),h=new l.default,u=a.getParameterByName("symbol")||"sh000001";window.onresize=renderChart,renderChart()},qYPw:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("rdLu"),i=r("H9vw"),a=r("UALi"),s=r("PxPp"),l=function(t){function StudyModel(e,r,o,s,l){var c=this;void 0===o&&(o=!0);var h=i.studyConfig[r],u=e.chartLayout.mainDatasource,d=u.symbol,p=u.resolution,f=u.timeDiff,m=null;switch(r){case"压力支撑":m=new i.PressureSupportDatasource(d,p,f);break;case"inflection":m=new i.InflectionDatasource(d,p,f);break;default:m=e.datasource}l=l||n.pluck(h.plots,"style"),t.call(this,m,e,h.priority,h.isPrice,h.isRemovable,!1,!1,o,l,h.adapter,h.output,s||h.input),this._studyType=r,this._datasourceType=h.datasourceType,this._inputLabels=h.inputLabels||[],this._noLegend=!!h.noLegend,h.plots.forEach(function(t,e){c._plots.push(new a.default(c,e,t.shape,n.extend({},t.style,l?l[e]:{})))})}return o(StudyModel,t),Object.defineProperty(StudyModel.prototype,"noLegend",{get:function(){return this._noLegend},enumerable:!0,configurable:!0}),Object.defineProperty(StudyModel.prototype,"studyType",{get:function(){return this._studyType},enumerable:!0,configurable:!0}),Object.defineProperty(StudyModel.prototype,"datasourceType",{get:function(){return this._datasourceType},enumerable:!0,configurable:!0}),Object.defineProperty(StudyModel.prototype,"inputLabels",{get:function(){return this._inputLabels},enumerable:!0,configurable:!0}),StudyModel}(s.default);Object.defineProperty(e,"__esModule",{value:!0}),e.default=l},qbbe:function(t,e,r){"use strict";var o,n=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=r("rdLu"),a=r("Lv/5"),s=r("Cqed"),l=r("wRi7");!function(t){t[t.X=0]="X",t[t.TIME=1]="TIME",t[t.VALUE=2]="VALUE"}(o||(o={}));var c={color:"rgba( 60, 120, 216, 1)",lineWidth:1},h=function(t){function LineChartRenderer(e,r){t.call(this,e,i.defaults(r,c))}return n(LineChartRenderer,t),LineChartRenderer.prototype.hitTest=function(){var t=this._plotModel,e=t.graph,r=e.chart,n=r.axisY,i=e.isPrice?n.range:e.getRangeY(),a=t.getCurBar(),c=t.getPrevBar(),h=t.getNextBar();if(!a||a&&0===a[o.VALUE])return!1;var u=r.crosshair.point,d=u.x,p=u.y,f=c?c[o.X]:0,m=c?~~n.getYByValue(c[o.VALUE],i):0,y=a[o.X],g=~~n.getYByValue(a[o.VALUE],i),_=h?h[o.X]:0,v=h?~~n.getYByValue(h[o.VALUE],i):0,b=Number.MAX_VALUE,E=Number.MAX_VALUE;return c&&(b=l.pointToSegDist(d,p,f,m,y,g)),h&&(E=l.pointToSegDist(d,p,y,g,_,v)),b<s.HIT_TEST_TOLERANCE||E<s.HIT_TEST_TOLERANCE},LineChartRenderer.prototype.calcRangeY=function(){var t=this._plotModel.getVisibleBars();if(!t.length)return null;var e={max:-Number.MAX_VALUE,min:Number.MAX_VALUE};e=t.reduce(function(t,e){return e[o.VALUE]>t.max&&(t.max=e[o.VALUE]),e[o.VALUE]<t.min&&(t.min=e[o.VALUE]),t},e);var r=(e.max-e.min)/e.max;return r<.02&&(e.max+=(.02-r)*e.max,e.min-=(.02-r)*e.max),e},LineChartRenderer.prototype.draw=function(t){var e=this._plotModel,r=e.getVisibleBars();if(r.length){var n=e.graph,i=n.chart,a=i.axisY,s=n.isPrice?a.range:n.getRangeY();t.strokeStyle=this.style.color,t.lineWidth=this.style.lineWidth,t.beginPath();for(var l=0,c=void 0,h=void 0,u=void 0,d=!1,p=r.length;l<p;l++)u=r[l],c=u[o.X],h=~~a.getYByValue(u[o.VALUE],s),0!==u[o.VALUE]&&(d?t.lineTo(c,h):(t.moveTo(c,h),d=!0));t.stroke()}},LineChartRenderer.prototype.getSelectionYByBar=function(t){var e=this._plotModel,r=e.graph,n=r.chart,i=n.axisY,a=r.isPrice?i.range:r.getRangeY();return~~i.getYByValue(t[o.VALUE],a)},LineChartRenderer}(a.BaseChartRenderer);e.LineChartRenderer=h},rBAp:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("Vq7t");var n=r("U7vG"),i=r("rdLu"),a=r("NBiX"),s=["不复权","前复权"],l=[0,1],c=function(t){function RightOption(e,r){t.call(this,e,r),this._chartLayout=r.chartLayout,this.updateView=this.updateView.bind(this),this.rightSelectHandler=this.rightSelectHandler.bind(this)}return o(RightOption,t),RightOption.prototype.shouldComponentUpdate=function(t){return!i.isEqual(this.props,t)},RightOption.prototype.componentDidMount=function(){this._chartLayout.addListener("right_change",this.updateView)},RightOption.prototype.componentWillUnmount=function(){this._chartLayout.removeListener("right_change",this.updateView)},RightOption.prototype.render=function(){var t=this._chartLayout.mainDatasource.right;return n.createElement("div",{className:"chart-btn-group",onClick:this.rightSelectHandler},l.map(function(e,r){var o="btn";return t===e&&(o+=" active"),n.createElement("button",{key:e,className:o,value:e},s[r])}))},RightOption.prototype.updateView=function(){this.forceUpdate()},RightOption.prototype.rightSelectHandler=function(t){var e=+t.target.value;this._chartLayout.mainDatasource.right!==e&&this.props.onRightChange(e)},RightOption.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},RightOption}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=c},rBG8:function(t,e){},rdZE:function(t,e){},svHs:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("mrgO"),r("bpF5");var n=r("U7vG"),i=r("rdLu"),a=r("bHfy"),s=r("wRi7"),l=r("NBiX"),c=r("H9vw"),h=function(t){function SelfSelectStock(e,r){t.call(this,e,r),this.state={sortKey:"zdf",order:"desc"},this._chartLayout=r.chartLayout,this.loadStocks=this.loadStocks.bind(this),this.sortHandler=this.sortHandler.bind(this),this.setSymbolHandler=this.setSymbolHandler.bind(this)}return o(SelfSelectStock,t),SelfSelectStock.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.state,e)},SelfSelectStock.prototype.componentDidMount=function(){this._isMounted=!0,this._wrapperScroller=new a(this.refs.wrapper,{scrollbars:!0,hScrollbar:!0,scrollX:!0,scrollY:!1,eventPassthrough:!0,fadeScrollbars:!0}),this._scroller=new a(this.refs.body,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0}),this._chartLayout.addListener("self_select_add",this.loadStocks),this._chartLayout.addListener("self_select_delete",this.loadStocks),this.loadStocks(this.state.sortKey,this.state.order)},SelfSelectStock.prototype.componentWillReceiveProps=function(t){t.width!==this.props.width&&(this._wrapperScroller.refresh(),this._scroller.refresh())},SelfSelectStock.prototype.componentDidUpdate=function(){this._scroller.refresh()},SelfSelectStock.prototype.componentWillUnmount=function(){this._isMounted=!1,this._wrapperScroller.destroy(),this._scroller.destroy(),this._chartLayout.removeListener("self_select_add",this.loadStocks),this._chartLayout.removeListener("self_select_delete",this.loadStocks),clearTimeout(this._pollStocksTimer)},SelfSelectStock.prototype.render=function(){var t=this,e=this.state.stocks;return n.createElement("div",{className:"chart-self-select",ref:"wrapper"},n.createElement("div",{className:"wrapper"},n.createElement("table",{className:"header s-table top-header"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"18%"},"股票"),n.createElement("th",{width:"14%","data-key":"price",onClick:this.sortHandler},"最新价","price"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"14%","data-key":"zdf",onClick:this.sortHandler},"涨跌幅","zdf"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"16%","data-key":"sz",onClick:this.sortHandler},"总市值","sz"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"20%","data-key":"lt_sz",onClick:this.sortHandler},"实际流通市值","lt_sz"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":""),n.createElement("th",{width:"18%","data-key":"hy",onClick:this.sortHandler},"所属行业","hy"===this.state.sortKey?"desc"===this.state.order?"↑":"↓":"")))),n.createElement("div",{className:"body",ref:"body"},n.createElement("table",{className:"s-table stripe even top-header"},n.createElement("tbody",null,e&&e.map(function(e,r){return n.createElement("tr",{key:r,"data-symbol":e.code,onClick:t.setSymbolHandler},n.createElement("td",{width:"18%"},e.name),n.createElement("td",{width:"14%"},(+e.price).toFixed(2)),n.createElement("td",{width:"14%"},(100*e.zdf).toFixed(2),"%"),n.createElement("td",{width:"16%"},"--"!==e.sz?s.formatNumber(+e.sz,2):"--"),n.createElement("td",{width:"20%"},"--"!==e.lt_sz?s.formatNumber(+e.lt_sz,2):"--"),n.createElement("td",{width:"18%"},e.hy))}))))))},SelfSelectStock.prototype.loadStocks=function(t,e){var r=this,o=i.pluck(this._chartLayout.readFromLS("qchart.selfselectlist")||[],"symbol");c.getStockListByCodes(o,t,e).then(function(o){if(r._isMounted){var n=1e3*o.data.intver;r.setState({sortKey:t,order:e,stocks:o.data.list}),r._pollStocksTimer=n?setTimeout(function(){return r.loadStocks},n):-1}}).catch(function(t){return r._pollStocksTimer=setTimeout(function(){return r.loadStocks},1e4)})},SelfSelectStock.prototype.sortHandler=function(t){var e=t.target.dataset.key,r="desc";e===this.state.sortKey&&(r="desc"===this.state.order?"asc":"desc"),this.loadStocks(e,r)},SelfSelectStock.prototype.setSymbolHandler=function(t){this.context.chartLayout.setSymbol(t.currentTarget.dataset.symbol)},SelfSelectStock.contextTypes={chartLayout:n.PropTypes.instanceOf(l.default)},SelfSelectStock}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=h},"tF+H":function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("PJh5"),i=r("uRx8"),a=r("+d7d"),s=r("H9vw"),l=function(t){function InflectionDatasource(e,r,o){void 0===o&&(o=0),t.call(this,r,o),this._symbol=e,this._plotList=new a.default}return o(InflectionDatasource,t),Object.defineProperty(InflectionDatasource.prototype,"symbol",{get:function(){return this._symbol},set:function(t){this._symbol=t},enumerable:!0,configurable:!0}),InflectionDatasource.prototype.barAt=function(t){return this._plotList.get(t)},InflectionDatasource.prototype.first=function(){return this._plotList.first()},InflectionDatasource.prototype.last=function(){return this._plotList.last()},InflectionDatasource.prototype.slice=function(t,e){return this._plotList.slice(t,e)},InflectionDatasource.prototype.range=function(t,e){return this._plotList.range(t,e)},InflectionDatasource.prototype.loaded=function(){return this._plotList.size()},InflectionDatasource.prototype.search=function(t){return this._plotList.search(t)},InflectionDatasource.prototype.loadTimeRange=function(t,e){var r=this,o=this._symbol,a=this._resolution;if(t>e)return Promise.resolve([]);var s=n(1e3*t).format("YYYYMMDD"),l=n(1e3*e).format("YYYYMMDD");return new Promise(function(t,e){return i.getInflectionData(o,s,l).then(function(i){var s=[];i.data.shape_list.forEach(function(t){return s.push({time:~~(n(t.day).toDate().getTime()/1e3),type:t.shape_detail.val,val:t.shape_detail.y,prob:t.shape_detail.prob})}),o.toUpperCase()===r._symbol.toUpperCase()&&a===r._resolution?(r._plotList.merge(s),t(s)):e("response expired")}).catch(e)})},InflectionDatasource.prototype.clearCache=function(){t.prototype.clearCache.call(this),this._plotList.clear()},InflectionDatasource}(s.Datasource);e.InflectionDatasource=l},tSRr:function(t,e){},tc6X:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("PJh5"),i=r("uRx8"),a=r("+d7d"),s=r("Cqed"),l=r("9FmA"),c=function(t){function PressureSupportDatasource(e,r,o){void 0===o&&(o=0),t.call(this,r,o),this._symbol=e,this._plotList=new a.default}return o(PressureSupportDatasource,t),Object.defineProperty(PressureSupportDatasource.prototype,"symbol",{get:function(){return this._symbol},set:function(t){this._symbol=t},enumerable:!0,configurable:!0}),PressureSupportDatasource.prototype.barAt=function(t){return this._plotList.get(t)},PressureSupportDatasource.prototype.first=function(){return this._plotList.first()},PressureSupportDatasource.prototype.last=function(){return this._plotList.last()},PressureSupportDatasource.prototype.slice=function(t,e){return this._plotList.slice(t,e)},PressureSupportDatasource.prototype.range=function(t,e){return this._plotList.range(t,e)},PressureSupportDatasource.prototype.loaded=function(){return this._plotList.size()},PressureSupportDatasource.prototype.search=function(t){return this._plotList.search(t)},PressureSupportDatasource.prototype.max=function(t,e){void 0===e&&(e=this.loaded());var r=this.slice(t,e),o=-Number.MAX_VALUE;return r.forEach(function(t){return o=t.pressure>o?t.pressure:o}),o},PressureSupportDatasource.prototype.min=function(t,e){void 0===e&&(e=this.loaded());var r=this.slice(t,e),o=Number.MAX_VALUE;return r.forEach(function(t){return o=t.support<o?t.support:o}),o},PressureSupportDatasource.prototype.loadTimeRange=function(t,e){var r=this,o=this._symbol,a=this._resolution;if(t>e)return Promise.resolve([]);var l=n(1e3*t).format("YYYYMMDD"),c=n(1e3*e).format("YYYYMMDD");return new Promise(function(t,e){return i.getPressureSupport(o,l,c).then(function(i){var l=[];if("D"===a)l=i.data.map(function(t){return{time:+t.timestamp,pressure:+t.upper_price,support:+t.lower_price}});else{var c,h,u=s.OPEN_TIME_RANGE.map(function(t){return t[1]}),d=s.OPEN_TIME_RANGE.map(function(t){return t[0]}),p=null;switch(r._resolution){case"1":p=1;break;case"5":p=5;break;case"15":p=15;break;case"30":p=30;break;case"60":p=60;break;default:throw"unsupported resolution"}i.data.forEach(function(t){u.forEach(function(e,r){var o=e[0],i=e[1],a=d[r][0],s=d[r][1],u=n(1e3*(+t.timestamp+3600*o+60*i)),f=n(1e3*(+t.timestamp+3600*a+60*s));for(c=+t.upper_price>0?+t.upper_price:c,h=+t.lower_price>0?+t.lower_price:h;!f.add(p,"minute").isAfter(u);)l.push({time:f.toDate().getTime()/1e3,pressure:c,support:h})})})}o.toUpperCase()===r._symbol.toUpperCase()&&a===r._resolution?(r._plotList.merge(l),t(l)):e("response expired")}).catch(e)})},PressureSupportDatasource.prototype.clearCache=function(){t.prototype.clearCache.call(this),this._plotList.clear()},PressureSupportDatasource}(l.Datasource);e.PressureSupportDatasource=c},tub9:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=r("rdLu"),i=r("EVIZ"),a=["rgba( 60, 120, 216, 1)","rgba(102, 255, 153, .5)"],s=[[8,8],[]],l=function(t){function ShapePatternRenderer(e,r,o){t.call(this,e),this._points=r,this._trendLines=o}return o(ShapePatternRenderer,t),ShapePatternRenderer.prototype.draw=function(t){var e,r,o,n=this._points||[],i=this._trendLines||[],l=this._chart,c=l.datasource,h=l.axisX,u=l.axisY,d=h.getVisibleTimeBars(),p=d[0],f=d[d.length-1],m=c.first(),y=c.last(),g=n.length,_=null;t.save(),t.lineWidth=3,t.setLineDash([8,8]),t.strokeStyle="rgba( 60, 120, 216, 1)",t.beginPath(),g&&(_=n[0],r=~~h.getXByTime(_.time),o=~~u.getYByValue(_.value),t.moveTo(r,o));for(var v=1;v<g;v++)_=n[v],r=~~h.getXByTime(_.time),o=~~u.getYByValue(_.value),t.lineTo(r,o);t.stroke(),t.lineWidth=3,g=i.length;for(var v=0,b=void 0,E=void 0;v<g;v++)t.beginPath(),t.strokeStyle=a[~~(v/2)],t.setLineDash(s[~~(v/2)]),e=i[v],b=c.search(e[1].time)-c.search(e[0].time),E=(e[1].value-e[0].value)/b,p.time<e[0].time&&(b=p.time<m.time?h.search(m.time)+c.search(e[0].time):c.search(e[0].time)-c.search(p.time),r=p.x,o=~~u.getYByValue(e[0].value-b*E),t.moveTo(r,o)),r=~~h.getXByTime(e[0].time),o=~~u.getYByValue(e[0].value),t.lineTo(r,o),r=~~h.getXByTime(e[1].time),o=~~u.getYByValue(e[1].value),t.lineTo(r,o),f.time>e[1].time&&(b=f.time>y.time?d.length-1-h.search(y.time)+c.search(y.time)-c.search(e[1].time):c.search(f.time)-c.search(e[1].time),r=f.x,o=~~u.getYByValue(e[1].value+b*E),t.lineTo(r,o)),t.stroke();t.restore()},ShapePatternRenderer.prototype.hitTest=function(){return!1},ShapePatternRenderer.prototype.isNowVisible=function(){var t=this._chart.axisX.getVisibleTimeBars(),e=t[0],r=t[t.length-1],o=this._points||[],i=this._trendLines||[],a=n.pluck(i.reduce(function(t,e){return t.push(e[0]),t.push(e[1]),t},[]).concat(o),"time");return!(e.time>n.max(a)||r.time<n.min(a))},ShapePatternRenderer}(i.BasePatternRenderer);e.ShapePatternRenderer=l},u75s:function(t,e){},uRx8:function(t,e,r){"use strict";function getStockBars(t,e,r,o,i){return fetch(n+"/chart/history?symbol="+t+"&resolution="+e+"&fq="+r+"&from="+o+"&to="+i).then(function(t){return t.json()})}function resolveSymbol(t){return fetch(n+"/chart/symbols?symbol="+t).then(function(t){return t.json()})}function searchSymbols(t){return fetch(n+"/chart/search?query="+t+"&limit=15&type=&exchange=").then(function(t){return t.json()})}function getServerTime(){return fetch(n+"/chart/time").then(function(t){return t.text()})}function getStockInfo(t){return fetch(n+"/chart/stock/info?code="+t.toLowerCase()+"&ticks_time=0").then(function(t){return t.json()})}function getCapitalFlow(t){return fetch(o+"/stock/moneyflow?code="+t).then(function(t){return t.json()})}function getIndexesInfo(){return fetch(o+"/chart/index/list").then(function(t){return t.json()})}function getRealtimeTools(){return fetch(n+"/chart/stock/realtimetool").then(function(t){return t.json()})}function getFinancingInfo(t){return fetch(n+"/chart/stock/finance?code="+t).then(function(t){return t.json()})}function getPlatesBySymbol(t){return fetch(o+"/chart/bankuai/bystock?code="+t).then(function(t){return t.json()})}function getAllPlates(t,e,r,n){return fetch(o+"/chart/bankuai/list?key="+t+"&sort="+e+"&start="+r+"&count="+n).then(function(t){return t.json()})}function getStockListByPlateId(t){return fetch(o+"/chart/bankuai/stocklist?bk_id="+t).then(function(t){return t.json()})}function getStockListByCodes(t,e,r){return fetch(o+"/chart/stock/zixuan?code_list="+t.join(",")+"&key="+e+"&sort="+r).then(function(t){return t.json()})}function getStockListByIndexId(t){return fetch(o+"/chart/index/stocks?index_id="+t).then(function(t){return t.json()})}function getNonrealtimeTools(){return fetch(n+"/chart/stock/nonrealtime").then(function(t){return t.json()})}function getPatterns(t){return fetch(o+"/chart/common/shape?code="+t+"&type=wave,mhead,whead,hsp,hsb,triangle,dtd").then(function(t){return t.json()})}function getPressureSupport(t,e,r){return fetch(o+"/chart/common/pressure?code="+t+"&from_date="+e+"&to_date="+r).then(function(t){return t.json()})}function getInflectionData(t,e,r){return fetch(o+"/chart/common/shapebytype?code="+t+"&from_date="+e+"&to_date="+r+"&type=gd_v2").then(function(t){return t.json()})}function getAnalysisData(t){return fetch(o+"/chart/common/analytics?code="+t).then(function(t){return t.json()})}r("hKoQ").polyfill(),r("j9g7");var o="http://api.quchaogu.com",n="http://www.quchaogu.com";e.getStockBars=getStockBars,e.resolveSymbol=resolveSymbol,e.searchSymbols=searchSymbols,e.getServerTime=getServerTime,e.getStockInfo=getStockInfo,e.getCapitalFlow=getCapitalFlow,e.getIndexesInfo=getIndexesInfo,e.getRealtimeTools=getRealtimeTools,e.getFinancingInfo=getFinancingInfo,e.getPlatesBySymbol=getPlatesBySymbol,e.getAllPlates=getAllPlates,e.getStockListByPlateId=getStockListByPlateId,e.getStockListByCodes=getStockListByCodes,e.getStockListByIndexId=getStockListByIndexId,e.getNonrealtimeTools=getNonrealtimeTools,e.getPatterns=getPatterns,e.getPressureSupport=getPressureSupport,e.getInflectionData=getInflectionData,e.getAnalysisData=getAnalysisData},uYdA:function(t,e,r){"use strict";e.AXIS_X_HEIGHT=30,e.AXIS_Y_WIDTH=60,e.NAVBAR_HEIGHT=35,e.CONTROL_BAR_HEIGHT=22,e.HIT_TEST_TOLERANCE="ontouchstart"in document?12:4,e.SIDEBAR_WIDTH=314,e.SIDEBAR_FOLD_WIDTH=45,e.FOOTER_PANEL_HEIGHT=30,e.FOOTER_PANEL_UNFOLD_HEIGHT=320,e.TOOLBOX_WIDTH=52},ulXj:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("PjwK"),r("Vq7t"),r("unwN");var n=r("U7vG"),i=r("rdLu"),a=r("NBiX"),s=r("pUaQ"),l=r("PcI6"),c=r("nyAH"),h=r("Htct"),u=r("yk63"),d=r("HuvF"),p=r("GKYn"),f=["实时看盘","大盘概况","财务信息","所属板块","分析功能"],m=[n.createElement("svg",{viewBox:"0 0 20 20"},n.createElement("g",null,n.createElement("path",{d:"M10,4c-6,0-9,6-9,6s3,6,9,6s9-6,9-6S16,4,10,4z M10,14.5c-2.5,0-4.5-2-4.5-4.5s2-4.5,4.5-4.5s4.5,2,4.5,4.5S12.5,14.5,10,14.5z"}),n.createElement("path",{d:"M12,9c-0.6,0-1-0.4-1-1c0-0.3,0.1-0.5,0.3-0.7C10.9,7.1,10.5,7,10,7c-1.7,0-3,1.3-3,3c0,0.3,0,0.6,0.1,0.9C7.4,10.4,7.9,10,8.5,10c0.8,0,1.5,0.7,1.5,1.5c0,0.6-0.4,1.1-0.9,1.4C9.4,13,9.7,13,10,13c1.7,0,3-1.3,3-3c0-0.5-0.1-0.9-0.3-1.3C12.5,8.9,12.3,9,12,9z"}))),n.createElement("svg",{viewBox:"0 0 20 20"},n.createElement("g",null,n.createElement("path",{d:"M16.7,2.7h1.8v14.1h-1.8V2.7z M13.1,3.2l-0.2,0.1c-0.3,0.1-0.7,0-0.8-0.3c-0.1-0.1-0.1-0.3,0-0.4c0.1-0.1,0.2-0.3,0.4-0.3l2.8-0.9l0.3,2.5c0,0.1,0,0.3-0.1,0.4c-0.1,0.1-0.3,0.2-0.5,0.2c0,0,0,0-0.1,0c-0.3,0-0.6-0.2-0.6-0.5l0-0.4c-3.2,4.4-10.6,9.2-10.9,9.4c-0.1,0.1-0.2,0.1-0.4,0.1c-0.2,0-0.4-0.1-0.5-0.2c-0.1-0.1-0.2-0.2-0.1-0.4c0-0.1,0.1-0.3,0.2-0.4C2.7,12.2,10,7.5,13.1,3.2z M15.2,5.9v11h-1.8v-11H15.2z M12.1,9.1v7.7h-1.8V9.1H12.1z M8.9,12.5v4.3H7.1v-4.3H8.9z M5.5,14.2v2.6H3.7v-2.6H5.5z M19,18.5H1v-1.3h18L19,18.5L19,18.5z"}))),n.createElement("svg",{viewBox:"0 0 20 20"},n.createElement("g",null,n.createElement("path",{d:"M14.3,5.9l3.8,1l1-3.8l-0.7-0.2l-0.6,2.4C16.1,2.7,13.2,1,10,1c-5,0-9,4-9,9s4,9,9,9c3.3,0,6.2-1.8,7.8-4.5l-0.7-0.4c-1.4,2.4-4.1,4.1-7.1,4.1c-4.6,0-8.3-3.7-8.3-8.3S5.4,1.7,10,1.7c3.1,0,5.7,1.7,7.2,4.1l-2.7-0.7L14.3,5.9z"}),n.createElement("path",{d:"M10.4,14v-0.7c0.7,0,1.1-0.2,1.5-0.6c0.4-0.3,0.6-0.8,0.6-1.3c0-0.6-0.2-1-0.5-1.3c-0.3-0.3-0.8-0.5-1.6-0.7h0V7.7c0.5,0.1,0.9,0.2,1.3,0.5l0.6-0.8c-0.6-0.4-1.3-0.7-2-0.7V6.2H9.8v0.5c-0.6,0-1.1,0.2-1.5,0.6C8,7.6,7.8,8.1,7.8,8.6c0,0.5,0.2,1,0.5,1.2c0.3,0.3,0.8,0.5,1.5,0.7v1.8c-0.5-0.1-1.1-0.3-1.6-0.8l-0.7,0.8c0.7,0.6,1.5,1,2.3,1V14L10.4,14L10.4,14zM10.4,10.7c0.4,0.1,0.6,0.2,0.8,0.3c0.1,0.2,0.2,0.3,0.2,0.5s-0.1,0.4-0.3,0.5c-0.2,0.2-0.4,0.2-0.7,0.3V10.7z M9.1,9C9,8.9,8.9,8.7,8.9,8.5C8.9,8.3,9,8.1,9.1,8c0.2-0.2,0.4-0.2,0.7-0.3v1.6C9.4,9.3,9.2,9.1,9.1,9z"}))),n.createElement("svg",{viewBox:"0 0 20 20"},n.createElement("g",null,n.createElement("path",{d:"M10.6,10.7H1c0,4.1,4.2,8.4,9,8.4c5,0,9-4,9-9c0-1.4-0.3-2.8-0.9-4L10.6,10.7z"}),n.createElement("path",{d:"M6.3,1.6c0.1,0.2,4.2,7.2,4.2,7.2l6.9-4C15,1.2,10.3-0.1,6.3,1.6z M15.3,4.5l-4.2,2.4c-0.9-1.5-1.9-3.3-2.6-4.5C9,2.3,9.5,2.3,10,2.3C12,2.3,13.9,3.1,15.3,4.5z"}),n.createElement("path",{d:"M5,2.4C2.6,4,1.2,6.6,1,9.3l8,0L5,2.4z M4.6,4.5l1.9,3.3l-3.9,0C3,6.6,3.7,5.5,4.6,4.5z"}))),n.createElement("svg",{viewBox:"0 0 18 17.88"},n.createElement("g",null,n.createElement("path",{d:"M15.74,10.51A7.12,7.12,0,0,1,2.46,12.2a2.74,2.74,0,0,1-.75.12A2.75,2.75,0,0,1,.39,12a8.93,8.93,0,0,0,17.22-1.63,2.61,2.61,0,0,1-1.87.17Z"}),n.createElement("path",{d:"M2,6.8A7.12,7.12,0,0,1,15,5.47a2.55,2.55,0,0,1,1.84-.36A8.93,8.93,0,0,0,0,7.37a2.75,2.75,0,0,1,1.71-.61Z"}),n.createElement("path",{d:"M1.71,11.11a1.56,1.56,0,0,0,1.3-.7H5.84L7,13.73a.91.91,0,0,0,.81.6h0a.9.9,0,0,0,.82-.53l2.87-6.24.45.72a.88.88,0,0,0,.78.42h2.3a1.57,1.57,0,1,0,.1-1.81H13.3L12.23,5.18a.91.91,0,0,0-1.59.1L8,11,7.33,9.19a.91.91,0,0,0-.85-.6H2.95a1.56,1.56,0,1,0-1.24,2.51Z"})))],y=function(t){function Sidebar(e,r){t.call(this,e,r),this._data={},this._chartLayout=r.chartLayout,this.state={popUpOprList:!1},this.onDataHandler=this.onDataHandler.bind(this),this.switchTabPage=this.switchTabPage.bind(this),this.symbolChangeHandler=this.symbolChangeHandler.bind(this),this.foldingBtnClickHandler=this.foldingBtnClickHandler.bind(this),this.showMoreOprHandler=this.showMoreOprHandler.bind(this),this.clickOprHandler=this.clickOprHandler.bind(this),this.hideOprListHandler=this.hideOprListHandler.bind(this)}return o(Sidebar,t),Sidebar.prototype.shouldComponentUpdate=function(t,e){return!i.isEqual(this.props,t)||!i.isEqual(this.state,e)},Sidebar.prototype.componentDidMount=function(){var t=this._chartLayout,e=t.mainDatasource.symbolInfo;this._pollManager=new s.default(e,this.props.activeIndex),this._pollManager.addListener("data",this.onDataHandler),t.addListener("symbol_change",this.symbolChangeHandler),document.addEventListener("mousedown",this.hideOprListHandler),document.addEventListener("touchstart",this.hideOprListHandler),this._pollManager.start()},Sidebar.prototype.componentWillUnmount=function(){var t=this._chartLayout;this._pollManager.removeListener("data",this.onDataHandler),t.removeListener("symbol_change",this.symbolChangeHandler),document.removeEventListener("mousedown",this.hideOprListHandler),document.removeEventListener("touchstart",this.hideOprListHandler),this._pollManager.stop(),this._pollManager=null},Sidebar.prototype.componentWillReceiveProps=function(t){var e=this._chartLayout,r=t.activeIndex;t.folded||this.props.activeIndex===r||(this._pollManager.tabIndex=r),t.folded&&e.saveToLS("qchart.sidebar.folded",!1),e.saveToLS("qchart.sidebar.activeIndex",r)},Sidebar.prototype.render=function(){var t=this,e=this._chartLayout,r=this.props.height-44,o=this._data,i=o.stockInfo,a=o.capitalFlowInfo,s=o.realtimeTools,y=o.indexesInfo,g=o.financingInfo,_=o.plates,v=o.nonRealtimeTools,b=o.analysisData,E=null;switch(this.props.activeIndex){case 0:E=i?n.createElement(l.default,{stockInfo:i,capitalFlowInfo:a,height:r}):null;break;case 1:E=s&&y?n.createElement(c.default,{height:r,realtimeTools:s,indexesInfo:y,nonRealtimeTools:v}):null;break;case 2:E=n.createElement(h.default,{height:r,financingInfo:g});break;case 3:E=n.createElement(u.default,{height:r,plates:_});break;case 4:E=n.createElement(p.default,{height:r,stockInfo:i,analysisData:b})}return n.createElement("div",{className:"chart-sidebar "+(this.props.folded?"folded":""),style:{height:this.props.height,width:this.props.width}},!this.props.folded&&i?n.createElement(d.default,{symbolInfo:e.mainDatasource.symbolInfo,stockInfo:i}):null,n.createElement("div",{className:"data-window-tabs"},n.createElement("ul",{className:"tab-list"},n.createElement("a",{href:"javascript:;",className:"btn btn-more",onClick:this.showMoreOprHandler},n.createElement("i",null)),this.state.popUpOprList?n.createElement("ul",{className:"popup-menu",onMouseDown:this.clickOprHandler,onTouchStart:this.clickOprHandler},this.state.isSymbolAdded?n.createElement("li",{"data-opr":"delete-self-select"},"删除自选股"):n.createElement("li",{"data-opr":"add-self-select"},"加入自选股")):null,f.map(function(e,r){return n.createElement("li",{key:r,className:t.props.folded||t.props.activeIndex!==r?"":"active",title:e,"data-index":r,onClick:t.switchTabPage},m[r])})),n.createElement("div",{className:"data-page-list"},!this.props.folded&&E?E:null)),n.createElement("a",{href:"javascript:;",className:"sidebar-folding-btn "+(this.props.folded?"folded":""),onClick:this.foldingBtnClickHandler},n.createElement("span",null)))},Sidebar.prototype.onDataHandler=function(t){this._data=t,this.forceUpdate()},Sidebar.prototype.foldingBtnClickHandler=function(){var t=this._chartLayout,e=!this.props.folded;t.saveToLS("qchart.sidebar.folded",e),this.props.onChange&&this.props.onChange(e,this.props.activeIndex)},Sidebar.prototype.showMoreOprHandler=function(){var t=this._chartLayout,e=t.mainDatasource.symbolInfo,r=t.readFromLS("qchart.selfselectlist")||[];this.setState({popUpOprList:!0,isSymbolAdded:-1!==i.findIndex(r,{symbol:e.symbol})})},Sidebar.prototype.hideOprListHandler=function(t){this.state.popUpOprList&&(t.touches&&t.preventDefault(),this.setState({popUpOprList:!1}))},Sidebar.prototype.clickOprHandler=function(t){var e=t.target.dataset.opr,r=this._chartLayout,o=r.mainDatasource.symbolInfo;"add-self-select"===e?r.addSelfSelect(o):"delete-self-select"===e&&r.deleteSelfSelect(o)},Sidebar.prototype.switchTabPage=function(t){var e=+t.currentTarget.dataset.index;if(!this.props.folded&&this.props.activeIndex===e)return void this.foldingBtnClickHandler();this.props.onChange&&this.props.onChange(!1,e)},Sidebar.prototype.symbolChangeHandler=function(t){this._pollManager.symbolInfo=t,this._pollManager.restart()},Sidebar.contextTypes={chartLayout:n.PropTypes.instanceOf(a.default)},Sidebar}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=y},un2I:function(t,e){},unwN:function(t,e){},vReJ:function(t,e,r){"use strict";var o=function(){function AxisYRenderer(t){this._axis=t}return AxisYRenderer.prototype.draw=function(){var t=this._axis,e=t.chart,r=t.ctx,o=t.width,n=t.height,i=t,a=t.crosshair.point,s=t.crosshair.chart.hover;r.strokeStyle="#999999",r.lineWidth=1,r.translate(.5,.5),r.beginPath(),r.moveTo(0,0),r.lineTo(0,n),r.font="10px ans-serif",r.fillStyle="#999999",r.textAlign="left";for(var l=i.tickmark.getTickMarksByTimeBars(),c=0,h=l.length;c<h;c++){var u=l[c];r.moveTo(0,~~u.y),r.lineTo(5,~~u.y),r.fillText(u.value.toFixed(2).toString(),10,u.y+4)}if(r.closePath(),r.stroke(),e.datasource.resolution>"1"&&e.graphs.forEach(function(e){return e.plots.forEach(function(e){return e.priceLabels.forEach(function(e){var n=~~t.getYByValue(e.val);r.fillStyle=e.color,r.fillRect(0,n-6-4,o+8,20),r.fillStyle="#ffffff",r.fillText(e.val.toFixed(2).toString(),10,n+4)})})}),a&&s&&t.range){var d=a.y;r.fillStyle="#333333",r.fillRect(0,d-6-4,o+8,20),r.fillStyle="#999999",r.fillText(t.getValueByY(d).toFixed(2).toString(),10,~~(d+4))}},AxisYRenderer}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},wRi7:function(t,e,r){"use strict";function cloneObj(t){return JSON.parse(JSON.stringify(t))}function getParameterByName(t){var e=RegExp("[?&]"+t+"=([^&]*)").exec(window.location.search);return e&&decodeURIComponent(e[1].replace(/\+/g," "))}function darkenRGB(t){var e=t.match(/\((.*?)\)/);if(!e)throw new Error("rgbColor is not a valid rgb color string.");var r=e[1].split(","),o=r.slice(0,3).map(function(t){return(+t-50>0?+t-50:0)+""});return 4===r.length&&o.push(r[3]),"rgb("+o.join(",")+")"}function pad(t,e,r){return void 0===t&&(t=""),void 0===r&&(r="0"),t.length>=e?t:new Array(e-t.length+1).join(r)+t}function padRight(t,e,r){return void 0===t&&(t=""),void 0===r&&(r="0"),t.length>=e?t:t+new Array(e-t.length+1).join(r)}function clientOffset(t){for(var e=0,r=0;t!==document.body;)e+=t.offsetTop,r+=t.offsetLeft,t=t.offsetParent;return{top:e,left:r}}function formatNumber(t,e){return void 0===e&&(e=0),Math.abs(t/1e12)>=1?(t/1e12).toFixed(e)+"万亿":Math.abs(t/1e8)>=1?(t/1e8).toFixed(e)+"亿":Math.abs(t/1e4)>=1?(t/1e4).toFixed(e)+"万":t.toFixed(e)}function pointToSegDist(t,e,r,o,n,i){var a=(n-r)*(t-r)+(i-o)*(e-o);if(a<=0)return Math.sqrt((t-r)*(t-r)+(e-o)*(e-o));var s=(n-r)*(n-r)+(i-o)*(i-o);if(a>=s)return Math.sqrt((t-n)*(t-n)+(e-i)*(e-i));var l=a/s,c=r+(n-r)*l,h=o+(i-o)*l;return Math.sqrt((t-c)*(t-c)+(e-h)*(e-h))}function isPointInRect(t,e,r,o,n,i){return t>=Math.min(r,n)&&t<=Math.max(r,n)&&e>=Math.min(o,i)&&e<=Math.max(o,i)}function getCanvasHeight(t){return t.style.height?parseInt(t.style.height):t.height}function getCanvasWidth(t){return t.style.width?parseInt(t.style.width):t.width}function animationQueue(){var t={_itvl:0,_queue:[],delay:function(e){return t._queue.push(["delay",e]),t._go(),t},enqueue:function(e){return t._queue.push(["action",e]),t._go(),t},_go:function(){clearTimeout(t._itvl),t._itvl=setTimeout(function(){var e=t._queue.shift();e&&("delay"===e[0]?setTimeout(function(){return t._go()},e[1]):"action"===e[0]&&(e[1](),setTimeout(function(){return t._go()},0)))},0)}};return t}function requestFullscreen(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullScreen?(window.navigator.userAgent.toUpperCase().indexOf("CHROME"),t.webkitRequestFullScreen()):t.mozRequestFullScreen&&t.mozRequestFullScreen()}function exitFullscreen(){["exitFullscreen","mozCancelFullScreen","mozExitFullscreen","webkitExitFullscreen","msExitFullscreen"].some(function(t){if("function"==typeof document[t])return document[t](),!0})}function getFullScreenElement(){var t=null;return["fullscreenElement","webkitFullscreenElement","mozFullscreenElement","msFullscreenElement"].some(function(e){if(e in document)return t=document[e],!0}),t}e.cloneObj=cloneObj,e.getParameterByName=getParameterByName,e.darkenRGB=darkenRGB,e.pad=pad,e.padRight=padRight,e.clientOffset=clientOffset,e.formatNumber=formatNumber,e.pointToSegDist=pointToSegDist,e.isPointInRect=isPointInRect,e.getCanvasHeight=getCanvasHeight,e.getCanvasWidth=getCanvasWidth,e.animationQueue=animationQueue,e.requestFullscreen=requestFullscreen,e.exitFullscreen=exitFullscreen,e.getFullScreenElement=getFullScreenElement},x85n:function(t,e){},xlyV:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},n=this&&this.__assign||Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t};r("pip8");var i=r("dREm"),a=r("U7vG"),s=r("rdLu"),l=r("NvYq"),c=r("xuHO"),h=r("bIqt"),u=r("aTSk"),d=r("TsRb"),p=r("HJCg"),f=r("7B1/"),m=r("ulXj"),y=r("3663"),g=r("Lk2d"),_=r("nbee"),v=r("KVhT"),b=r("H9vw"),E=r("Cqed"),x=r("wRi7"),w=r("b2uV"),T=r("2OPA"),S=r("GawB"),L=r("NBiX"),C=function(t){function ChartLayout(e,r){t.call(this,e,r),this._chartLayout=this.context.chartLayout;var o=this._chartLayout;o.component=this,this.state={sidebarFolded:o.readFromLS("qchart.sidebar.folded"),sidebarActiveIndex:o.readFromLS("qchart.sidebar.activeIndex")||0,footerPanelFolded:!0,footerPanelActiveIndex:0,loaded:!1,showAbout:!this._chartLayout.readFromLS("chart.welcome"),showGoToDate:!1},this.updateView=this.updateView.bind(this),this.onSymbolChange=this.onSymbolChange.bind(this),this.onResolutionChange=this.onResolutionChange.bind(this),this.onRightChange=this.onRightChange.bind(this),this.onAddComparison=this.onAddComparison.bind(this),this.onRemoveComparison=this.onRemoveComparison.bind(this),this.onAddStudy=this.onAddStudy.bind(this),this.onStudyModified=this.onStudyModified.bind(this),this.onFullScreen=this.onFullScreen.bind(this),this.sidebarChangeHandler=this.sidebarChangeHandler.bind(this),this.footerPanelChangeHandler=this.footerPanelChangeHandler.bind(this),this.wheelHandler=this.wheelHandler.bind(this)}return o(ChartLayout,t),ChartLayout.prototype.shouldComponentUpdate=function(t,e){return!s.isEqual(this.state,e)||!s.isEqual(this.props,t)},ChartLayout.prototype.componentDidMount=function(){var t=this,e=this._chartLayout,r=new i({}).spin(this.refs.root),o=e.readFromLS("qchart.resolution")||this.props.resolution,n=new b.StockDatasource(this.props.defaultSymbol,o,this.props.right),a=x.getParameterByName("start")||null;e.saveToLS("chart.welcome",!0),Promise.all([e.getServerTime(),n.resolveSymbol(this.props.symbol)]).then(function(){history.replaceState(null,document.title,"/?symbol="+n.symbol),t.prepareMainChart(n,o),t.initEvents(),r.stop(),t.setState({loaded:!0},function(){var t=this;e.addPatterns(),a&&(this.goToDateChecker=setInterval(function(){e.mainDatasource.loaded()>0&&(e.goToDate(+a),clearInterval(t.goToDateChecker))},100))})})},ChartLayout.prototype.componentWillUnmount=function(){var t=this._chartLayout;t.removeAllListeners(),t.axisx.removeAllListeners()},ChartLayout.prototype.componentDidUpdate=function(){this._chartLayout.fullUpdate()},ChartLayout.prototype.prepareMainChart=function(t,e){var r=this._chartLayout,o=new v.default(r),n=new w.default(t,o),i=new T.default(t,o),a=new _.default(r,t,n,i,o,!0,!0);i.chart=a,o.chart=a,r.axisx=n,r.mainDatasource=t,a.addGraph(new S.default(t,a,!0,!0,!1,"1"===e&&"candle"===this.props.shape?"line":this.props.shape,{lineWidth:2})),r.addChart(a),r.resetStudies()},ChartLayout.prototype.initEvents=function(){var t=this._chartLayout;t.axisx.addListener("offset_change",t.fullUpdate),t.axisx.addListener("barwidth_change",t.fullUpdate),t.addListener("chart_add",this.updateView),t.addListener("chart_remove",this.updateView),t.addListener("graph_add",t.lightUpdate),t.addListener("graph_remove",t.lightUpdate),t.addListener("graph_modify",t.lightUpdate),t.addListener("graph_hover",t.lightUpdate),t.addListener("graph_select",t.lightUpdate),t.addListener("cursor_move",t.lightUpdate),t.addListener("barmargin_change",t.lightUpdate),t.addListener("drawingtool_begin",t.lightUpdate),t.addListener("drawingtool_end",t.lightUpdate),t.addListener("drawingtool_setvertex",t.lightUpdate),t.addListener("drawingtool_remove",t.lightUpdate),t.addListener("editmode_change",t.lightUpdate),t.addListener("patterns_add",t.lightUpdate),t.addListener("patterns_remove",t.lightUpdate),t.addListener("pattern_modify",t.lightUpdate),t.addListener("gap_visibility_change",t.lightUpdate)},ChartLayout.prototype.render=function(){var t=this.props.width,e=this.props.height;if(!this.state.loaded)return a.createElement("div",{className:"chart-layout",ref:"root",style:{height:e+"px",width:t+"px"}});var r=this._chartLayout,o=t>768&&e>450,i=!!o&&this.props.showsidebar,s=!!o&&this.props.showtoolbox,_=!!o&&this.props.showfooterpanel,v=t-12;s&&(v-=E.TOOLBOX_WIDTH),i&&(v-=this.state.sidebarFolded?E.SIDEBAR_FOLD_WIDTH:E.SIDEBAR_WIDTH);var b=this.props.shownavbar,x=this.props.showcontrolbar,w=e-E.AXIS_X_HEIGHT-12;b&&(w-=E.NAVBAR_HEIGHT),x&&(w-=E.CONTROL_BAR_HEIGHT),_&&(w-=this.state.footerPanelFolded?E.FOOTER_PANEL_HEIGHT:E.FOOTER_PANEL_UNFOLD_HEIGHT),r.charts.length>1&&(w-=r.charts.length-1);for(var T=r.charts.length-1,S=~~((1-.3*T>.3?1-.3*T:.3)*w),L=~~((w-S)/T),C=[],M=0,P=r.charts.length,k=void 0;M<P;M++)k=r.charts[M],C.push(a.createElement(u.default,{key:k.id,chart:k,height:k.isMain?S:L,width:v})),M<P-1&&C.push(a.createElement("div",{key:k.id+"_separator",className:"chart-separator"}));return a.createElement("div",{className:"chart-layout",ref:"root",style:{height:e+"px",width:t+"px"}},s?a.createElement(p.default,null):null,this.state.showAbout?a.createElement(l.default,null):null,this.state.showGoToDate?a.createElement(c.default,null):null,this.state.contextMenuConfig?a.createElement(h.default,n({},this.state.contextMenuConfig)):null,i?a.createElement(m.default,{folded:this.state.sidebarFolded,activeIndex:this.state.sidebarActiveIndex,onChange:this.sidebarChangeHandler,width:this.state.sidebarFolded?E.SIDEBAR_FOLD_WIDTH:E.SIDEBAR_WIDTH,height:this.props.height}):null,b?a.createElement(f.default,{width:v,onSymbolChange:this.onSymbolChange,onResolutionChange:this.onResolutionChange,onAddComparison:this.onAddComparison,onRemoveComparison:this.onRemoveComparison,onAddStudy:this.onAddStudy,onStudyModified:this.onStudyModified,onFullScreen:this.onFullScreen,onRightChange:this.onRightChange}):null,a.createElement("div",{className:"chart-body",style:{width:v+2+"px"},onWheel:this.wheelHandler},C,a.createElement(d.default,{height:E.AXIS_X_HEIGHT,width:v-E.AXIS_Y_WIDTH})),x?a.createElement(y.default,{width:v+2}):null,_?a.createElement(g.default,{folded:this.state.footerPanelFolded,activeIndex:this.state.footerPanelActiveIndex,onChange:this.footerPanelChangeHandler,width:v+2}):null)},ChartLayout.prototype.onSymbolChange=function(t){this._chartLayout.setSymbol(t)},ChartLayout.prototype.onResolutionChange=function(t){this._chartLayout.saveToLS("qchart.resolution",t),this._chartLayout.setResolution(t)},ChartLayout.prototype.onRightChange=function(t){this._chartLayout.setRight(t)},ChartLayout.prototype.onAddComparison=function(t){return this._chartLayout.addComparison(t)},ChartLayout.prototype.onRemoveComparison=function(t){this._chartLayout.removeComparison(t)},ChartLayout.prototype.onAddStudy=function(t){this._chartLayout.addStudy(t)},ChartLayout.prototype.onStudyModified=function(t,e){this._chartLayout.modifyGraph(t,e)},ChartLayout.prototype.onFullScreen=function(){var t=this.refs.root;x.getFullScreenElement()===t?x.exitFullscreen():x.requestFullscreen(t)},ChartLayout.prototype.sidebarChangeHandler=function(t,e){this.setState({sidebarFolded:t,sidebarActiveIndex:e})},ChartLayout.prototype.footerPanelChangeHandler=function(t,e){this.setState({footerPanelFolded:t,footerPanelActiveIndex:e})},ChartLayout.prototype.wheelHandler=function(t){if(t.preventDefault(),0!==this._chartLayout.mainDatasource.loaded()){this._chartLayout.axisx.offset-=t.deltaX}},ChartLayout.prototype.updateView=function(){this.forceUpdate()},ChartLayout.propTypes={axis:a.PropTypes.oneOf(["left","right","both"]),resolution:a.PropTypes.oneOf(["1","5","15","30","60","D","W","M"]),scalable:a.PropTypes.bool,scrollable:a.PropTypes.bool,shape:a.PropTypes.oneOf(["mountain","line","column","candle"]),showtoolbox:a.PropTypes.bool,showcontrolbar:a.PropTypes.bool,showfooterpanel:a.PropTypes.bool,showsidebar:a.PropTypes.bool,shownavbar:a.PropTypes.bool,study:a.PropTypes.oneOf(["MA","MACD","BOLL","KDJ","VOLUME"]),to:a.PropTypes.number,type:a.PropTypes.oneOf(["snapshot","realtime"]),width:a.PropTypes.number.isRequired,right:a.PropTypes.oneOf([0,1,2])},ChartLayout.defaultProps={axis:"right",resolution:"1",scalable:!0,scrollable:!0,shape:"line",showtoolbox:!0,showcontrolbar:!0,shownavbar:!0,showsidebar:!0,showfooterpanel:!0,type:"realtime",right:1},ChartLayout.contextTypes={chartLayout:a.PropTypes.instanceOf(L.default)},ChartLayout}(a.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=C},xuHO:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("h0hR"),r("Vq7t"),r("SjNc");var n=r("U7vG"),i=r("PJh5"),a=r("8ijy"),s=r("IloD"),l=r("NBiX"),c=r("Cqed"),h=function(t){function GoToDateDialog(e,r){t.call(this,e,r),this._inputDateValue=null,this._chartLayout=r.chartLayout,this.state={},this.dateChangeHandler=this.dateChangeHandler.bind(this),this.datePickerBlurHandler=this.datePickerBlurHandler.bind(this),this.dialogCloseHandler=this.dialogCloseHandler.bind(this),this.goToDateHandler=this.goToDateHandler.bind(this),this.checkDateHandler=this.checkDateHandler.bind(this)}return o(GoToDateDialog,t),GoToDateDialog.prototype.shouldComponentUpdate=function(t,e){return!1},GoToDateDialog.prototype.render=function(){var t=this._chartLayout,e=t.mainDatasource.resolution>"60",r=t.mainDatasource,o=new Date(1e3*r.now());this.correctTime(o);var l=this._inputDateValue?this._inputDateValue:i(o).minute(o.getMinutes()-o.getMinutes()%5),h=e?l.format("YYYY-MM-DD"):l.format("YYYY-MM-DD HH:mm");return this._inputDateValue=l,n.createElement(s.default,{title:"定位时间",className:"chart-gotodate",onClose:this.dialogCloseHandler},n.createElement("div",null,n.createElement("input",{ref:"dateInput",type:"text",readOnly:!0,defaultValue:h}),n.createElement("button",{className:"btn btn-blue",onClick:this.goToDateHandler},"前往")),n.createElement(a,{input:!1,value:l.toDate(),open:!0,isValidDate:this.checkDateHandler,dateFormat:!0,timeFormat:!e||null,timeConstraints:{hours:{min:c.OPEN_HOUR,max:c.CLOSE_HOUR},minutes:{step:5}},closeOnSelect:!1,disableOnClickOutside:!0,locale:"zh-cn",onBlur:this.datePickerBlurHandler,onChange:this.dateChangeHandler}))},GoToDateDialog.prototype.goToDateHandler=function(){var t=this._chartLayout,e=t.mainDatasource.resolution,r=this._inputDateValue.toDate();r.setSeconds(0),e>"60"&&(r.setHours(0),r.setMinutes(0)),t.goToDate(~~(r.getTime()/1e3)),this.dialogCloseHandler()},GoToDateDialog.prototype.dialogCloseHandler=function(){this._chartLayout.toggleGoToDate(!1)},GoToDateDialog.prototype.dateChangeHandler=function(t){var e=this._chartLayout.mainDatasource.resolution;this._inputDateValue=t,this.refs.dateInput.value=t.format(e>"60"?t.format("YYYY-MM-DD"):t.format("YYYY-MM-DD HH:mm"))},GoToDateDialog.prototype.datePickerBlurHandler=function(){this.setState({})},GoToDateDialog.prototype.checkDateHandler=function(t,e){var r=this._chartLayout,o=r.mainDatasource.resolution,n=r.mainDatasource.now(),a=i(1e3*n),s=i(1e3*n);if(t.isAfter(a))return!1;switch(o){case"1":return s.subtract(1,"months"),t.isAfter(s);case"5":return s.subtract(2,"months"),t.isAfter(s);case"15":return s.subtract(6,"months"),t.isAfter(s);case"30":return s.subtract(1,"years"),t.isAfter(s);case"60":return s.subtract(2,"years"),t.isAfter(s);case"D":case"W":case"M":return!0;default:throw new Error("Unsupported resolution")}},GoToDateDialog.prototype.correctTime=function(t){var e=t.getHours(),r=t.getMinutes();e<c.OPEN_HOUR||e===c.OPEN_HOUR&&r<c.OPEN_MINUTE?(t.setHours(c.OPEN_HOUR),t.setMinutes(c.OPEN_MINUTE)):(e>c.CLOSE_HOUR||e===c.CLOSE_HOUR&&r>c.CLOSE_MINUTE)&&(t.setHours(c.CLOSE_HOUR),t.setMinutes(c.CLOSE_MINUTE))},GoToDateDialog.contextTypes={chartLayout:n.PropTypes.instanceOf(l.default)},GoToDateDialog}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=h},yk63:function(t,e,r){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};r("gi10");var n=r("U7vG"),i=r("bHfy"),a=r("H9vw"),s=function(t){function Plates(){t.call(this),this.timer=null,this.state={activeIndex:-1,stocks:null},this.selectPlate=this.selectPlate.bind(this)}return o(Plates,t),Plates.prototype.componentDidMount=function(){this._platesScroll=new i(this.refs.plates,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,click:!0})},Plates.prototype.componentWillUnmount=function(){this._platesScroll.destroy(),this._platesScroll=null,this.cancelStockListTimer()},Plates.prototype.componentDidUpdate=function(){this._platesScroll.refresh()},Plates.prototype.shouldComponentUpdate=function(t,e){var r=this.props,o=this.state;return r.plates!==t.plates||r.height!==t.height||o.stocks!==e.stocks||o.activeIndex!==e.activeIndex},Plates.prototype.render=function(){var t=this,e=this.props.plates;return e?n.createElement("div",{className:"plates",ref:"plates",style:{height:this.props.height+"px"}},n.createElement("div",null,n.createElement("h3",null,"所属板块"),n.createElement("ul",{className:"plate-list"},e.map(function(e,r){return n.createElement("li",{key:e.n,className:t.state.activeIndex===r?"active":""},n.createElement("h4",{"data-index":r,"data-id":e.bk_id,onClick:t.selectPlate},e.n),t.state.activeIndex===r?n.createElement("ul",{className:"stocks-in-same-plate"},t.state.stocks?t.state.stocks.map(function(t){var e=t.p_change>0?"positive":t.p_change<0?"negtive":"";return n.createElement("li",{key:t.c},n.createElement("span",{className:"stock-name"},n.createElement("b",null,t.n),n.createElement("i",null,t.c)),n.createElement("span",{className:e+" price"},t.price),n.createElement("span",{className:e+" change-rate"},t.p_change>0?"+":"",(100*t.p_change).toFixed(2),"%"))}):null):null)})))):n.createElement("div",{className:"plates",ref:"plates",style:{height:this.props.height+"px"}},n.createElement("div",{className:"no-plates"},"非个股无板块信息"))},Plates.prototype.selectPlate=function(t){t.touches&&t.preventDefault();var e=+t.target.dataset.index,r=t.target.dataset.id;e===this.state.activeIndex?(this.cancelStockListTimer(),this.setState({activeIndex:-1})):(this.loadStockList(r),this.setState({activeIndex:e,stocks:null}))},Plates.prototype.loadStockList=function(t){var e=this;this.cancelStockListTimer(),a.getStockListByPlateId(t).then(function(r){var o=1e3*r.data.intver;e.setState({stocks:r.data.list}),e.timer=o?setTimeout(function(){return e.loadStockList(t)},o):-1})},Plates.prototype.cancelStockListTimer=function(){clearTimeout(this.timer)},Plates}(n.Component);Object.defineProperty(e,"__esModule",{value:!0}),e.default=s}},["qMEF"]);
//# sourceMappingURL=main-19467eea.js.map